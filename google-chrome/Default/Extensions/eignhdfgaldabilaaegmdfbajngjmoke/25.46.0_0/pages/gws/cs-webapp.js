"use strict";!function(){var r=window,m=r.location,i=document,n=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),o=n.startsWith("safari-web-extension://"),s=!o&&n.startsWith("moz-extension://");"undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&String.quote;function u(e,t,a){r.parent.postMessage({bm_method:e,bm_request:a,bm_value:t},n)}function g(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var a=e;a;){if(a.tagName===t)return a;a=a.parentNode}return null}function f(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}var l,c,d,p,e,t,a,h,b="https://www.google.com",v="https://maps.google.com",w=m.origin,y=/^Mac|^iP/.test(navigator.platform)?"metaKey":"ctrlKey",L="gws",S="undefined"!=typeof URLSearchParams,_=!1,E=["/search","/mobile","/images"],U=["/","/m","/imgres","/finance"],P=["bm_cid","bm_pid","bm_iid","bm_wiz","ie","oe","authuser","fg","gws_rd","nord","adtest","adtest-useragent","igu","hl"];function T(){var e=m.pathname.indexOf("/amp/");return-1!==e&&e<10}function k(){var e,t,a,n;S&&(t=(e=new URLSearchParams(m.search)).get("q"),a=e.get("tbm"),n=e.get("udm"),"finance"===L&&u("gwsReflectFinanceTab",e.get("kptab")),!0!==_||T()||(_=!1,u("gwsCloseAmp")),c===t&&d===a&&p===n||u("gwsUpdateQuery",{q:c=t,tbm:d=a,udm:p=n}))}function R(e,t,a){u("bmCstOpenUrl",[e,t,a])}function x(e){var t,a,n,r,i,o,s,c,d=g(e.target);d&&(f(d),t=e.shiftKey,a=e[y]||1===e.button||2===e.which,n=d.origin,d.dataset.amp||d.dataset.ampTitle?(s=t,i=a,o=(r=d).dataset.ampCur||r.href,i?R(o,s,i):(u("gwsOpenAmp",{label:r.dataset.ampTitle,url:o,vid:r.dataset.ampVgi}),setTimeout(function(){T()&&(_=!0)},200))):n&&(n===b&&w===v&&(n=d.origin=v),s=d.pathname,d.origin===w&&-1!==E.indexOf(s)&&(s=d.pathname="/m"),n===w&&s.startsWith("/shopping/product/")||(d.classList.contains("sh-cb__back")&&(e.preventDefault(),m.reload()),a||n!==w||-1===U.indexOf(s)?(R(d.href,t,a),e.stopPropagation(),e.preventDefault()):(S&&(c=new URLSearchParams(d.search),P.forEach(function(e){var t=l.get(e);t&&c.set(e,t)}),"finance"===L?c.delete("tbm"):"search"===L&&l.get("adtest-useragent")&&"isch"===c.get("tbm")&&(c.set("adtest-useragent","Opera/12.02 (Android 4.1; Linux; Opera Mobi/ADR-1111101157; U; en-US) Presto/2.9.201 Version/12.02"),c.set("bm_cid","gws-images")),d.search=c),setTimeout(k)))))}e=function(e,t){return t&&t.startsWith("gws")&&(e===b||e===v)},t=function(){var e,a;S&&(l=new URLSearchParams(m.search),L=l.get("bm_pid")),e=function(){var e;(e=i.querySelector("base"))&&w===v&&(e.href=v+"/"),i.body.addEventListener("contextmenu",function(e){e.stopPropagation()})},"complete"===i.readyState||"loaded"===i.readyState||"interactive"===i.readyState?e():i.addEventListener("DOMContentLoaded",e),i.addEventListener("click",x,!0),i.addEventListener("auxclick",function(e){1===e.button&&x(e)},!0),a=function(e,t,a){var n;"gwsToggleFilterMenu"===e?(n=i.getElementById("hdtb-tls")||i.querySelector('[aria-controls="hdtbMenus"]'))&&n.click():"gwsGoBack"===e?(r.history.back(),setTimeout(k),setTimeout(k,500)):"gwsGetUrl"===e&&u(e,m.href,a)},r.addEventListener("message",function(e){var t;if(o){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===n))return;(e.isTrusted||s)&&e.source===r.parent&&(t=(e=e.data||{}).bm_method)&&a(t,e.bm_value,e.bm_request)}),k()},function(e){var t,a;if(r.top!==r.self&&!(i.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=m.ancestorOrigins)?1:(a=o?n.toLowerCase():n,1===t.length?t[0]===a:e&&2===t.length&&t[1]===a&&!t[0].endsWith(".google.com"))}(a)&&(h=(h=(a=m.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&h[1],e(origin,h,a))&&(h&&(i.documentElement.dataset.bmCid=h),t())}();