"use strict";!function(){var o=document;function r(e,c){var a=cjce.createElement("cjmd-item"),t=(c||a.classList.add("bm-p-accountchooser-item--large"),a.addEventListener("click",function(){e.validSession?cjgApis.session.changeAccount(e):cjgApis.account.signin(e)}),c?32:40),t=cjce.createElement("cjmd-icon",{avatar:!0,size:t,url:cjgFrontend.urls.getAvatar(e.photoUrl,t)}),t=(c&&t.classList.add("bm-p-accountchooser-item__compacticon"),a.appendChild(t),o.createElement("div")),n=(t.className="cjmd-item__body",o.createElement("div"));return n.className="cjmd-item__header",n.textContent=e.displayName,t.appendChild(n),c||((n=o.createElement("div")).className="cjmd-secondarytext",n.textContent=e.displayEmail,t.appendChild(n)),e.validSession||((c=o.createElement("div")).className="cjmd-secondarytext bm-p-accountchooser-item__signedout",c.textContent=cjBasics.lang.i18n("cj_i18n_01508","Signed out"),t.appendChild(c)),a.appendChild(t),a}cjce.registerTemplate("bm-p-accountchooser",function(e,i){var c,s,d,l=!i.standaloneService||i.servicesDatabase[i.standaloneService].brandAccount;function a(){var e=o.createElement("div"),c=(e.className="bm-p-accountchooser-header",cjce.applyTemplate(e,"bm-loadingbar"),cjce.createElement("cjmd-icon",{avatar:!0,size:72,url:cjgFrontend.urls.getAvatar(i.account.photoUrl,72)})),c=(c.classList.add("bm-p-accountchooser-header__avatar"),e.appendChild(c),o.createElement("div")),a=(c.className="bm-p-accountchooser-header__details",o.createElement("div")),a=(a.className="bm-p-accountchooser-header__name",a.textContent=i.account.displayName,c.appendChild(a),o.createElement("div")),a=(a.className="cjmd-secondarytext bm-p-accountchooser-header__email",a.textContent=i.account.pageId?cjBasics.lang.i18n("cj_i18n_00363","Brand account"):i.account.displayEmail,c.appendChild(a),cjce.createElement("ccbm-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01506","Account"),onClick:function(){i.servicesDatabase.myaccount&&!i.missingGooglePermission?i.pageManager.navigate("myaccount"):i.openTab("https://myaccount.google.com"+i.wizPath+"/")}})),a=(a.classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),cjce.createElement("ccbm-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_00161","About me"),onClick:function(){i.servicesDatabase.aboutme&&!i.missingGooglePermission?i.pageManager.navigate("aboutme"):i.openTab("https://myaccount.google.com"+i.wizPath+"/profile")}})),a=(a.classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),e.appendChild(c),cjce.createElement("ccbm-button",{color:!0,label:cjBasics.lang.i18n("cj_i18n_01507","Sign out"),onClick:function(){browserStorage.local.get().then(function(e){return Object.keys(e).filter(function(e){return e.startsWith("bm_cache_")})}).then(browserStorage.local.remove),cjgApis.account.signout()}}));return a.classList.add("bm-p-accountchooser-header__button"),c.appendChild(a),e.appendChild(c),e}c=a(),e.appendChild(c),s=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),e.appendChild(s),d=cjce.createElement("cjmd-list"),e=cjce.createElement("cjmd-item",{icon:{size:24,color:!0,withShell:!0,name:"__mdi:add"},label:cjBasics.lang.i18n("cj_i18n_00361","Add account"),onClick:function(){cjgApis.account.signin()}}),d.appendChild(e),cjgApis.session.getAccountsList().then(function(e){var t,n,a,o;Array.isArray(e)&&0!==e.length&&(t={},n=i.account.authuser,a="0"!==n,o={},e.forEach(function(e){var c;e.pageId?t[e.pageId]=e:(e.obfuscatedId!==i.account.obfuscatedId&&(c=r(e),d.appendChild(c)),(c=e.authuser)===n||(o[c]=!0,a)||"1"!==c||(a=!0))}),s.appendChild(d),l)&&(a||0!==Object.keys(t).length)&&(e=Object.keys(o).map(function(e){return cjgApis.account.list({authuser:e}).then(function(e){Array.isArray(e)&&e.forEach(function(e){var c,a=e.pageId;a&&(!(c=t[a])||e.ownedBySelectedAccount&&!c.ownedBySelectedAccount||e.ownedBySelectedAccount===c.ownedBySelectedAccount&&e.authuser===n)&&(t[a]=e)})})}),Promise.all(e).then(function(){var e=Object.keys(t);if(0!==e.length){if(1===e.length){var c=e[0];if(t[c].obfuscatedId===i.account.obfuscatedId)return}c=cjce.createElement("cjmd-subheader",{label:cjBasics.lang.i18n("cj_i18n_00744","Brand accounts")});d.appendChild(c),e.map(function(e){return t[e]}).sort(function(e,c){return e.displayName<c.displayName?-1:1}).forEach(function(e){e.obfuscatedId!==i.account.obfuscatedId&&(e=r(e,!0),d.appendChild(e))})}}))}).then(function(){c.cjceSetLoading(!1)})})}();