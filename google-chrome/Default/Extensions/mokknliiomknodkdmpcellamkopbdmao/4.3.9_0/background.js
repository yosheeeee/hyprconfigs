"use strict";(()=>{var jt=Object.create;var Ie=Object.defineProperty;var Ut=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Dt=Object.prototype.hasOwnProperty;var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var $t=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Bt(e))!Dt.call(t,s)&&s!==r&&Ie(t,s,{get:()=>e[s],enumerable:!(n=Ut(e,s))||n.enumerable});return t};var j=(t,e,r)=>(r=t!=null?jt(Ht(t)):{},$t(e||!t||!t.__esModule?Ie(r,"default",{value:t,enumerable:!0}):r,t));var Fe=M((Mr,Me)=>{"use strict";var U=1e3,B=U*60,H=B*60,F=H*24,Vt=F*7,Wt=F*365.25;Me.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return zt(t);if(r==="number"&&isFinite(t))return e.long?Kt(t):Jt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function zt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Wt;case"weeks":case"week":case"w":return r*Vt;case"days":case"day":case"d":return r*F;case"hours":case"hour":case"hrs":case"hr":case"h":return r*H;case"minutes":case"minute":case"mins":case"min":case"m":return r*B;case"seconds":case"second":case"secs":case"sec":case"s":return r*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Jt(t){var e=Math.abs(t);return e>=F?Math.round(t/F)+"d":e>=H?Math.round(t/H)+"h":e>=B?Math.round(t/B)+"m":e>=U?Math.round(t/U)+"s":t+"ms"}function Kt(t){var e=Math.abs(t);return e>=F?Z(t,e,F,"day"):e>=H?Z(t,e,H,"hour"):e>=B?Z(t,e,B,"minute"):e>=U?Z(t,e,U,"second"):t+" ms"}function Z(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Q=M((le,Le)=>{"use strict";(function(t,e){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],e);else if(typeof le<"u")e(Le);else{var r={exports:{}};e(r),t.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:le,function(t){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let e="The message port closed before a response was received.",r=n=>{let s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(s).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class u extends WeakMap{constructor(a,p=void 0){super(p),this.createItem=a}get(a){return this.has(a)||this.set(a,this.createItem(a)),super.get(a)}}let o=i=>i&&typeof i=="object"&&typeof i.then=="function",c=(i,a)=>(...p)=>{n.runtime.lastError?i.reject(new Error(n.runtime.lastError.message)):a.singleCallbackArg||p.length<=1&&a.singleCallbackArg!==!1?i.resolve(p[0]):i.resolve(p)},f=i=>i==1?"argument":"arguments",l=(i,a)=>function(g,...E){if(E.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${f(a.minArgs)} for ${i}(), got ${E.length}`);if(E.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${f(a.maxArgs)} for ${i}(), got ${E.length}`);return new Promise((k,R)=>{if(a.fallbackToNoCallback)try{g[i](...E,c({resolve:k,reject:R},a))}catch(A){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),g[i](...E),a.fallbackToNoCallback=!1,a.noCallback=!0,k()}else a.noCallback?(g[i](...E),k()):g[i](...E,c({resolve:k,reject:R},a))})},m=(i,a,p)=>new Proxy(a,{apply(g,E,k){return p.call(E,i,...k)}}),d=Function.call.bind(Object.prototype.hasOwnProperty),y=(i,a={},p={})=>{let g=Object.create(null),E={has(R,A){return A in i||A in g},get(R,A,C){if(A in g)return g[A];if(!(A in i))return;let v=i[A];if(typeof v=="function")if(typeof a[A]=="function")v=m(i,i[A],a[A]);else if(d(p,A)){let q=l(A,p[A]);v=m(i,i[A],q)}else v=v.bind(i);else if(typeof v=="object"&&v!==null&&(d(a,A)||d(p,A)))v=y(v,a[A],p[A]);else if(d(p,"*"))v=y(v,a[A],p["*"]);else return Object.defineProperty(g,A,{configurable:!0,enumerable:!0,get(){return i[A]},set(q){i[A]=q}}),v;return g[A]=v,v},set(R,A,C,v){return A in g?g[A]=C:i[A]=C,!0},defineProperty(R,A,C){return Reflect.defineProperty(g,A,C)},deleteProperty(R,A){return Reflect.deleteProperty(g,A)}},k=Object.create(i);return new Proxy(k,E)},w=i=>({addListener(a,p,...g){a.addListener(i.get(p),...g)},hasListener(a,p){return a.hasListener(i.get(p))},removeListener(a,p){a.removeListener(i.get(p))}}),T=new u(i=>typeof i!="function"?i:function(p){let g=y(p,{},{getContent:{minArgs:0,maxArgs:0}});i(g)}),_=new u(i=>typeof i!="function"?i:function(p,g,E){let k=!1,R,A=new Promise($=>{R=function(P){k=!0,$(P)}}),C;try{C=i(p,g,R)}catch($){C=Promise.reject($)}let v=C!==!0&&o(C);if(C!==!0&&!v&&!k)return!1;let q=$=>{$.then(P=>{E(P)},P=>{let ce;P&&(P instanceof Error||typeof P.message=="string")?ce=P.message:ce="An unexpected error occurred",E({__mozWebExtensionPolyfillReject__:!0,message:ce})}).catch(P=>{console.error("Failed to send onMessage rejected reply",P)})};return q(v?C:A),!0}),b=({reject:i,resolve:a},p)=>{n.runtime.lastError?n.runtime.lastError.message===e?a():i(new Error(n.runtime.lastError.message)):p&&p.__mozWebExtensionPolyfillReject__?i(new Error(p.message)):a(p)},S=(i,a,p,...g)=>{if(g.length<a.minArgs)throw new Error(`Expected at least ${a.minArgs} ${f(a.minArgs)} for ${i}(), got ${g.length}`);if(g.length>a.maxArgs)throw new Error(`Expected at most ${a.maxArgs} ${f(a.maxArgs)} for ${i}(), got ${g.length}`);return new Promise((E,k)=>{let R=b.bind(null,{resolve:E,reject:k});g.push(R),p.sendMessage(...g)})},h={devtools:{network:{onRequestFinished:w(T)}},runtime:{onMessage:w(_),onMessageExternal:w(_),sendMessage:S.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:S.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},y(n,h,s)};t.exports=r(chrome)}else t.exports=globalThis.browser})});var nt=M((Jr,ne)=>{"use strict";var Ae=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(o,c){if(!n[o]){n[o]={};for(var f=0;f<o.length;f++)n[o][o.charAt(f)]=f}return n[o][c]}var u={compressToBase64:function(o){if(o==null)return"";var c=u._compress(o,6,function(f){return e.charAt(f)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:u._decompress(o.length,32,function(c){return s(e,o.charAt(c))})},compressToUTF16:function(o){return o==null?"":u._compress(o,15,function(c){return t(c+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:u._decompress(o.length,16384,function(c){return o.charCodeAt(c)-32})},compressToUint8Array:function(o){for(var c=u.compress(o),f=new Uint8Array(c.length*2),l=0,m=c.length;l<m;l++){var d=c.charCodeAt(l);f[l*2]=d>>>8,f[l*2+1]=d%256}return f},decompressFromUint8Array:function(o){if(o==null)return u.decompress(o);for(var c=new Array(o.length/2),f=0,l=c.length;f<l;f++)c[f]=o[f*2]*256+o[f*2+1];var m=[];return c.forEach(function(d){m.push(t(d))}),u.decompress(m.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":u._compress(o,6,function(c){return r.charAt(c)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),u._decompress(o.length,32,function(c){return s(r,o.charAt(c))}))},compress:function(o){return u._compress(o,16,function(c){return t(c)})},_compress:function(o,c,f){if(o==null)return"";var l,m,d={},y={},w="",T="",_="",b=2,S=3,h=2,x=[],i=0,a=0,p;for(p=0;p<o.length;p+=1)if(w=o.charAt(p),Object.prototype.hasOwnProperty.call(d,w)||(d[w]=S++,y[w]=!0),T=_+w,Object.prototype.hasOwnProperty.call(d,T))_=T;else{if(Object.prototype.hasOwnProperty.call(y,_)){if(_.charCodeAt(0)<256){for(l=0;l<h;l++)i=i<<1,a==c-1?(a=0,x.push(f(i)),i=0):a++;for(m=_.charCodeAt(0),l=0;l<8;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1}else{for(m=1,l=0;l<h;l++)i=i<<1|m,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=0;for(m=_.charCodeAt(0),l=0;l<16;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1}b--,b==0&&(b=Math.pow(2,h),h++),delete y[_]}else for(m=d[_],l=0;l<h;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1;b--,b==0&&(b=Math.pow(2,h),h++),d[T]=S++,_=String(w)}if(_!==""){if(Object.prototype.hasOwnProperty.call(y,_)){if(_.charCodeAt(0)<256){for(l=0;l<h;l++)i=i<<1,a==c-1?(a=0,x.push(f(i)),i=0):a++;for(m=_.charCodeAt(0),l=0;l<8;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1}else{for(m=1,l=0;l<h;l++)i=i<<1|m,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=0;for(m=_.charCodeAt(0),l=0;l<16;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1}b--,b==0&&(b=Math.pow(2,h),h++),delete y[_]}else for(m=d[_],l=0;l<h;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1;b--,b==0&&(b=Math.pow(2,h),h++)}for(m=2,l=0;l<h;l++)i=i<<1|m&1,a==c-1?(a=0,x.push(f(i)),i=0):a++,m=m>>1;for(;;)if(i=i<<1,a==c-1){x.push(f(i));break}else a++;return x.join("")},decompress:function(o){return o==null?"":o==""?null:u._decompress(o.length,32768,function(c){return o.charCodeAt(c)})},_decompress:function(o,c,f){var l=[],m,d=4,y=4,w=3,T="",_=[],b,S,h,x,i,a,p,g={val:f(0),position:c,index:1};for(b=0;b<3;b+=1)l[b]=b;for(h=0,i=Math.pow(2,2),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;switch(m=h){case 0:for(h=0,i=Math.pow(2,8),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;p=t(h);break;case 1:for(h=0,i=Math.pow(2,16),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;p=t(h);break;case 2:return""}for(l[3]=p,S=p,_.push(p);;){if(g.index>o)return"";for(h=0,i=Math.pow(2,w),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;switch(p=h){case 0:for(h=0,i=Math.pow(2,8),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;l[y++]=t(h),p=y-1,d--;break;case 1:for(h=0,i=Math.pow(2,16),a=1;a!=i;)x=g.val&g.position,g.position>>=1,g.position==0&&(g.position=c,g.val=f(g.index++)),h|=(x>0?1:0)*a,a<<=1;l[y++]=t(h),p=y-1,d--;break;case 2:return _.join("")}if(d==0&&(d=Math.pow(2,w),w++),l[p])T=l[p];else if(p===y)T=S+S.charAt(0);else return null;_.push(T),l[y++]=S+T.charAt(0),d--,S=T,d==0&&(d=Math.pow(2,w),w++)}}};return u}();typeof define=="function"&&define.amd?define(function(){return Ae}):typeof ne<"u"&&ne!=null?ne.exports=Ae:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return Ae})});var It=M((Vn,Pt)=>{"use strict";function O(t,e){typeof e=="boolean"&&(e={forever:e}),this._timeouts=t,this._options=e||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Pt.exports=O;O.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null};O.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;this._errors.push(t);var e=this._timeouts.shift();if(e===void 0)if(this._cachedTimeouts)this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),e=this._timeouts.shift();else return!1;var r=this,n=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),this._options.unref&&r._timeout.unref()),r._fn(r._attempts)},e);return this._options.unref&&n.unref(),!0};O.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._fn(this._attempts)};O.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};O.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};O.prototype.start=O.prototype.try;O.prototype.errors=function(){return this._errors};O.prototype.attempts=function(){return this._attempts};O.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],u=s.message,o=(t[u]||0)+1;t[u]=o,o>=r&&(e=s,r=o)}return e}});var Mt=M(L=>{"use strict";var Rr=It();L.operation=function(t){var e=L.timeouts(t);return new Rr(e,{forever:t&&t.forever,unref:t&&t.unref})};L.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],s=0;s<e.retries;s++)n.push(this.createTimeout(s,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(s,e)),n.sort(function(u,o){return u-o}),n};L.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*e.minTimeout*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};L.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var s=0;s<r.length;s++){var u=r[s],o=t[u];t[u]=function(){var f=L.operation(e),l=Array.prototype.slice.call(arguments),m=l.pop();l.push(function(d){f.retry(d)||(d&&(arguments[0]=f.mainError()),m.apply(this,arguments))}),f.attempt(function(){o.apply(t,l)})},t[u].options=e}}});var Lt=M((zn,Ft)=>{"use strict";Ft.exports=Mt()});var Nt=M((Jn,Ce)=>{"use strict";var Cr=Lt(),ue=class extends Error{constructor(e){super(e),e instanceof Error?(this.originalError=e,e=e.message):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};Ce.exports=(t,e)=>new Promise((r,n)=>{let s=Cr.operation(e);s.attempt(u=>{Promise.resolve(u).then(t).then(r,o=>{o instanceof ue?(s.stop(),n(o.originalError)):o instanceof TypeError?(s.stop(),n(o)):s.retry(o)||n(s.mainError())})})});Ce.exports.AbortError=ue});var qt=j(Fe()),N=j(Q());var Ne="KQ-89ASjlF5uxcGWEP1rm",qe="Uakgb_J5m9g-0JDMbcJqLJ",je="fetch_faceit_api",Ue="fetch_skin_of_the_match",Be="fetch_config",He="post_stats_event";var Y=j(Q()),De="beta.faceit.com",fe="faceit-beta",X=`https://${De}/*`,Lr=typeof window<"u"&&window.location.host===De,Gt={origins:[X]};function $e(){return Y.default.permissions.contains(Gt)}async function me(){let t=await Y.default.scripting.getRegisteredContentScripts({ids:[fe]});for(let e of t)if(e.id===fe)return!0;return!1}function ge(){return Y.default.scripting.registerContentScripts([{id:fe,runAt:"document_end",matches:[X],js:["content.js"],css:["fonts.css"]}])}var We=j(Q()),Ve=["https://www.faceit.com/*","https://api.faceit.com/*"];async function ze(){let t=await We.default.permissions.getAll();return t.origins?.indexOf(Ve[0])!==-1&&t.origins?.indexOf(Ve[1])!==-1}function Zt(t,e,r){var n=r||{},s=n.noTrailing,u=s===void 0?!1:s,o=n.noLeading,c=o===void 0?!1:o,f=n.debounceMode,l=f===void 0?void 0:f,m,d=!1,y=0;function w(){m&&clearTimeout(m)}function T(b){var S=b||{},h=S.upcomingOnly,x=h===void 0?!1:h;w(),d=!x}function _(){for(var b=arguments.length,S=new Array(b),h=0;h<b;h++)S[h]=arguments[h];var x=this,i=Date.now()-y;if(d)return;function a(){y=Date.now(),e.apply(x,S)}function p(){m=void 0}!c&&l&&!m&&a(),w(),l===void 0&&i>t?c?(y=Date.now(),u||(m=setTimeout(l?p:a,t))):a():u!==!0&&(m=setTimeout(l?p:a,l===void 0?t-i:t))}return _.cancel=T,_}function Je(t,e,r){var n=r||{},s=n.atBegin,u=s===void 0?!1:s;return Zt(t,e,{debounceMode:u!==!1})}function Ke(t){return new Proxy(t,{get(e,r){if(e[r])return typeof e[r]!="function"?new Ke(e[r]):(...n)=>new Promise((s,u)=>{e[r](...n,o=>{chrome.runtime.lastError?u(new Error(chrome.runtime.lastError.message)):s(o)})})}})}var Qt=globalThis.chrome&&new Ke(globalThis.chrome),pe=Qt;var Yt=!0;function he(t){if(!t)return!1;try{let{pathname:e}=new URL(t,location.origin);return e===location.pathname}catch{return!1}}function V(t){return globalThis.chrome?.runtime?.getManifest?.()}function I(t){let e;return()=>((!Yt||e===void 0)&&(e=t()),e)}var Xt=I(()=>["about:","http:","https:"].includes(location.protocol)),Ge=I(()=>typeof globalThis.chrome?.extension=="object"),Br=I(()=>Ge()&&Xt()),Ze=()=>er()||tr(),er=I(()=>{let t=V(2);return t&&he(t.background_page??t.background?.page)?!0:!!(t?.background?.scripts&&he("/_generated_background_page.html"))}),tr=I(()=>he(V(3)?.background?.service_worker));var Hr=I(()=>{let t=V()?.options_ui?.page;return typeof t!="string"?!1:new URL(t,location.origin).pathname===location.pathname}),Dr=I(()=>{let t=V(3)?.side_panel?.default_path;return typeof t!="string"?!1:new URL(t,location.origin).pathname===location.pathname}),$r=I(()=>{let t=Ge()&&chrome.devtools&&V()?.devtools_page;return typeof t!="string"?!1:new URL(t,location.origin).pathname===location.pathname});var rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wr=function(){function t(r){this.value=r}function e(r){var n,s;function u(f,l){return new Promise(function(m,d){var y={key:f,arg:l,resolve:m,reject:d,next:null};s?s=s.next=y:(n=s=y,o(f,l))})}function o(f,l){try{var m=r[f](l),d=m.value;d instanceof t?Promise.resolve(d.value).then(function(y){o("next",y)},function(y){o("throw",y)}):c(m.done?"return":"normal",m.value)}catch(y){c("throw",y)}}function c(f,l){switch(f){case"return":n.resolve({value:l,done:!0});break;case"throw":n.reject(l);break;default:n.resolve({value:l,done:!1});break}n=n.next,n?o(n.key,n.arg):s=null}this._invoke=u,typeof r.return!="function"&&(this.return=void 0)}return typeof Symbol=="function"&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(r){return this._invoke("next",r)},e.prototype.throw=function(r){return this._invoke("throw",r)},e.prototype.return=function(r){return this._invoke("return",r)},{wrap:function(r){return function(){return new e(r.apply(this,arguments))}},await:function(r){return new t(r)}}}(),W=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},nr=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ee=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},te=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},re=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};W(this,t),this.registeredTypes=e}return nr(t,[{key:"get",value:function(r){return typeof this.registeredTypes[r]<"u"?this.registeredTypes[r]:this.registeredTypes.default}},{key:"register",value:function(r,n){typeof this.registeredTypes[r]>"u"&&(this.registeredTypes[r]=n)}},{key:"registerDefault",value:function(r){this.register("default",r)}}]),t}(),Qe=function(t){ee(e,t);function e(r){W(this,e);var n=te(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.registerDefault(function(s){return s.getAttribute("name")||""}),n}return e}(re),sr=function(t){ee(e,t);function e(r){W(this,e);var n=te(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.registerDefault(function(s){return s.value}),n.register("checkbox",function(s){return s.getAttribute("value")!==null?s.checked?s.getAttribute("value"):null:s.checked}),n.register("select",function(s){return or(s)}),n}return e}(re);function or(t){var e,r,n,s=t.options,u=t.selectedIndex,o=t.type==="select-one",c=o?null:[],f=o?u+1:s.length;for(u<0?n=f:n=o?u:0;n<f;n++)if(r=s[n],(r.selected||n===u)&&!r.disabled&&!(r.parentNode.disabled&&r.parentNode.tagName.toLowerCase()==="optgroup")){if(e=r.value,o)return e;c.push(e)}return c}var ir=function(t){ee(e,t);function e(r){W(this,e);var n=te(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.registerDefault(function(){return!0}),n.register("radio",function(s){return s.checked}),n}return e}(re);function ar(t){var e=t.match(/[^[\]]+/g),r=void 0;return t.length>1&&t.indexOf("[]")===t.length-2&&(r=e.pop(),e.push([r])),e}function de(t){var e=void 0,r=t.tagName,n=r;return r.toLowerCase()==="input"&&(e=t.getAttribute("type"),e?n=e:n="text"),n.toLowerCase()}function Ye(t,e){return Array.prototype.filter.call(t.querySelectorAll("input,select,textarea"),function(r){if(r.tagName.toLowerCase()==="input"&&(r.type==="submit"||r.type==="reset"))return!1;var n=de(r),s=e.keyExtractors.get(n),u=s(r),o=(e.include||[]).indexOf(u)!==-1,c=(e.exclude||[]).indexOf(u)!==-1,f=!1,l=!1;if(e.ignoredTypes){var m=!0,d=!1,y=void 0;try{for(var w=e.ignoredTypes[Symbol.iterator](),T;!(m=(T=w.next()).done);m=!0){var _=T.value;r.matches(_)&&(f=!0)}}catch(b){d=!0,y=b}finally{try{!m&&w.return&&w.return()}finally{if(d)throw y}}}return o?l=!1:e.include?l=!0:l=c||f,!l})}function Xe(t,e,r){if(!e)return t;var n=e.shift();return t[n]||(t[n]=Array.isArray(n)?[]:{}),e.length===0&&(Array.isArray(t[n])?r!==null&&t[n].push(r):t[n]=r),e.length>0&&Xe(t[n],e,r),t}function et(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={};return e.keySplitter=e.keySplitter||ar,e.keyExtractors=new Qe(e.keyExtractors||{}),e.inputReaders=new sr(e.inputReaders||{}),e.keyAssignmentValidators=new ir(e.keyAssignmentValidators||{}),Array.prototype.forEach.call(Ye(t,e),function(n){var s=de(n),u=e.keyExtractors.get(s),o=u(n),c=e.inputReaders.get(s),f=c(n),l=e.keyAssignmentValidators.get(s);if(l(n,o,f)){var m=e.keySplitter(o);r=Xe(r,m,f)}}),r}var ur=function(t){ee(e,t);function e(r){W(this,e);var n=te(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.registerDefault(function(s,u){s.value=u}),n.register("checkbox",function(s,u){u===null?s.indeterminate=!0:s.checked=Array.isArray(u)?u.indexOf(s.value)!==-1:u}),n.register("radio",function(s,u){u!==void 0&&(s.checked=s.value===u.toString())}),n.register("select",lr),n}return e}(re);function cr(t){var e=[];return t!==null&&(Array.isArray(t)?e.push.apply(e,t):e.push(t)),e}function lr(t,e){for(var r,n,s=t.options,u=cr(e),o=s.length;o--;)n=s[o],u.indexOf(n.value)>-1&&(n.setAttribute("selected",!0),r=!0);r||(t.selectedIndex=-1)}function fr(t,e){return t+"["+e+"]"}function tt(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={},s=r.keyJoiner||fr;for(var u in t)if(t.hasOwnProperty(u)){var o=t[u],c={};e&&(u=s(e,u)),Array.isArray(o)?(c[u+"[]"]=o,c[u]=o):(typeof o>"u"?"undefined":rr(o))==="object"?c=tt(o,u,r):c[u]=o,Object.assign(n,c)}return n}function rt(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=tt(e,null,r);r.keyExtractors=new Qe(r.keyExtractors||{}),r.inputWriters=new ur(r.inputWriters||{}),Array.prototype.forEach.call(Ye(t,r),function(s){var u=de(s),o=r.keyExtractors.get(u),c=o(s),f=r.inputWriters.get(u),l=n[c];f(s,l)})}var gt=j(nt(),1);var ye=class{#e;#t=new AbortController;get signal(){return this.#e?this.#t.signal:(this.#e=setInterval(()=>{mr()&&(this.#t.abort(),clearInterval(this.#e))},200),this.#t.signal)}get promise(){return new Promise(e=>{this.addListener(e)})}addListener(e){if(this.signal.aborted){setTimeout(e,0);return}this.signal.addEventListener("abort",e)}},st=new ye,mr=()=>!chrome.runtime?.id;var xe="__webext-events__startup",ot=new EventTarget,it=!1,at=!1;async function gr(){if(it=!0,!at)return;let t=await chrome.storage.session.get(xe);xe in t||(await chrome.storage.session.set({[xe]:!0}),ot.dispatchEvent(new Event("extension-start")))}var Gr=Object.freeze({addListener(t){it?console.warn("onExtensionStart.addListener() was called after the extension started. The callback will not be called."):(at=!0,ot.addEventListener("extension-start",t))}});setTimeout(gr,100);var ut={types:[{accept:{"application/json":".json"}}]},ct=typeof showOpenFilePicker=="function";async function pr(){let t=document.createElement("input");t.type="file",t.accept=".json";let e=new Promise(s=>{t.addEventListener("change",s,{once:!0})});t.click();let n=(await e).target.files[0];if(!n)throw new Error("No file selected");return n.text()}async function hr(t,e){let r=`data:application/json;base64,${btoa(t)}`,n=document.createElement("a");n.download=e,n.href=r,n.click()}async function dr(){let[t]=await showOpenFilePicker(ut);return(await t.getFile()).text()}async function Ar(t,e){let n=await(await showSaveFilePicker({...ut,suggestedName:e})).createWritable();await n.write(t),await n.close()}var lt=ct?dr:pr,ft=ct?Ar:hr;var{compressToEncodedURIComponent:yr,decompressFromEncodedURIComponent:xr}=gt.default;function mt(t){throw alert(t),new Error(t)}async function _r(){return(await pe.management?.getSelf())?.installType==="development"?!0:new Promise(e=>{chrome.runtime.onInstalled.addListener(()=>{e(!0)}),setTimeout(e,500,!1)})}var _e=class{static migrations={removeUnused(e,r){for(let n of Object.keys(e))n in r||delete e[n]}};storageName;storageType;defaults;_form;_migrations;constructor({defaults:e={},storageName:r="options",migrations:n=[],logging:s=!0,storageType:u="sync"}={}){this.storageName=r,this.defaults=e,this.storageType=u,s||(this._log=()=>{}),this._migrations=this._runMigrations(n)}get storage(){return pe.storage[this.storageType]}async getAll(){return await this._migrations,this._getAll()}async setAll(e){return await this._migrations,this._setAll(e)}async set(e){return this.setAll({...await this.getAll(),...e})}async syncForm(e){this._form=e instanceof HTMLFormElement?e:document.querySelector(e),this._form.addEventListener("input",this._handleFormInput),this._form.addEventListener("submit",this._handleFormSubmit),chrome.storage.onChanged.addListener(this._handleStorageChangeOnForm),this._updateForm(this._form,await this.getAll()),this._form.querySelector(".js-export")?.addEventListener("click",this.exportToFile),this._form.querySelector(".js-import")?.addEventListener("click",this.importFromFile),st.addListener(()=>{location.reload()})}async stopSyncForm(){this._form&&(this._form.removeEventListener("input",this._handleFormInput),this._form.removeEventListener("submit",this._handleFormSubmit),this._form.querySelector(".js-export")?.addEventListener("click",this.exportToFile),this._form.querySelector(".js-import")?.addEventListener("click",this.importFromFile),chrome.storage.onChanged.removeListener(this._handleStorageChangeOnForm),delete this._form)}get _jsonIdentityHelper(){return"__webextOptionsSync"}importFromFile=async()=>{let e=await lt(),r;try{r=JSON.parse(e)}catch{mt("The file is not a valid JSON file.")}this._jsonIdentityHelper in r||mt("The file selected is not a valid recognized options file."),delete r[this._jsonIdentityHelper],await this.set(r),this._form&&this._updateForm(this._form,r)};exportToFile=async()=>{let e=chrome.runtime.getManifest(),r=JSON.stringify({[this._jsonIdentityHelper]:e.name,...await this.getAll()},null,"	");await ft(r,e.name+" options.json")};_log(e,...r){console[e](...r)}async _getAll(){let e=await this.storage.get(this.storageName);return this._decode(e[this.storageName])}async _setAll(e){this._log("log","Saving options",e),await this.storage.set({[this.storageName]:this._encode(e)})}_encode(e){let r={...e};for(let[n,s]of Object.entries(r))this.defaults[n]===s&&delete r[n];return this._log("log","Without the default values",r),yr(JSON.stringify(r))}_decode(e){let r=e;return typeof e=="string"&&(r=JSON.parse(xr(e))),{...this.defaults,...r}}async _runMigrations(e){if(e.length===0||!Ze()||!await _r())return;let r=await this._getAll(),n=JSON.stringify(r);this._log("log","Found these stored options",{...r}),this._log("info","Will run",e.length,e.length===1?"migration":" migrations");for(let s of e)await s(r,this.defaults);n!==JSON.stringify(r)&&await this._setAll(r)}_handleFormInput=Je(300,async({target:e})=>{let r=e;r.name&&(await this.set(this._parseForm(r.form)),r.form.dispatchEvent(new CustomEvent("options-sync:form-synced",{bubbles:!0})))});_handleFormSubmit(e){e.preventDefault()}_updateForm(e,r){let n=this._parseForm(e);for(let[u,o]of Object.entries(r))n[u]===o&&delete r[u];let s=Object.keys(r);s.length>0&&rt(e,r,{include:s})}_parseForm(e){let r=[];for(let n of e.querySelectorAll("[name]"))n.validity.valid&&!n.disabled&&r.push(n.name.replace(/\[.*]/,""));return et(e,{include:r})}_handleStorageChangeOnForm=(e,r)=>{r===this.storageType&&this.storageName in e&&(!document.hasFocus()||!this._form.contains(document.activeElement))&&this._updateForm(this._form,this._decode(e[this.storageName].newValue))}},be=_e;var pt={EU:["UK","Sweden","France","Germany","Netherlands"],US:["Chicago","Dallas","Denver","LosAngeles","NewYork"],Oceania:["Sydney","Melbourne"]},fn=Object.keys(pt),br=["de_ancient","de_anubis","de_dust2","de_inferno","de_mirage","de_nuke","de_overpass","de_vertigo"],ht={extensionEnabled:!0,extensionEnabledFaceitBeta:!1,headerShowElo:!0,hideFaceitClientHasLandedBanner:!0,playerProfileLevelProgress:!0,partyAutoAcceptInvite:!1,matchQueueAutoReady:!1,matchRoomShowPlayerStats:!1,matchRoomAutoCopyServerData:!1,matchRoomAutoConnectToServer:!1,matchRoomHidePlayerControls:!0,matchRoomAutoVetoLocations:!1,matchRoomAutoVetoLocationItems:pt,matchRoomAutoVetoMaps:!1,matchRoomAutoVetoMapsShuffle:!1,matchRoomAutoVetoMapsShuffleAmount:3,matchRoomAutoVetoMapItems:br,matchRoomFocusMode:!1,matchRoomLastConnectToServer:"",matchRoomSkinOfTheMatch:!0,modalCloseMatchVictory:!1,modalCloseMatchDefeat:!1,modalCloseGlobalRankingUpdate:!1,modalClickInactiveCheck:!1,notifyDisabled:!1,notifyPartyAutoAcceptInvite:!0,notifyMatchQueueAutoReady:!0,notifyMatchRoomAutoCopyServerData:!0,notifyMatchRoomAutoConnectToServer:!0,notifyMatchRoomAutoVetoLocations:!0,notifyMatchRoomAutoVetoMaps:!0,teamRosterPlayersInfo:!0,repeekNotificationClosed:!1,discordNotificationClosed:!1};var wr=new be({defaults:ht,migrations:[t=>{t.matchRoomAutoVetoMapItems?.includes("de_cache")&&(t.matchRoomAutoVetoMapItems=t.matchRoomAutoVetoMapItems.filter(e=>e!=="de_cache"),t.matchRoomAutoVetoMapItems.push("de_ancient"))},be.migrations.removeUnused]}),we=wr;var z=class extends Error{constructor(e,r,n){let s=e.status||e.status===0?e.status:"",u=e.statusText||"",o=`${s} ${u}`.trim(),c=o?`status code ${o}`:"an unknown error";super(`Request failed with ${c}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=r,this.options=n}};var D=class extends Error{constructor(e){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}};var J=t=>t!==null&&typeof t=="object";var K=(...t)=>{for(let e of t)if((!J(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return se({},...t)},ve=(t={},e={})=>{let r=new globalThis.Headers(t),n=e instanceof globalThis.Headers,s=new globalThis.Headers(e);for(let[u,o]of s.entries())n&&o==="undefined"||o===void 0?r.delete(u):r.set(u,o);return r},se=(...t)=>{let e={},r={};for(let n of t)if(Array.isArray(n))Array.isArray(e)||(e=[]),e=[...e,...n];else if(J(n)){for(let[s,u]of Object.entries(n))J(u)&&s in e&&(u=se(e[s],u)),e={...e,[s]:u};J(n.headers)&&(r=ve(r,n.headers),e.headers=r)}return e};var dt=(()=>{let t=!1,e=!1,r=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";return r&&n&&(e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")),t&&!e})(),At=typeof globalThis.AbortController=="function",yt=typeof globalThis.ReadableStream=="function",xt=typeof globalThis.FormData=="function",oe=["get","post","put","patch","head","delete"],vr=()=>{};vr();var _t={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},ie=2147483647,ae=Symbol("stop"),bt={json:!0,parseJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},wt={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0};var Tt=t=>oe.includes(t)?t.toUpperCase():t,Tr=["get","put","head","delete","options","trace"],Er=[408,413,429,500,502,503,504],Et=[413,429,503],vt={limit:2,methods:Tr,statusCodes:Er,afterStatusCodes:Et,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},St=(t={})=>{if(typeof t=="number")return{...vt,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...vt,...t,afterStatusCodes:Et}};async function Te(t,e,r,n){return new Promise((s,u)=>{let o=setTimeout(()=>{r&&r.abort(),u(new D(t))},n.timeout);n.fetch(t,e).then(s).catch(u).then(()=>{clearTimeout(o)})})}async function Ee(t,{signal:e}){return new Promise((r,n)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",s,{once:!0}));function s(){clearTimeout(u),n(e.reason)}let u=setTimeout(()=>{e?.removeEventListener("abort",s),r()},t)})}var kt=(t,e)=>{let r={};for(let n in e)!(n in wt)&&!(n in bt)&&!(n in t)&&(r[n]=e[n]);return r};var G=class t{static create(e,r){let n=new t(e,r),s=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>ie)throw new RangeError(`The \`timeout\` option cannot be greater than ${ie}`);await Promise.resolve();let c=await n._fetch();for(let f of n._options.hooks.afterResponse){let l=await f(n.request,n._options,n._decorateResponse(c.clone()));l instanceof globalThis.Response&&(c=l)}if(n._decorateResponse(c),!c.ok&&n._options.throwHttpErrors){let f=new z(c,n.request,n._options);for(let l of n._options.hooks.beforeError)f=await l(f);throw f}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!yt)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(c.clone(),n._options.onDownloadProgress)}return c},o=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(s):s();for(let[c,f]of Object.entries(_t))o[c]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||f);let m=(await o).clone();if(c==="json"){if(m.status===204||(await m.clone().arrayBuffer()).byteLength===0)return"";if(r.parseJson)return r.parseJson(await m.text())}return m[c]()};return o}constructor(e,r={}){Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e;let n=this._input instanceof Request&&"credentials"in Request.prototype?this._input.credentials:void 0;if(this._options={...n&&{credentials:n},...r,headers:ve(this._input.headers,r.headers),hooks:se({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},r.hooks),method:Tt(r.method??this._input.method),prefixUrl:String(r.prefixUrl||""),retry:St(r.retry),throwHttpErrors:r.throwHttpErrors!==!1,timeout:r.timeout??1e4,fetch:r.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(At){if(this.abortController=new globalThis.AbortController,this._options.signal){let s=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(s.reason)})}this._options.signal=this.abortController.signal}if(dt&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let u="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),o=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,u);(xt&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(o,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<=this._options.retry.limit&&!(e instanceof D)){if(e instanceof z){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;let n=e.response.headers.get("Retry-After");if(n&&this._options.retry.afterStatusCodes.includes(e.response.status)){let s=Number(n);return Number.isNaN(s)?s=Date.parse(n)-Date.now():s*=1e3,this._options.retry.maxRetryAfter!==void 0&&s>this._options.retry.maxRetryAfter?0:s}if(e.response.status===413)return 0}let r=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,r)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){let n=Math.min(this._calculateRetryDelay(r),ie);if(n!==0&&this._retryCount>0){await Ee(n,{signal:this._options.signal});for(let s of this._options.hooks.beforeRetry)if(await s({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===ae)return;return this._retry(e)}throw r}}async _fetch(){for(let r of this._options.hooks.beforeRequest){let n=await r(this.request,this._options);if(n instanceof Request){this.request=n;break}if(n instanceof Response)return n}let e=kt(this.request,this._options);return this._options.timeout===!1?this._options.fetch(this.request.clone(),e):Te(this.request.clone(),e,this.abortController,this._options)}_stream(e,r){let n=Number(e.headers.get("content-length"))||0,s=0;return e.status===204?(r&&r({percent:1,totalBytes:n,transferredBytes:s},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(u){let o=e.body.getReader();r&&r({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array);async function c(){let{done:f,value:l}=await o.read();if(f){u.close();return}if(r){s+=l.byteLength;let m=n===0?0:s/n;r({percent:m,transferredBytes:s,totalBytes:n},l)}u.enqueue(l),await c()}await c()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}};var Se=t=>{let e=(r,n)=>G.create(r,K(t,n));for(let r of oe)e[r]=(n,s)=>G.create(n,K(t,s,{method:r}));return e.create=r=>Se(K(r)),e.extend=r=>Se(K(t,r)),e.stop=ae,e},Sr=Se(),Rt=Sr;var kr="https://api.repeek.gg",ke=Rt.extend({prefixUrl:kr}),Ct=t=>ke(`vips?guid=${Array.isArray(t)?t.join("&guid="):t}`).json(),Ot=()=>ke("config").json(),Re=ke;var Oe=j(Nt()),Or="https://api.faceit.com";async function Pe(t,e){return await(await(0,Oe.default)(()=>fetch(`${Or}${t}`,e).then(s=>{if(s.status===404)throw new Oe.default.AbortError(s.statusText);if(!s.ok)throw new Error(s.statusText);return s}),{retries:3})).json()}N.default.runtime.onInstalled.addListener(async({reason:t})=>{if(t==="install"&&!await ze()){N.default.runtime.openOptionsPage();return}if(t==="update"){let{extensionEnabledFaceitBeta:e}=await we.getAll();e&&await $e()&&await me()===!1&&await ge()}});N.default.permissions.onAdded.addListener(async({origins:t})=>{if(t)for(let e of t)e===X&&await me()===!1&&(await ge(),we.set({extensionEnabledFaceitBeta:!0}))});N.default.runtime.onMessage.addListener(async t=>{if(t)switch(t.action){case Ne:{let{name:e}=N.default.runtime.getManifest();t.action=void 0,N.default.notifications.create("",{type:"basic",...t,contextMessage:e,iconUrl:"icon.png"});break}case Be:try{return await Ot()}catch(e){return console.error(e),null}case qe:try{let{guids:e}=t;return await Ct(e)}catch(e){return console.error(e),null}case je:try{let{path:e,options:r}=t;return await Pe(e,r)}catch(e){return console.error(e),null}case Ue:try{let{steamIds:e,organizerId:r,matchId:n}=t;return await Re(`v1/faceit/matches/${n}/skin-of-the-match`,{searchParams:new URLSearchParams([["organizerId",r],...e.map(u=>["steamId",u])]),timeout:(0,qt.default)("30s")}).json()}catch(e){return console.error(e),null}case He:{try{let{eventName:e,data:r}=t,n={eventName:e,data:r};if(!!0){console.log("v1/stats",n);return}Re.post("v1/stats",{json:n})}catch(e){console.error(e)}break}default:}});})();
/*! Bundled license information:

ky/distribution/index.js:
  (*! MIT License © Sindre Sorhus *)
*/
