/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={246:e=>{"use strict";e.exports=function(e){var t,n=e||navigator.userAgent,r=function(e){return-1!==e.indexOf("Windows Phone")?"Windows Phone":-1!==e.indexOf("Win")?"Windows":-1!==e.indexOf("Android")?"Android":-1!==e.indexOf("Linux")?"Linux":-1!==e.indexOf("X11")?"UNIX":/iPad|iPhone|iPod/.test(e)?"iOS":-1!==e.indexOf("Mac")?"OS X":void 0}(n),a=n.match(/(opera|coast|chrome|safari|firefox|edge|trident(?=\/))\/?\s*?(\S+)/i)||[];if(null!==(t=n.match(/\bIEMobile\/(\S+[0-9])/)))return{name:"IEMobile",version:t[1].split(".")[0],fullVersion:t[1],os:r};if(/trident/i.test(a[1]))return{name:"IE",version:(t=/\brv[ :]+(\S+[0-9])/g.exec(n)||[])[1]&&t[1].split(".")[0],fullVersion:t[1],os:r};if("Chrome"===a[1]){if(null!==(t=n.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:t[1].split(".")[0],fullVersion:t[1],os:r};if(null!==(t=n.match(/\bEdge\/(\S+)/)))return{name:"Edge",version:t[1].split(".")[0],fullVersion:t[1],os:r}}return"Coast"===(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"])[0]&&(a[0]="OperaCoast"),"Chrome"!==a[0]&&null!==(t=n.match(/version\/(\S+)/i))&&""!==t&&a.splice(1,1,t[1]),"Firefox"===a[0]&&(a[0]=/waterfox/i.test(n)?"Waterfox":a[0]),{name:a[0],version:a[1].split(".")[0],fullVersion:a[1],os:r}}},43:function(e,t,n){var r,a;!function(s,o){"use strict";r=function(){var e=function(){},t="undefined",n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(t,r){for(var a=0;a<n.length;a++){var s=n[a];this[s]=a<t?e:this.methodFactory(s,t,r)}this.log=this.debug}function s(e,n,r){return function(){typeof console!==t&&(a.call(this,n,r),this[e].apply(this,arguments))}}function o(n,a,o){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&(void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}(n)||s.apply(this,arguments)}function i(e,r,s){var i,l=this,c="loglevel";function g(){var e;if(typeof window!==t){try{e=window.localStorage[c]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}}e&&(c+=":"+e),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=s||o,l.getLevel=function(){return i},l.setLevel=function(r,s){if("string"==typeof r&&void 0!==l.levels[r.toUpperCase()]&&(r=l.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(i=r,!1!==s&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[c]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+r+";"}catch(e){}}}(r),a.call(l,r,e),typeof console===t&&r<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){g()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var u=g();null==u&&(u=null==r?"WARN":r),l.setLevel(u,!1)}var l=new i,c={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new i(e,l.getLevel(),l.methodFactory)),t};var g=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=g),l},l.getLoggers=function(){return c},l},void 0===(a=r.call(t,n,t,e))||(e.exports=a)}()},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var s,o,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))n.call(s,c)&&(i[c]=s[c]);if(t){o=t(s);for(var g=0;g<o.length;g++)r.call(s,o[g])&&(i[o[g]]=s[o[g]])}}return i}},408:(e,t,n)=>{"use strict";var r=n(418),a="function"==typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,o=a?Symbol.for("react.portal"):60106,i=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,g=a?Symbol.for("react.provider"):60109,u=a?Symbol.for("react.context"):60110,m=a?Symbol.for("react.forward_ref"):60112,d=a?Symbol.for("react.suspense"):60113,p=a?Symbol.for("react.memo"):60115,f=a?Symbol.for("react.lazy"):60116,A="function"==typeof Symbol&&Symbol.iterator;function b(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function y(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||h}function v(){}function L(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(b(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=L.prototype=new v;w.constructor=L,r(w,y.prototype),w.isPureReactComponent=!0;var C={current:null},k=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,a={},o=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!S.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),g=0;g<l;g++)c[g]=arguments[g+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:s,type:e,key:o,ref:i,props:a,_owner:C.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var E=/\/+/g,O=[];function M(e,t,n,r){if(O.length){var a=O.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function $(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function _(e,t,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case s:case o:i=!0}}if(i)return n(r,e,""===t?"."+j(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+j(a=e[l],l);i+=_(a,c,n,r)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=A&&e[A]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(a=e.next()).done;)i+=_(a=a.value,c=t+j(a,l++),n,r);else if("object"===a)throw n=""+e,Error(b(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return i}function R(e,t,n){return null==e?0:_(e,"",t,n)}function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function I(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(E,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,a){var s="";null!=n&&(s=(""+n).replace(E,"$&/")+"/"),R(e,U,t=M(t,s,r,a)),$(t)}var N={current:null};function D(){var e=N.current;if(null===e)throw Error(b(321));return e}var B={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,I,t=M(null,null,t,n)),$(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(b(143));return e}},t.Component=y,t.Fragment=i,t.Profiler=c,t.PureComponent=L,t.StrictMode=l,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null==e)throw Error(b(267,e));var a=r({},e.props),o=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(g in t)k.call(t,g)&&!S.hasOwnProperty(g)&&(a[g]=void 0===t[g]&&void 0!==c?c[g]:t[g])}var g=arguments.length-2;if(1===g)a.children=n;else if(1<g){c=Array(g);for(var u=0;u<g;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:s,type:e.type,key:o,ref:i,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:g,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:m,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="16.13.1"},294:(e,t,n)=>{"use strict";e.exports=n(408)},973:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(e){"use strict";"undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype?e.exports=(()=>{const e={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getBrowserInfo:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(e).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(e,t)=>(...n)=>{chrome.runtime.lastError?e.reject(chrome.runtime.lastError):t.singleCallbackArg||1>=n.length?e.resolve(n[0]):e.resolve(n)},r=e=>1==e?"argument":"arguments",a=(e,t,n)=>new Proxy(t,{apply:(t,r,a)=>n.call(r,e,...a)});let s=Function.call.bind(Object.prototype.hasOwnProperty);const o=(e,t={},i={})=>{let l=Object.create(null),c={has:(t,n)=>n in e||n in l,get(c,g){if(g in l)return l[g];if(g in e){let c=e[g];if("function"==typeof c)if("function"==typeof t[g])c=a(e,e[g],t[g]);else if(s(i,g)){let t=((e,t)=>function(a,...s){if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${r(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${r(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((r,o)=>{if(t.fallbackToNoCallback)try{a[e](...s,n({resolve:r,reject:o},t))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),a[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,r()}else t.noCallback?(a[e](...s),r()):a[e](...s,n({resolve:r,reject:o},t))}))})(g,i[g]);c=a(e,e[g],t)}else c=c.bind(e);else{if("object"!=typeof c||null===c||!s(t,g)&&!s(i,g))return Object.defineProperty(l,g,{configurable:!0,enumerable:!0,get:()=>e[g],set(t){e[g]=t}}),c;c=o(c,t[g],i[g])}return l[g]=c,c}},set:(t,n,r)=>(n in l?l[n]=r:e[n]=r,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(l,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(l,t)},g=Object.create(e);return new Proxy(g,c)},i=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}});let l=!1;const c=new t((e=>"function"==typeof e?function(t,n,r){let a,s,o=!1,i=new Promise((e=>{a=function(t){l||(console.warn("Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",(new Error).stack),l=!0),o=!0,e(t)}}));try{s=e(t,n,a)}catch(g){s=Promise.reject(g)}const c=!0!==s&&(e=>e&&"object"==typeof e&&"function"==typeof e.then)(s);if(!0!==s&&!c&&!o)return!1;return(g=c?s:i).then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0;var g}:e)),g=({reject:e,resolve:t},n)=>{chrome.runtime.lastError?"The message port closed before a response was received."===chrome.runtime.lastError.message?t():e(chrome.runtime.lastError):n&&n.__mozWebExtensionPolyfillReject__?e(new Error(n.message)):t(n)},u=(e,t,n,...a)=>{if(a.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${r(t.minArgs)} for ${e}(), got ${a.length}`);if(a.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${r(t.maxArgs)} for ${e}(), got ${a.length}`);return new Promise(((e,t)=>{const r=g.bind(null,{resolve:e,reject:t});a.push(r),n.sendMessage(...a)}))},m={runtime:{onMessage:i(c),onMessageExternal:i(c),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},d={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return e.privacy={network:{networkPredictionEnabled:d,webRTCIPHandlingPolicy:d},services:{passwordSavingEnabled:d},websites:{hyperlinkAuditingEnabled:d,referrersEnabled:d}},o(chrome,m,e)})():e.exports=browser})?n.apply(t,[e]):n)||(e.exports=r)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(973),t=n.n(e),r=n(43),a=n.n(r),s=n(294);const o=(e,t)=>e.name.localeCompare(t.name),i=["af","sq","am","ar","hy","az","eu","be","bn","bs","bg","ca","ceb","zh-CN","zh-TW","co","hr","cs","da","nl","en","eo","et","fi","fr","fy","gl","ka","de","el","gu","ht","ha","haw","he","hi","hmn","hu","is","ig","id","ga","it","ja","jv","kn","kk","km","rw","ko","ku","ky","lo","lv","lt","lb","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","ny","or","ps","fa","pl","pt","pa","ro","ru","sm","gd","sr","st","sn","sd","si","sk","sl","so","es","su","sw","sv","tl","tg","ta","tt","te","th","tr","tk","uk","ur","ug","uz","vi","cy","xh","yi","yo","zu"],l=["bg","cs","da","de","el","en-GB","en-US","es","et","fi","fr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-PT","pt-BR","ro","ru","sk","sl","sv","tr","uk","zh"],c=e=>{const n=("google"===e?i:l).map((e=>({value:e,name:t().i18n.getMessage("lang_"+e.replace("-","_"))})));return n.sort(o),n},g="#000000",u="#737373",m="#ffffff",d=()=>{const e=x("translationApi"),t=x("targetLang"),n=x("secondTargetLang"),r=c(e).map((e=>e.value)),a=e=>{switch(e){case"en":return"en-US";case"en-US":case"en-GB":return"en";case"zh":return"zh-CN";case"zh-CN":case"zh-TW":return"zh";case"pt":return"pt-PT";case"pt-PT":case"pt-BR":return"pt";default:return r[0]}};r.includes(t)||h("targetLang",a(t)),r.includes(n)||h("secondTargetLang",a(n))},p=(()=>{const e=t().i18n.getUILanguage(),n=c("google").some((t=>t.value==e))?e:"en";return{targetLang:n,secondTargetLang:"en"===n?"ja":"en"}})(),f=[{category:"generalLabel",elements:[{id:"translationApi",title:"translationApiLabel",captions:[],type:"none",default:"google",childElements:[{id:"translationApi",title:"googleApiLabel",captions:["googleApiCaptionLabel"],type:"radio",value:"google",handleChange:()=>d()},{id:"translationApi",title:"deeplApiLabel",captions:["deeplApiCaptionLabel"],extraCaption:s.createElement("p",{className:"caption"},s.createElement("a",{href:"https://github.com/sienori/simple-translate/wiki/How-to-register-DeepL-API",target:"_blank"},t().i18n.getMessage("howToUseDeeplLabel"))),type:"radio",value:"deepl",handleChange:()=>d()},{id:"deeplPlan",title:"deeplPlanLabel",captions:["deeplPlanCaptionLabel"],type:"select",default:"deeplFree",shouldShow:()=>"deepl"===x("translationApi"),hr:!0,options:[{name:"deeplFreeLabel",value:"deeplFree"},{name:"deeplProLabel",value:"deeplPro"}]},{id:"deeplAuthKey",title:"deeplAuthKeyLabel",captions:["deeplAuthKeyCaptionLabel"],type:"text",default:"",placeholder:"00000000-0000-0000-0000-00000000000000:fx",shouldShow:()=>"deepl"===x("translationApi")}]},{id:"targetLang",title:"targetLangLabel",captions:["targetLangCaptionLabel"],type:"select",default:p.targetLang,options:()=>c(x("translationApi")),useRawOptionName:!0},{id:"secondTargetLang",title:"secondTargetLangLabel",captions:["secondTargetLangCaptionLabel"],type:"select",default:p.secondTargetLang,options:()=>c(x("translationApi")),useRawOptionName:!0},{id:"ifShowCandidate",title:"ifShowCandidateLabel",captions:["ifShowCandidateCaptionLabel"],type:"checkbox",default:!0,shouldShow:()=>"google"===x("translationApi")}]},{category:"webPageLabel",elements:[{id:"whenSelectText",title:"whenSelectTextLabel",captions:[],type:"none",default:"showButton",childElements:[{id:"whenSelectText",title:"ifShowButtonLabel",captions:["ifShowButtonCaptionLabel"],type:"radio",value:"showButton"},{id:"whenSelectText",title:"ifAutoTranslateLabel",captions:["ifAutoTranslateCaptionLabel"],type:"radio",value:"showPanel"},{id:"whenSelectText",title:"dontShowButtonLabel",captions:["dontShowButtonCaptionLabel"],type:"radio",value:"dontShowButton"},{id:"ifCheckLang",title:"ifCheckLangLabel",captions:["ifCheckLangCaptionLabel"],type:"checkbox",default:!0,hr:!0}]},{id:"ifOnlyTranslateWhenModifierKeyPressed",title:"ifOnlyTranslateWhenModifierKeyPressedLabel",captions:["ifOnlyTranslateWhenModifierKeyPressedCaptionLabel"],type:"checkbox",default:!1,childElements:[{id:"modifierKey",title:"modifierKeyLabel",captions:[],type:"select",default:"shift",options:[{name:"shiftLabel",value:"shift"},{name:"ctrlLabel",value:"ctrl"},{name:"altLabel",value:"alt"},{name:"cmdLabel",value:"cmd"}]}]},{id:"ifChangeSecondLangOnPage",title:"ifChangeSecondLangLabel",captions:["ifChangeSecondLangOnPageCaptionLabel"],type:"checkbox",default:!1},{title:"disableTranslationLabel",captions:[],type:"none",childElements:[{id:"isDisabledInTextFields",title:"isDisabledInTextFieldsLabel",captions:["isDisabledInTextFieldsCaptionLabel"],type:"checkbox",default:!1},{id:"isDisabledInCodeElement",title:"isDisabledInCodeElementLabel",captions:["isDisabledInCodeElementCaptionLabel"],type:"checkbox",default:!1},{id:"ignoredDocumentLang",title:"ignoredDocumentLangLabel",captions:["ignoredDocumentLangCaptionLabel"],type:"text",default:"",placeholder:"en, ru, zh"},{id:"disableUrlList",title:"disableUrlListLabel",captions:["disableUrlListCaptionLabel"],type:"textarea",default:"",placeholder:"https://example.com/*\nhttps://example.net/*"}]}]},{category:"toolbarLabel",elements:[{id:"waitTime",title:"waitTimeLabel",captions:["waitTimeCaptionLabel","waitTime2CaptionLabel"],type:"number",min:0,placeholder:500,default:500},{id:"ifChangeSecondLang",title:"ifChangeSecondLangLabel",captions:["ifChangeSecondLangCaptionLabel"],type:"checkbox",default:!0}]},{category:"menuLabel",elements:[{id:"ifShowMenu",title:"ifShowMenuLabel",captions:["ifShowMenuCaptionLabel"],type:"checkbox",default:!0}]},{category:"pageTranslationLabel",elements:[{id:"pageTranslationOpenTo",title:"pageTranslationOpenToLabel",captions:["pageTranslationOpenToCaptionLabel"],type:"select",default:"newTab",options:[{name:"newTabLabel",value:"newTab"},{name:"currentTabLabel",value:"currentTab"}]}]},{category:"styleLabel",elements:[{id:"theme",title:"themeLabel",captions:["themeCaptionLabel"],type:"select",default:"system",options:[{name:"lightLabel",value:"light"},{name:"darkLabel",value:"dark"},{name:"systemLabel",value:"system"}]},{title:"buttonStyleLabel",captions:["buttonStyleCaptionLabel"],type:"none",childElements:[{id:"buttonSize",title:"buttonSizeLabel",captions:[],type:"number",min:1,placeholder:22,default:22},{id:"buttonDirection",title:"displayDirectionLabel",captions:[],type:"select",default:"bottomRight",options:[{name:"topLabel",value:"top"},{name:"bottomLabel",value:"bottom"},{name:"rightLabel",value:"right"},{name:"leftLabel",value:"left"},{name:"topRightLabel",value:"topRight"},{name:"topLeftLabel",value:"topLeft"},{name:"bottomRightLabel",value:"bottomRight"},{name:"bottomLeftLabel",value:"bottomLeft"}]},{id:"buttonOffset",title:"positionOffsetLabel",captions:[],type:"number",default:10,placeholder:10}]},{title:"panelStyleLabel",captions:["panelStyleCaptionLabel"],type:"none",childElements:[{id:"width",title:"widthLabel",captions:[],type:"number",min:1,placeholder:300,default:300},{id:"height",title:"heightLabel",captions:[],type:"number",min:1,placeholder:200,default:200},{id:"fontSize",title:"fontSizeLabel",captions:[],type:"number",min:1,placeholder:13,default:13},{id:"panelReferencePoint",title:"referencePointLabel",captions:[],type:"select",default:"bottomSelectedText",options:[{name:"topSelectedTextLabel",value:"topSelectedText"},{name:"bottomSelectedTextLabel",value:"bottomSelectedText"},{name:"clickedPointLabel",value:"clickedPoint"}]},{id:"panelDirection",title:"displayDirectionLabel",captions:[],type:"select",default:"bottom",options:[{name:"topLabel",value:"top"},{name:"bottomLabel",value:"bottom"},{name:"rightLabel",value:"right"},{name:"leftLabel",value:"left"},{name:"topRightLabel",value:"topRight"},{name:"topLeftLabel",value:"topLeft"},{name:"bottomRightLabel",value:"bottomRight"},{name:"bottomLeftLabel",value:"bottomLeft"}]},{id:"panelOffset",title:"positionOffsetLabel",captions:[],type:"number",default:10,placeholder:10},{id:"isOverrideColors",title:"isOverrideColorsLabel",captions:[],type:"checkbox",default:!1},{id:"resultFontColor",title:"resultFontColorLabel",captions:[],type:"color",default:g},{id:"candidateFontColor",title:"candidateFontColorLabel",captions:[],type:"color",default:u},{id:"bgColor",title:"bgColorLabel",captions:[],type:"color",default:m}]}]},{category:"otherLabel",elements:[{id:"isShowOptionsPageWhenUpdated",title:"isShowOptionsPageWhenUpdatedLabel",captions:["isShowOptionsPageWhenUpdatedCaptionLabel"],type:"checkbox",default:!0},{id:"isDebugMode",title:"isDebugModeLabel",captions:["isDebugModeCaptionLabel"],type:"checkbox",default:!1}]}];let A={};const b=async()=>{const e=await t().storage.local.get("Settings");A=e.Settings||{};let n=!1;const r=e=>{null!=e.id&&null!=e.default&&null==A[e.id]&&(A[e.id]=e.default,n=!0)};f.forEach((e=>{e.elements.forEach((e=>{r(e),e.childElements&&e.childElements.forEach((e=>{r(e)}))}))})),n&&await t().storage.local.set({Settings:A})},h=async(e,n)=>{a().info("settings/settings","setSettings()",e,n),A[e]=n,await t().storage.local.set({Settings:A})},x=e=>A[e];let y=!1;const v=()=>{x("isDebugMode")?a().enableAll(!1):a().disableAll(!1)};var L=n(246),w=n.n(L);const C=JSON.parse('{"CN":{"_execute_action":{"description":"__MSG_openPopupDescription__","suggested_key":{"default":"Ctrl+Shift+Space"}},"translateSelectedText":{"description":"__MSG_translateTextMenu__","suggested_key":{"default":"Ctrl+Space"}},"translatePage":{"description":"__MSG_translatePageMenu__"}}}'),k=e=>{const t=C.CN[e].suggested_key||null;if(!t)return null;switch(w()().os){case"Windows":return t.windows||t.default;case"OS X":return t.mac||t.default;case"Linux":return t.linux||t.default;case"Android":return t.android||t.default;case"iOS":return t.ios||t.default;default:return t.default||null}},S="background/keyboardShortcuts",T=()=>{x("ifShowMenu")?(P(),"Firefox"===w()().name&&w()().version>=53&&t().contextMenus.create({id:"translatePageOnTab",title:t().i18n.getMessage("translatePageMenu"),contexts:["tab"]}),t().contextMenus.create({id:"translatePage",title:t().i18n.getMessage("translatePageMenu"),contexts:["all"],visible:!0}),t().contextMenus.create({id:"translateText",title:t().i18n.getMessage("translateTextMenu"),contexts:["selection"]}),t().contextMenus.create({id:"translateLink",title:t().i18n.getMessage("translateLinkMenu"),contexts:["link"]})):P()};function P(){t().contextMenus.removeAll()}const E="common/translate";var O;t().runtime.onInstalled.addListener((async e=>{"install"!=e.reason&&"update"!=e.reason||(a().info("background/onInstalledListener","onInstalledListener()",e),await b(),(async()=>{if(!("Firefox"==w()().name&&w()().version>=60))return;a().info(S,"initShortcuts()");let e=x("initedShortcuts")||[];const n=C.CN;for(const r of Object.keys(n))if(!e.includes(r))try{await t().commands.update({name:r,shortcut:k(r)}),e.push(r)}catch(e){a().error(S,"initShortcuts()",e)}h("initedShortcuts",e)})(),x("isShowOptionsPageWhenUpdated")&&(!1,t().tabs.create({url:"options/index.html#information?action=updated",active:false})),"update"==e.reason&&e.previousVersion.replaceAll(".","")<280&&(x("resultFontColor")!==g&&"#e6e6e6"!==x("resultFontColor")||x("candidateFontColor")!==u&&"#aaaaaa"!==x("candidateFontColor")||x("bgColor")!==m&&"#181818"!==x("bgColor"))&&h("isOverrideColors",!0))})),t().commands.onCommand.addListener((async e=>{switch(a().log(S,"onCommandListener()",e),await b(),e){case"translateSelectedText":(async()=>{const e=(await t().tabs.query({active:!0,currentWindow:!0}))[0];t().tabs.sendMessage(e.id,{message:"translateSelectedText"})})();break;case"translatePage":(async()=>{const e=(await t().tabs.query({active:!0,currentWindow:!0}))[0],n=await t().tabs.sendMessage(e.id,{message:"getTabUrl"}),r=x("targetLang");(async(e,n=!1)=>{const r=(await t().tabs.query({currentWindow:!0,active:!0}))[0];n?t().tabs.update({url:e}):t().tabs.create({url:e,index:r.index+1})})(`https://translate.google.com/translate?hl=${r}&tl=${r}&sl=auto&u=${encodeURIComponent(n)}`,"currentTab"===x("pageTranslationOpenTo"))})()}})),t().runtime.onMessage.addListener((async e=>{if(await b(),"translate"===e.message)return await(async(e,n="auto",r)=>{if(a().log(E,"tranlate()",e,r),""===(e=e.trim()))return{resultText:"",candidateText:"",sourceLanguage:"en",percentage:0,statusText:"OK"};const s=x("translationApi"),o=await(async(e,n,r,a)=>{var s;return null!==(s=(await t().storage.session.get(`${n}-${r}-${a}-${e}`))[`${n}-${r}-${a}-${e}`])&&void 0!==s&&s})(e,n,r,s);if(o)return o;const i="google"===s?await(async(e,n,r)=>{const s=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${n}&tl=${r}&dt=t&dt=bd&dj=1&q=${encodeURIComponent(e)}`,o=await fetch(s).catch((e=>({status:0,statusText:""}))),i={resultText:"",candidateText:"",sourceLanguage:"",percentage:0,isError:!1,errorMessage:""};if(200!==o.status)return i.isError=!0,0===o.status?i.errorMessage=t().i18n.getMessage("networkError"):429===o.status||503===o.status?i.errorMessage=t().i18n.getMessage("unavailableError"):i.errorMessage=`${t().i18n.getMessage("unknownError")} [${o.status} ${o.statusText}]`,a().error(E,"sendRequest()",o),i;const l=await o.json();return i.sourceLanguage=l.src,i.percentage=l.ld_result.srclangs_confidences[0],i.resultText=l.sentences.map((e=>e.trans)).join(""),l.dict&&(i.candidateText=l.dict.map((e=>`${e.pos}${""!=e.pos?": ":""}${void 0!==e.terms?e.terms.join(", "):""}\n`)).join("")),a().log(E,"sendRequest()",i),i})(e,n,r):await(async(e,n,r)=>{let s=new URLSearchParams;const o=x("deeplAuthKey");s.append("auth_key",o),s.append("text",e),s.append("target_lang",r);const i="deeplFree"===x("deeplPlan")?"https://api-free.deepl.com/v2/translate":"https://api.deepl.com/v2/translate",l=await fetch(i,{method:"POST",body:s}).catch((e=>({status:0,statusText:""}))),c={resultText:"",candidateText:"",sourceLanguage:"",percentage:0,isError:!1,errorMessage:""};if(200!==l.status)return c.isError=!0,0===l.status?c.errorMessage=t().i18n.getMessage("networkError"):403===l.status?c.errorMessage=t().i18n.getMessage("deeplAuthError"):c.errorMessage=`${t().i18n.getMessage("unknownError")} [${l.status} ${l.statusText}]`,a().error(E,"sendRequestToDeepL()",l),c;const g=await l.json();return c.resultText=g.translations[0].text,c.sourceLanguage=g.translations[0].detected_source_language.toLowerCase(),c.percentage=1,a().log(E,"sendRequestToDeepL()",c),c})(e,0,r);return(async(e,n,r,a,s)=>{s.isError||await t().storage.session.set({[`${n}-${r}-${a}-${e}`]:s})})(e,n,r,s,i),i})(e.text,e.sourceLang,e.targetLang)})),t().storage.local.onChanged.addListener((e=>{(e=>{Object.keys(e).includes("Settings")&&(A=e.Settings.newValue)})(e),v(),T()})),null!==(O=t().contextMenus)&&void 0!==O&&O.onShown&&t().contextMenus.onShown.addListener(((e,n)=>{e.contexts.includes("selection")||e.contexts.includes("link")?t().contextMenus.update("translatePage",{visible:!1}):t().contextMenus.update("translatePage",{visible:!0}),t().contextMenus.refresh()})),t().contextMenus.onClicked.addListener(((e,n)=>{switch(a().log("background/menus","onMenusClickedListener()",e,n),e.menuItemId){case"translatePage":case"translatePageOnTab":!function(e,n){const r=x("targetLang"),a=`https://translate.google.com/translate?hl=${r}&tl=${r}&sl=auto&u=${encodeURIComponent(e.pageUrl)}`;"currentTab"===x("pageTranslationOpenTo")?t().tabs.update(n.id,{url:a}):t().tabs.create({url:a,active:!0,index:n.index+1})}(e,n);break;case"translateText":!function(e){t().tabs.sendMessage(e.id,{message:"translateSelectedText"})}(n);break;case"translateLink":!function(e,n){const r=x("targetLang"),a=`https://translate.google.com/translate?hl=${r}&tl=${r}&sl=auto&u=${encodeURIComponent(e.linkUrl)}`;t().tabs.create({url:a,active:!0,index:n.index+1})}(e,n)}})),(async()=>{await b(),(()=>{if(y)return;y=!0;const e=a().methodFactory;a().methodFactory=(t,n,r)=>{const a=e(t,n,r);return(e,...n)=>{a(`[${t}]`,`${e}:`,...n)}}})(),v(),a().info("background/background","init()"),T()})()})()})();