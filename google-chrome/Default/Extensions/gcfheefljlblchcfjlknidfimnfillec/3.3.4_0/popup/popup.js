import{_ as m}from"../common/plugin-vue_export-helper.js";import{m as _,a as k,o as n,c as i,b as t,n as r,F as C,d as V,t as v,e as h,r as T,f as O,g as f,h as p,i as g,j as E,k as P}from"../common/vendor.js";/* empty css      */import{s as S}from"../common/store.js";const $={name:"Cover",computed:{..._(["track","isActive"]),noCover(){return!this.track.cover},resizedCover(){return this.track.cover?this.track.cover.replace("%%","300x300"):"/assets/playlist-cover_no_cover3.png"}},methods:{...k({openTab:"BG_OPEN_TAB"})}},D={key:0,class:"cover"},A=["src"],M={key:1,class:"covered"};function B(s,o,u,a,d,e){return s.isActive?(n(),i("div",D,[t("img",{class:r({"no-cover":e.noCover}),src:e.resizedCover,alt:""},null,10,A)])):(n(),i("div",M,[t("div",{class:"covered__link",onClick:o[0]||(o[0]=(...l)=>s.openTab&&s.openTab(...l))},"открыть вкладку")]))}const U=m($,[["render",B]]),L={name:"TrackInfo",computed:{..._(["track","isEmptyPlaylist","isActive"])},methods:{...k({openUrl:"CS_URL"})}},W={key:0,class:"song"},I={key:0,class:"song__version"},N={class:"song__artist"},F=["onClick"],R=t("div",{class:"song__title song__title--disabled"},"Плейлист",-1),w=t("div",{class:"song__artist song__artist--disabled"},[t("div",{class:"song__artist-link"},"пуст")],-1);function H(s,o,u,a,d,e){return s.isActive?(n(),i("div",W,[!s.isEmptyPlaylist&&s.isActive?(n(),i(C,{key:0},[t("div",{class:"song__title",onClick:o[0]||(o[0]=l=>s.openUrl(s.track.link))},[V(v(s.track.title)+" ",1),s.track.version?(n(),i("span",I,v(s.track.version),1)):h("",!0)]),t("div",N,[(n(!0),i(C,null,T(s.track.artists,l=>(n(),i("div",{key:l.link,class:"song__artist-link",onClick:c=>s.openUrl(l.link)},v(l.title),9,F))),128))])],64)):(n(),i(C,{key:1},[R,w],64))])):h("",!0)}const z=m(L,[["render",H]]),G={name:"Volume",data(){return{isVolumeDragging:!1}},computed:{..._(["volume"]),volumeFilledHeight(){return`${this.volume*100}%`}},methods:{...k({controlsVolumeToggle:"CS_VOLUME_TOGGLE",controlsVolumeUp:"CS_VOLUME_UP",controlsVolumeDown:"CS_VOLUME_DOWN",controlsVolume:"CS_VOLUME"}),volumeToggle(){this.controlsVolumeToggle()},volumeTrackValue(s){const o=Math.max(Math.min(1-(s.y-65)/150,1),0);this.controlsVolume(o)},volumeOnClick(s){this.volumeTrackValue(s)},volumeOnWheel(s){s.deltaY<0?this.volume<1&&this.controlsVolumeUp():this.volume>0&&this.controlsVolumeDown()},volumeOnDrag(s){this.isVolumeDragging&&this.volumeTrackValueThrottled(s)},volumeOnDragStart(){this.isVolumeDragging=!0},volumeOnDragEnd(){this.isVolumeDragging=!1}},created(){this.volumeTrackValueThrottled=O(this.volumeTrackValue,25)}},j=t("span",{class:"volume__button_icon"},null,-1),K=[j],Y=t("div",{class:"volume__holder"},null,-1),X={class:"volume__slider"},q={class:"volume__track"};function J(s,o,u,a,d,e){return n(),i("div",{class:r({volume:!0,"volume--half":s.volume<.45&&s.volume>0,"volume--mute":s.volume===0}),onWheel:o[6]||(o[6]=(...l)=>e.volumeOnWheel&&e.volumeOnWheel(...l))},[t("div",{class:"volume__button",onClick:o[0]||(o[0]=(...l)=>e.volumeToggle&&e.volumeToggle(...l))},K),Y,t("div",{class:"volume__bar",onClick:o[2]||(o[2]=(...l)=>e.volumeOnClick&&e.volumeOnClick(...l)),onMouseleave:o[3]||(o[3]=(...l)=>e.volumeOnDragEnd&&e.volumeOnDragEnd(...l)),onMouseup:o[4]||(o[4]=(...l)=>e.volumeOnDragEnd&&e.volumeOnDragEnd(...l)),onMousemove:o[5]||(o[5]=(...l)=>e.volumeOnDrag&&e.volumeOnDrag(...l))},[t("div",X,[t("div",q,[t("div",{class:"volume__track_filled",style:f({height:e.volumeFilledHeight})},[t("button",{class:"volume__drag",tabindex:"-1",onMousedown:o[1]||(o[1]=(...l)=>e.volumeOnDragStart&&e.volumeOnDragStart(...l))},null,32)],4)])])],32)],34)}const Q=m(G,[["render",J]]),Z={name:"Progress",computed:{..._(["isEmptyPlaylist","isActive","progress"]),loadedWidth(){return`${this.progress.duration>0?100*this.progress.loaded/this.progress.duration:0}%`},playedWidth(){return`${this.progress.duration>0?100*this.progress.position/this.progress.duration:0}%`}},methods:{...k({controlsPosition:"CS_POSITION"}),onProgressClickHandler(s){const o=Math.ceil(this.progress.duration*s.x/s.view.innerWidth);this.controlsPosition(o)},humanReadableTime(s){const o=c=>c<10?`0${c}`:c,u=[];let a=Math.round(s);const d=Math.floor(a/3600);a-=d*3600;const e=Math.floor(a/60);a-=e*60;const l=a;return d>0&&u.push(o(d)),u.push(d>0?o(e):e),u.push(o(l)),u.join(":")}}},x={class:"progress__position"},ss={class:"progress__duration"},os=t("div",{class:"progress__bar"},null,-1);function es(s,o,u,a,d,e){return s.isActive?(n(),i("div",{key:0,class:r(["progress",{"progress--disabled":s.isEmptyPlaylist}]),onClick:o[0]||(o[0]=(...l)=>e.onProgressClickHandler&&e.onProgressClickHandler(...l))},[t("div",x,v(e.humanReadableTime(s.progress.position)),1),t("div",ss,v(e.humanReadableTime(s.progress.duration)),1),t("div",{class:"progress__played",style:f({width:e.playedWidth})},null,4),t("div",{class:"progress__loaded",style:f({width:e.loadedWidth})},null,4),os],2)):h("",!0)}const ts=m(Z,[["render",es]]),ls=s=>s.charAt(0).toUpperCase()+s.slice(1),ns={name:"Controls",components:{Progress:ts,Volume:Q},computed:{..._(["isActive","isPlaying","track","controls"])},methods:{...k({controlsPlay:"CS_PLAY",controlsShuffle:"CS_SHUFFLE",controlsRepeat:"CS_REPEAT",controlsNext:"CS_NEXT",controlsPrev:"CS_PREV",controlsLike:"CS_LIKE",controlsDislike:"CS_DISLIKE"}),actionButtonClick(s){this.controls.states[s]!==null&&this[`controls${ls(s)}`]()}}},rs={class:"controls-additional"};function is(s,o,u,a,d,e){const l=p("Progress"),c=p("Volume");return n(),i("div",null,[g(l),s.isActive?(n(),E(c,{key:0})):h("",!0),t("div",{class:r(["controls",{is_paused:!s.isPlaying}])},[t("div",{class:r({controls__button:!0,like:!0,is_liked:s.track.liked,"controls__button--disabled":s.controls.states.like===!1,"controls__button--hidden":s.controls.states.like===null}),onClick:o[0]||(o[0]=()=>e.actionButtonClick("like"))},null,2),t("div",{class:r({controls__button:!0,prev:!0,"controls__button--disabled":s.controls.states.prev===!1,"controls__button--hidden":s.controls.states.prev===null}),onClick:o[1]||(o[1]=()=>e.actionButtonClick("prev"))},null,2),t("div",{class:r({controls__button:!0,play:!0,"controls__button--hidden":s.controls.states.play===null}),onClick:o[2]||(o[2]=()=>e.actionButtonClick("play"))},null,2),t("div",{class:r({controls__button:!0,next:!0,"controls__button--disabled":s.controls.states.next===!1,"controls__button--hidden":s.controls.states.next===null}),onClick:o[3]||(o[3]=()=>e.actionButtonClick("next"))},null,2),t("div",{class:r({controls__button:!0,dislike:!0,is_disliked:s.track.disliked,"controls__button--disabled":s.controls.states.dislike===!1,"controls__button--hidden":s.controls.states.dislike===null}),onClick:o[4]||(o[4]=()=>e.actionButtonClick("dislike"))},null,2)],2),t("div",rs,[t("div",{class:r({"controls-additional__button":!0,shuffle:!0,is_shuffled:s.controls.shuffle,"controls-additional__button--hidden":s.controls.states.shuffle===null}),onClick:o[5]||(o[5]=()=>e.actionButtonClick("shuffle"))},null,2),t("div",{class:r({"controls-additional__button":!0,repeat:!0,is_repeat_all:s.controls.repeat===!0,is_repeat_one:s.controls.repeat===1,"controls-additional__button--hidden":s.controls.states.repeat===null}),onClick:o[6]||(o[6]=()=>e.actionButtonClick("repeat"))},null,2)])])}const as=m(ns,[["render",is]]),us={components:{Controls:as,TrackInfo:z,Cover:U},computed:{..._(["settings"]),appClasses(){var s;return{app:!0,[`app--${((s=this.settings)==null?void 0:s.theme)??"light"}`]:!0}}}};function ds(s,o,u,a,d,e){const l=p("Cover"),c=p("TrackInfo"),y=p("Controls");return n(),i("div",{class:r(e.appClasses)},[g(l),g(c),g(y)],2)}const cs=m(us,[["render",ds]]),b=P(cs);b.use(S);b.mount("#app");
