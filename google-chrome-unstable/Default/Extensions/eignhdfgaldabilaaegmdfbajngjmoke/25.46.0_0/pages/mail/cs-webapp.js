"use strict";!function(){var t,s=window,l=s.location,c=document,e="undefined"!=typeof chrome&&chrome||{},d=e.runtime.getURL("PATH/").replace("/PATH/",""),m=d.startsWith("safari-web-extension://"),u=!m&&d.startsWith("moz-extension://"),a="undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&void 0===String.quote,i=a?"Enter":13;function f(e){return 1===e.button||e[t||(e=/^Mac|^iP/.test(navigator.platform),t=e?"metaKey":"ctrlKey")]}function p(e,t,n){s.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},d)}function h(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var n=e;n;){if(n.tagName===t)return n;n=n.parentNode}return null}function n(n){c.addEventListener("click",n,!0),c.addEventListener("auxclick",function(e){1===e.button&&n(e)},!0),c.addEventListener("keyup",function(e){var t;t=e,(a&&t.key||t.which||t.keyCode)===i&&n(e)},!0)}function v(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}var r,o,g,y=/^Mac|^iP/.test(navigator.platform)?"metaKey":"ctrlKey",b='[role="listitem"][id^="th_"]',_='[role="listitem"][id^="th_"] > div[role="button"]',S=!1;function E(e){e=(e.split("mail/mu/mp/")[1]||"").split("/")[0];e&&p("mailSessionId",e)}function O(e,t){e=c.querySelectorAll(e);e[t=-1===t?e.length-1:t].click()}function k(e){for(var t=e+"/lb_data",n="sp/chrome/"+t,a=Object.keys(s.localStorage),i=0;i<a.length;i++){var r=a[i];if(r.endsWith(t)){n=r;break}}var o,e=s.localStorage[n];e&&(e=JSON.parse(e),o=function(e){for(var t={colorKey:"bgColor",idKey:"Y",mainKey:"wa",nameKey:"name",unreadKey:"T"},n={},a=0;a<e.length;a++){for(var i=e[a],r=Object.keys(i),o=void 0,s=void 0,l=0;l<r.length;l++){var c=r[l],d=i[c],m=d&&"object"==typeof d&&Object.keys(d);if(m&&4<m.length){t.mainKey=c;for(var u=d.name,f=0;f<m.length;f++){var p=m[f];"name"!==p&&"string"==typeof p&&d[p]===u&&(t.idKey=p)}}else"number"==typeof d&&(!o||d<=s)&&(o=c,s=d)}n[o]?n[o]+=1:n[o]=1}for(var h=Object.keys(n),v="T",g=0;g<h.length;g++){var y=h[g];0<n[y]&&(v=y)}return t.unreadKey=v,t}(e),p("mailCachedLabels",e.map(function(e){var t={},e=(t.unreadCount=e[o.unreadKey],e[o.mainKey]),e=(t.name=e[o.nameKey],t.id=e[o.idKey],e[o.colorKey]);return e&&(t.color={backgroundColor:e}),t})))}function C(){var e=(c.head.textContent.split('USER_EMAIL = "')[1]||"").split('"')[0]||(c.cookie.split("GAUSR=")[1]||"").split(";")||(Object.keys(s.localStorage).join("").split("pref/")[1]||"").split("/")[0];if(e){var t,n=e;if(s.openDatabase){try{t=s.openDatabase(n,"","",0)}catch(e){return void k(n)}t.transaction(function(e){e.executeSql("SELECT labelId,unreadCount,metadata FROM cached_labels",[],function(e,t){for(var n=[],a=0;a<t.rows.length;a++){var i=t.rows[a],r={id:i.labelId,unreadCount:i.unreadCount},i=i.metadata.startsWith("[")&&JSON.parse(i.metadata),o=i[2],i=i[4];"string"==typeof o&&(r.name=o),"string"==typeof i&&(r.color={backgroundColor:i}),n.push(r)}p("mailCachedLabels",n)},function(){k(n)})})}else k(n)}}function L(){var s=l.search;n(function(e){var t,n,a,i,r,o=(o=(o=e).target).matches(b)?o:o.matches(_)?o.parentNode:null;o?(r=e,(o=(o=o).id.replace("th_",""))&&(t=r.shiftKey,(i=r[y]||1===r.button)||t)&&(p("mailOpenThreadInNew",[o,t,i]),r.stopPropagation(),r.preventDefault())):(o=s,i=h((t=e).target),(r=i&&i.href)&&(e=i.origin===l.origin,n=t.shiftKey,(a=f(t))||n||"_blank"===i.target||!e?(p("bmCstOpenUrl",[r,n,a]),t.stopPropagation(),t.preventDefault()):(v(i),o&&-1===(e=i.search).indexOf("bm_cst=")&&(i.search=o+e.replace("?","&")))))})}function A(){var e=l.href;E(e),p("mailPageUrl",e),C(),setTimeout(C,1e3),setTimeout(C,5e3),L()}!function e(){var t;l.hash.startsWith("#tl")&&(t=(t=c.querySelector('div[style*="translate3d"] > div:first-child'))&&"none"!==t.style.display,S!==t)&&p("mailSelectionState",S=t),setTimeout(e,100)}(),e=function(e,t,n){return"https://mail.google.com"===e&&-1!==l.pathname.indexOf("/mu/")&&-1!==n.indexOf("mui=bm_mail")},r=function(){e=c,o=Date.now(),i=l,e=e.cookie,t=(i.search.split("mui=")[1]||"").split("&")[0],n=!1,-1===(a=e).indexOf("GMAIL_AT=")&&(a+="; GMAIL_AT="+t,n=!0),-1===e.indexOf("WML=")&&(t=(t+"__").split("__")[1].split("_")[0]||"0",i=(i.pathname.split("/mp/")[1]||"").split("/")[0],a+="; WML="+o+"#"+s.USER_EMAIL+":"+i+":"+t,n=!0),e.startsWith("SID=")||-1!==e.indexOf(" SID=")||(a+="; SID=1",n=!0),n&&(c.cookie=a),function(e){var t=c.createElement("script");if(m){var n=btoa(e);if(c.querySelector('script[data-bm-cs="'+n+'"]'))return;t.dataset.bmCs=n}t.textContent=e,(n=c.documentElement).insertBefore(t,n.firstChild)}('"use strict";!function(){var n=window,t=n.location,e=document,o="WML=",r="SID=",i="cookie",s=e,a=Date.now(),c=t,p=s[i],l=(c.search.split("mui=")[1]||"").split("&")[0];n.top!==n.self&&("object"!=typeof(t=t.ancestorOrigins)||1===t.length&&-1!==t[0].indexOf("extension://"))&&Object.defineProperty(s,i,{get:function(){var t,e,i=p;return-1===p.indexOf("GMAIL_AT=")&&(i+="; GMAIL_AT="+s.documentElement.dataset.mailAt),-1===p.indexOf(o)&&(t=(l+"__").split("__")[2].split("_")[0]||"0",e=(c.pathname.split("/mp/")[1]||"").split("/")[0],i+="; "+o+a+"#"+n.USER_EMAIL+":"+e+":"+t),p.startsWith(r)||-1!==p.indexOf(" "+r)||(i+="; SID=1"),i}}),(i=e.currentScript)&&i.remove()}();'),c.documentElement.dataset.bmCid="mail";var e,t,n,a,i,r,o=c.documentElement.getAttribute("manifest");o&&E(o),-1!==l.search.indexOf("__theme_dark__")&&(c.documentElement.dataset.bmUdm="1"),-1!==l.search.indexOf("bm_mail_bigtop")&&(c.documentElement.dataset.bmCsMailHideStars="1"),i=A,"complete"===c.readyState||"loaded"===c.readyState||"interactive"===c.readyState?i():c.addEventListener("DOMContentLoaded",i),r=function(e,t){var n,a,i;"mailClickEl"===e?(n=t[0],i=t[1]||0,(a=t[2])?(O(n,a),setTimeout(function(){O(n,i)})):O(n,i)):"mailAtToken"===e&&(c.documentElement.dataset.mailAt=t)},s.addEventListener("message",function(e){var t;if(m){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===d))return;(e.isTrusted||u)&&e.source===s.parent&&(t=(e=e.data||{}).bm_method)&&r(t,e.bm_value,e.bm_request)}),s.addEventListener("hashchange",function(){p("mailHashChange",l.hash.replace("#",""))})},function(e){var t,n;if(s.top!==s.self&&!(c.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=l.ancestorOrigins)?1:(n=m?d.toLowerCase():d,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com"))}(o)&&(g=(g=(o=l.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&g[1],e(origin,g,o))&&(g&&(c.documentElement.dataset.bmCid=g),r())}();