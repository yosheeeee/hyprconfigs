"use strict";!function(){var e,t,n,s,c=window,u=c.location,m=document,d=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),g=d.startsWith("safari-web-extension://"),l=!g&&d.startsWith("moz-extension://");"undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&String.quote;function f(e,t,n){c.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},d)}function v(e){m.documentElement.dataset.bmMessagesHideMenus="1",m.querySelector("button[data-e2e-main-nav-menu]").click(),setTimeout(function(){setTimeout(function(){m.documentElement.dataset.bmMessagesHideMenus="0"},50),m.querySelector(e).click()},50)}function b(){(m.querySelector('a[href="/web/conversations"]')||m.querySelector(".back-button")).click()}function h(){v("button[data-e2e-main-nav-menu-archived], a[data-e2e-main-nav-menu-archived]")}e=function(e,t){return"messages"===t&&"https://messages.google.com"===e},t=function(){var n,s,a,o,i,r,e=-1!==u.search.indexOf("bm_udm=1");function t(){m.body.classList.toggle("dark-theme",e),m.body.classList.toggle("dark-mode",e)}!function e(){m.body?(t(),setTimeout(t,100),setTimeout(t,200),setTimeout(t,1e3)):setTimeout(e,10)}(),function e(){var t=u.href,t=(n!==t&&(n=t,t="conversations",(a=u.pathname).contains("/auth")?t="authentication":a.contains("/settings")?t="settings":a.contains("/conversations/new")?t=-1===n.indexOf("mode=group")?"newConversation":"newGroupConversation":a.contains("/conversations/")?t="conversation":a.contains("/calls/")?t="calls":a.contains("/voicemail/")&&(t="voicemail"),t!==s&&f("messagesUpdateView",s=t),f("messagesBackState",!a.contains("/conversations")&&!a.contains("/auth"))),m.querySelector("h2[data-e2e-header-title]")),t=t&&t.textContent,t=(o!==t&&f("messagesPageTitle",o=t),m.querySelector("button.notifications-button[data-e2e-is-muted")),t=t&&"true"===t.dataset.e2eIsMuted;i!==t&&f("messagesMutedState",i=t),setTimeout(e,100)}(),r=function(e,t){"messagesActivateMenuItem"===e&&("archived"===(e=t)?a.startsWith("/web/conversation")?h():(b(),setTimeout(h,50)):"settings"===e?v('a[data-e2e-main-nav-menu-settings], a[href="/web/settings"]'):b())},c.addEventListener("message",function(e){var t;if(g){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===d))return;(e.isTrusted||l)&&e.source===c.parent&&(t=(e=e.data||{}).bm_method)&&r(t,e.bm_value,e.bm_request)})},function(e){var t,n;if(c.top!==c.self&&!(m.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=u.ancestorOrigins)?1:(n=g?d.toLowerCase():d,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com"))}(n)&&(s=(s=(n=u.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&s[1],e(origin,s,n))&&(s&&(m.documentElement.dataset.bmCid=s),t())}();