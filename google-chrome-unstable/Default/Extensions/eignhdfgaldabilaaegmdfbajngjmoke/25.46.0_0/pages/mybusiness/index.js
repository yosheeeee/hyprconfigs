"use strict";function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){var a;if(e)return"string"==typeof e?_arrayLikeToArray(e,n):"Map"===(a="Object"===(a={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,n):void 0}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,i=Array(n);a<n;a++)i[a]=e[a];return i}function _iterableToArrayLimit(e,n){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,s,t,c,o=[],r=!0,l=!1;try{if(t=(a=a.call(e)).next,0===n){if(Object(a)!==a)return;r=!1}else for(;!(r=(i=t.call(a)).done)&&(o.push(i.value),o.length!==n);r=!0);}catch(e){l=!0,s=e}finally{try{if(!r&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(l)throw s}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}cjce.registerTemplate("bm-p-mybusiness",function(n,i){var a,s,t,c,o,r,l,d,m,e=!cjBasics.webRequest.getWrifSupported(),b="https://business.google.com",u=b+i.wizPath+"/",_=i.account.pageId,g=_?"dashboard":"locations",j=!0,p=["dashboard","posts","edit","insights","reviews","messaging","photos","products","jobs","site","users"],h=cjBasics.generateUniqueId(),f={dashboard:{iconName:"__mdi:dashboard",newTabUrl:!0,brandOnly:!0,label:cjBasics.lang.i18n("cj_i18n_00291","Home")},posts:{iconName:"__mdi:post",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00990","Posts")},edit:{iconName:"__mdi:store",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00991","Info")},insights:{iconName:"__mdi:assessment",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00993","Insights")},reviews:{iconName:"__mdi:rate_review",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00801","Reviews")},messaging:{iconName:"__mdi:message",newTabUrl:!0,divider:e&&!_,label:cjBasics.lang.i18n("cj_i18n_01727","Messaging")},photos:{iconName:"__mdi:photo_library",newTabUrl:!0,shortcutPathname:"photos",brandOnly:!0,label:cjBasics.lang.i18n("cj_i18n_00994","Photos")},products:{iconName:"__mdi:shopping_basket",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_01823","Products")},jobs:{iconName:"__mdi:list",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_01824","Services")},site:{iconName:"__mdi:web",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00992","Website"),divider:!0},adwords:{iconName:"__mdi:cjg_ads",newTabUrl:!0,shortcutId:"169",label:cjBasics.lang.i18n("cj_i18n_01501","Create an ad"),external:!e},create:{iconName:"__mdi:add_location",newTabUrl:!0,shortcutPathname:"create",divider:!0,label:cjBasics.lang.i18n("cj_i18n_00555","Add location")},locations:{iconName:"__mdi:business",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_01500","Manage locations")},linkedaccounts:{iconName:"__mdi:link",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_01439","Linked accounts")},settings:{iconName:"__mdi:settings",newTabUrl:!0,label:cjBasics.lang.i18n("cj_i18n_00298","Settings")}};function w(e,n){e=u+e;n.shortcutId&&(e=cjgFrontend.urls.getShortcutUrl(n.shortcutId,i.account)),i.openTab(e)}function y(e){return cjBasics.urlParams.attach(u+e,{bm_cid:"mybusiness",bm_cst:"2",bm_wiz:"1",bm_iid:h,hl:cjBasics.lang.getCurrent()})}function T(e){e!==j&&(j=e,setTimeout(function(){for(var e=l.children,n=0;n<e.length;n++){var a=e[n];-1!==p.indexOf(a.dataset.id)&&(a.hidden=!j)}l.classList.toggle("bm-ele-navlist--compact",j)},300))}function v(e){d.cjceSetLoading(!0),r=!0,m.src="about:blank",s=!1,-1===p.indexOf(e)&&setTimeout(function(){s||(a.textContent="")},300);var n=y(B(e));setTimeout(function(){r=!1,m.src=n},100)}function B(e){var n=e;return-1!==p.indexOf(e)&&o&&(n+="/l/"+o),n}function C(){d.cjceSetLoading(!1)}function A(e){o=e.listingId,t=e.addressData,c=e.listingTitle,e=e.viewId,l.cjceSelectedId=e,d.cjceSetPageLabel(f[e].label),T(-1!==p.indexOf(e)),a.textContent="",s=!0,c&&(e=cjce.createElement("cjmd-title",{label:c}),a.appendChild(e),Array.isArray(t))&&0!==t.length&&((e=cjce.createElement("cjmd-secondarytext",{label:t.join("\n")})).classList.add("bm-p-mybusiness-locationdata__address"),a.appendChild(e))}e?(d=cjce.createElement("bm-ogb",{serviceIcon:"my_business",serviceLabel:cjBasics.lang.i18n("cj_i18n_00554","My Business"),pageLabel:cjBasics.lang.i18n("cj_i18n_01167","Links"),bmApis:i,onNewTab:function(){i.openTab(u+g)}}),n.appendChild(d),e=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),n.appendChild(e),l=cjce.createElement("bm-navlist",{compact:_,items:(_?["dashboard","posts","edit","insights","reviews","messaging","photos","site","adwords","create","locations","linkedaccounts","settings"]:["posts","reviews","messaging","adwords","create","locations","linkedaccounts","settings"]).map(function(e){var n=f[e];return n.id=e,n}),onClick:w,onNewTab:w}),e.appendChild(l)):(d=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"my_business",serviceLabel:cjBasics.lang.i18n("cj_i18n_00554","My Business"),pageLabel:cjBasics.lang.i18n("cj_i18n_01500","Manage locations"),bmApis:i,onNewTab:function(){m.cjceGetCleanUrl(b).then(function(e){i.openTab(e||u+g)})}}),n.appendChild(d),e=d.cjceDrawerEl,(a=document.createElement("div")).className="bm-p-mybusiness-locationdata",e.appendChild(a),l=cjce.createElement("bm-navlist",{compact:!0,isSelector:!0,selectedId:"locations",items:f,onChange:function(e,n){"users"===e?m.cjceSendFrameCommand({method:"bmCstClickDomElement",value:'path[d*="66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8"]'},b):(v(e),e=-1!==p.indexOf(e),d.cjceSetPageLabel(n.label),T(e))},bmApis:i,onNewTab:function(e,n){e="adwords"===e?cjBasics.urlParams.attach("https://adwords.google.com/express/plus/Plus",{__l:o,authuser:"0"===i.account.authuser?null:i.account.authuser}):u+B(e);i.openTab(e)}}),T(!1),e.appendChild(l),cjBasics.webRequest.catchAndStop(["https://accounts.google.com/AccountChooser*service=lbc*"+_+"*dashboard*bm_cid*mybusiness*"],function(){setTimeout(function(){v("locations")})}),cjBasics.webRequest.handleIframeHeaders([b+"/*bm_iid="+h+"*",b+"/local/business/*ih=gmbweb*"],{disableOgs:b,handleFirefoxInject:!0,handleSecVariables:!0}),cjBasics.webRequest.addListener("onCompleted",function(e){399<e.statusCode&&(n.textContent="",e=cjce.createElement("bm-fulldialog",{bmApis:i,onNewTab:function(){i.openTab(b)},lockup:{label:cjBasics.lang.i18n("cj_i18n_00554","My Business")},iconName:"my_business",message:cjBasics.lang.i18n("cj_i18n_06649","Error loading Google My Business. Please confirm if a business is connected to this account."),actionLabel:cjBasics.lang.i18n("cj_i18n_01543","Switch account"),action:function(){i.pageManager.navigate("accountchooser")}}),n.appendChild(e))},{urls:[b+"/*bm_iid="+h+"*"],types:["sub_frame"]}),cjgApis.cache.getItem(i.account,"bm_pref__mybusiness__lastview").then(function(e){"object"!=typeof e||864e5<Date.now()-e.timestamp||(A(e),v(e.viewId))}),m=cjce.createElement("bm-iframe",{src:y(g),solid:"#fff",shadow:!0,onLoad:function(){r||C()},onBmMessage:function(e,n){var a;"mybusinessViewData"===e?(A(n),n.timestamp=Date.now(),cjgApis.cache.setItem(i.account,"bm_pref__mybusiness__lastview",n)):"mybusinessDoneLoading"===e?C():"bmCstOpenUrl"===e&&(n=(e=_slicedToArray(n,3))[0],a=e[1],e=e[2],n=cjBasics.cleanBmUrl(n),i.openTab(n,a,e))}}),n.appendChild(m))});