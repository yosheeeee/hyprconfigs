"use strict";!function(){var C=window,N=document;cjce.registerTemplate("bm-p-movies",function(a,r){var i,n,c,o,e=cjBasics.isUsaCheck(),s=(e||(i="youtube",a.classList.add("bm-ele-app--yttheme"),a.style.setProperty("--ccc-accent-color","#f5221b")),["https://www.googleapis.com/auth/android_video"]),l=C.atob("QUl6YVN5QUgwcURTVzk3M0xPeEUtRmZmbDdaNWVZVFdCQ0FXT20w"),m="home",t="https://play.google.com",u=t+"/store/",d=u+"movies",p="authuser="+r.account.authuser,h=d+"?"+p,g=t+"/movies?"+p,_={home:{label:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),iconName:"__mdi:home",newTabUrl:h},library:{label:cjBasics.lang.i18n("cj_i18n_00131","Library"),iconName:"__mdi:video_library",divider:!0,newTabUrl:g},play:{label:cjBasics.lang.i18n("cj_i18n_00134","Shop"),iconName:"__mdi:shop",newTabUrl:h,external:!cjBasics.webRequest.getWrifSupported()},save:{label:e?cjBasics.lang.i18n("cj_i18n_06670","Watchlist"):cjBasics.lang.i18n("cj_i18n_00550","Wishlist"),iconName:"__mdi:cjg_wishlist",external:!0,newTabUrl:e?"https://www.google.com/search?q=my+watchlist&stick=H4sIAAAAAAAAABPi1U_XNzTMMLQ0TopPNn3EqMYt8PLHPWEp2UlrTl5jFOcSDEgtKs7PS8wJTyxJzsjJLC6xYtJg5FnEypNbqVAOEwMAB_LtUkcAAAA&"+p:"https://play.google.com/wishlist?"+p},purchases:{label:cjBasics.lang.i18n("cj_i18n_00310","Purchases"),iconName:"__mdi:local_offer",external:!0,newTabUrl:cjgFrontend.urls.youtube(r.account,"paid_memberships")}};function j(e){var t;e&&"not_authorized"===e.cjg_error&&(a.textContent="",t=cjce.createElement("bm-fulldialog",{theme:i,lockup:{label:cjBasics.lang.i18n("cj_i18n_01205","Movies")},iconName:"youtube_movies",message:cjBasics.lang.i18n("cj_i18n_01249","Before you can use this page, you need to give access to your movies"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(r.account,e.cjg_missing_scopes)}}),a.appendChild(t))}function b(e){return e&&"object"==typeof e&&Array.isArray(e.resource)?e.resource.map(function(e){var t,a=e.metadata;return{title:a.title,year:(t=a.release_date_timestamp_sec,t=parseInt(t+"000",10),new Date(t).getUTCFullYear()),thumbnail:function(e){for(var t=196*(C.devicePixelRatio||2),a=1;a<e.length;a++)if(e[a].width<t)return e[a-1].url;return e[0].url}(a.images),duration:(t=a.duration_sec,Math.round(t/60)),id:e.resource_id.id}}):[]}function v(e,t){t=t||{},t.alt="json",t.prettyPrint="false",e=cjBasics.urlParams.attach("https://content.googleapis.com/android_video/v1/"+e,t);return cjgApis.request(e,{fetchAs:"json"},{key:l,account:r.account,requiredScopes:s}).catch(j)}function y(){return v("recommendation",{cat:"type=movie",cr:"NL",if:"imobrg",lr:"en_US",max:"9"})}function f(e){return v("asset/list",{cr:"NL",fs:"peg",id:"yt:movie:"+e.join(",yt:movie:"),if:"imobrg",lr:"en_US"})}function w(){return v("userlibrary",{max:"20"}).then(function(e){return e&&"object"==typeof e&&Array.isArray(e.resource)?e.resource.map(function(e){return e.resource_id.id}):[]}).then(f)}function B(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{theme:i,color:!0,iconName:"__mdi:local_movies",label:cjBasics.lang.i18n("cj_i18n_00156","No results")});for(var t=cjce.createElement("cjmd-grid"),a=0;a<e.length;a++){var n=function(t){var e,a=cjce.createElement("cjmd-griditem",{onClick:function(){var e=cjBasics.urlParams.attach(d+"/details",{id:t.id,authuser:r.account.authuser});r.openTab(e)}}),n=N.createElement("div");n.className="cjmd-griditem__thumbnail bm-p-movies-griditem__thumbnail",n.style.backgroundImage='url("'+t.thumbnail+'")',a.appendChild(n);(n=N.createElement("div")).className="cjmd-griditem__bottom",a.appendChild(n);var i=N.createElement("div");i.className="cjmd-griditem__textcontainer",n.appendChild(i);(n=N.createElement("div")).textContent=t.title||cjBasics.lang.i18n("cj_i18n_00380","Movie"),i.appendChild(n);var c=[];return"number"==typeof t.year&&c.push(t.year),"number"==typeof t.duration&&1<t.duration&&c.push(t.duration+" mins"),0<c.length&&((e=N.createElement("div")).className="cjmd-secondarytext",e.textContent=c.join(", "),i.appendChild(e)),20<t.title.length&&(n.title=t.title),a}(e[a]);t.appendChild(n)}return t}function A(e){var t;"play"===e?(r.pageManager.navigate(e,{typeId:"movies"}),o.cjceSelectedId=m):(t=_[m=e],n.cjceSetPageLabel(t.label),n.cjceSetLoading(!0),c.textContent="",("library"===e?w:y)().then(b).then(B).then(function(e){c.appendChild(e),n.cjceSetLoading(!1)}))}n=cjce.createElement("bm-ogb",{loading:!0,theme:i,drawer:{color:!0},serviceIcon:e?"tv":"youtube_movies",serviceLabel:e?cjBasics.lang.i18n("cj_i18n_06402","Google TV"):cjBasics.lang.i18n("cj_i18n_01205","Movies"),pageLabel:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),searchbox:{color:!0,submitInNewTab:!0,onSubmit:function(e){e=cjBasics.urlParams.attach(u+"search",{c:"movies",authuser:r.account.authuser,hl:cjBasics.lang.getCurrent(),q:e});r.openTab(e)}},bmApis:r,onNewTab:function(){var e="library"===m?g:h;r.openTab(e)}}),a.appendChild(n),o=cjce.createElement("bm-navlist",{theme:i,isSelector:!0,selectedId:m,items:_,onChange:A,onNewTab:function(e,t){r.openTab(t.newTabUrl)}}),n.cjceDrawerEl.appendChild(o),c=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(c),r.setOnPageDisplayHandler(n.cjceSearchboxEl.select),A(m)})}();