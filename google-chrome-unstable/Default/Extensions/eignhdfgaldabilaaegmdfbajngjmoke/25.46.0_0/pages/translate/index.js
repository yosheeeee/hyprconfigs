"use strict";!function(){var t="undefined"!=typeof chrome&&chrome||{},e=t.runtime.getURL("PATH/").replace("/PATH/",""),u=e.startsWith("safari-web-extension://");u||e.startsWith("moz-extension://");function l(){return i={active:!0,currentWindow:!0},new Promise(function(l,n){t.tabs.query(i,function(e){var a=t.runtime.lastError;a?n(a):Array.isArray(e)?u&&i&&i.url?(a=e.filter(function(e){return e.url}),l(a)):l(e):n(new Error("No array returned"))}),setTimeout(l,2e3)}).then(function(e){return e[0]},function(){return null});var i}function a(){return getSelection().toString()}function i(e){return t.scripting.executeScript({func:a,target:{allFrames:!0,tabId:e}}).then(function(e){return("string"==typeof e[0]?e:e.map(function(e){return e.result})).filter(Boolean).join(" ")},function(){return""})}function C(e,a){var n;return t.scripting?e?i(e):(a||l()).then(function(e){return e?i(e.id):""}):(n=e,new Promise(function(l){t.tabs.executeScript(n||null,{allFrames:!0,code:"getSelection().toString()",runAt:"document_start"},function(e){var a="";Array.isArray(e)?a=e.filter(Boolean).join(" "):"string"==typeof e&&(a=e),l(a)})}).catch(function(){return""}))}var P=browserStorage.sync.getItem("bm_pref__translate__defaultsl");cjce.registerTemplate("bm-p-translate",function(n,i){var t,u,r,c,e=!cjBasics.webRequest.getWrifSupported(),s=null,l="home",o="https://consent.google.com",b="https://translate.google.com",a="/",v=("0"!==i.account.authuser&&(a+="u/"+i.account.authuser+"/",s=i.account.authuser),b+a),m=cjBasics.generateUniqueId(),d={bm_cid:"translate",bm_iid:m,bm_cst:"2",bm_wiz:"1",bm_udm:i.darkMode?"1":null,hl:cjBasics.lang.getCurrent()},h={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),newTabUrl:""},history:{iconName:"__mdi:history",label:cjBasics.lang.i18n("cj_i18n_00155","History"),newTabUrl:"history"},saved:{iconName:"__mdi:star",label:cjBasics.lang.i18n("cj_i18n_01355","Saved"),newTabUrl:"saved",divider:!0},docupload:{iconName:"__mdi:drive_file",label:cjBasics.lang.i18n("cj_i18n_01777","Documents"),newTabUrl:"?op=docs",external:!e},website:{iconName:"__mdi:drive_site",label:cjBasics.lang.i18n("cj_i18n_07477","Websites"),newTabUrl:"?op=websites",external:!e,divider:!0}},g=[{value:"bm_lastused",label:cjBasics.lang.i18n("cj_i18n_07181","Last used")},{value:"auto",label:cjBasics.lang.i18n("cj_i18n_07182","Detect language")},{value:"af",label:"Afrikaans"},{value:"sq",label:"Albanian"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"bm",label:"Bambara"},{value:"eu",label:"Basque"},{value:"be",label:"Belarusian"},{value:"bn",label:"Bengali"},{value:"bho",label:"Bhojpuri"},{value:"bs",label:"Bosnian"},{value:"bg",label:"Bulgarian"},{value:"ca",label:"Catalan"},{value:"ceb",label:"Cebuano"},{value:"ny",label:"Chichewa"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"co",label:"Corsican"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Dhivehi"},{value:"doi",label:"Dogri"},{value:"nl",label:"Dutch"},{value:"en",label:"English"},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"tl",label:"Filipino"},{value:"fi",label:"Finnish"},{value:"fr",label:"French"},{value:"fy",label:"Frisian"},{value:"gl",label:"Galician"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian Creole"},{value:"ha",label:"Hausa"},{value:"haw",label:"Hawaiian"},{value:"iw",label:"Hebrew"},{value:"hi",label:"Hindi"},{value:"hmn",label:"Hmong"},{value:"hu",label:"Hungarian"},{value:"is",label:"Icelandic"},{value:"ig",label:"Igbo"},{value:"ilo",label:"Ilocano"},{value:"id",label:"Indonesian"},{value:"ga",label:"Irish"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"jw",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"kk",label:"Kazakh"},{value:"km",label:"Khmer"},{value:"rw",label:"Kinyarwanda"},{value:"gom",label:"Konkani"},{value:"ko",label:"Korean"},{value:"kri",label:"Krio"},{value:"ku",label:"Kurdish (Kurmanji)"},{value:"ckb",label:"Kurdish (Sorani)"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Lao"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lg",label:"Luganda"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mai",label:"Maithili"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"mni-Mtei",label:"Meiteilon (Manipuri)"},{value:"lus",label:"Mizo"},{value:"mn",label:"Mongolian"},{value:"my",label:"Myanmar (Burmese)"},{value:"ne",label:"Nepali"},{value:"no",label:"Norwegian"},{value:"or",label:"Odia (Oriya)"},{value:"om",label:"Oromo"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"pa",label:"Punjabi"},{value:"qu",label:"Quechua"},{value:"ro",label:"Romanian"},{value:"ru",label:"Russian"},{value:"sm",label:"Samoan"},{value:"sa",label:"Sanskrit"},{value:"gd",label:"Scots Gaelic"},{value:"nso",label:"Sepedi"},{value:"sr",label:"Serbian"},{value:"st",label:"Sesotho"},{value:"sn",label:"Shona"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhala"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somali"},{value:"es",label:"Spanish"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"sv",label:"Swedish"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"th",label:"Thai"},{value:"ti",label:"Tigrinya"},{value:"ts",label:"Tsonga"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"ak",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"},{value:"cy",label:"Welsh"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"zu",label:"Zulu"}];function j(){u.cjceSendFrameCommand({method:"bmCstClickDomElement",value:'c-wiz[data-view-instance-id="/history-V1"] c-wiz > div:first-child > div:first-child + div button[data-idom-class]'},b)}function f(e){i.openTab(v+e)}function p(e,a){f(a.newTabUrl)}function _(e){f(cjBasics.urlParams.create({op:"translate",sl:"auto",tl:"auto",text:e}))}function w(e){var a=h[l=e];t.cjceSetBackState("home"!==e),t.cjceSetPageLabel(a.label),c.hidden="history"!==e,r.cjceSelectedId=e}function S(e){var a=e[0],e=e[1];(a||e)&&u.cjceSendFrameCommand({method:"translatePrefillText",value:{selection:a,url:e}},b)}function y(){u.cjceSendFrameCommand({method:"translateFocus"},b)}function T(e){var a=h[e];a.external?(i.openTab(a.newTabUrl),r.cjceSelectedId=l):(cjBasics.urlParams.attach(a.newTabUrl,d)&&u.cjceSendFrameCommand({method:"bmCstUpdateState",value:cjBasics.urlParams.attach(a.newTabUrl,d)+"#view="+e},b),w(e))}function B(){var e="popup"!==i.environment?Promise.resolve(""):C(),a=cjBasics.navigator.getActionableUrl().then(function(e){if(e)return e.url});return Promise.all([e,a])}function k(){t=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"translate",serviceLabel:cjBasics.lang.i18n("cj_i18n_00440","Translate"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:i,onNewTab:function(e,a,l,n){new Promise(function(a){u.cjceSendFrameRequest({method:"translateSubmitAndGetState"},b).then(function(e){a(e)}),setTimeout(function(){a()},2e3)}).then(function(e){e=cjBasics.cleanBmUrl(b+e);i.openTab(e,l,n)})},onBack:function(){T("home")}}),n.appendChild(t),(c=cjce.createElement("ccbm-button",{outline:!0,label:cjBasics.lang.i18n("cj_i18n_07194","Clear all history"),onClick:j})).hidden=!0,t.cjceAppendChild(c);var l,e=t.cjceDrawerEl,a=(l=e,r=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:"home",items:h,onChange:T,onNewTab:p}),l.appendChild(r),P.then(function(e){var a=cjce.createElement("bm-drawerdropdown",{iconName:"__mdi:language",label:cjBasics.lang.i18n("cj_i18n_07193","Default source language"),items:g,selectedId:e||"bm_lastused",onChange:function(){var e=a.cjceSelectedId;browserStorage.sync.setItem("bm_pref__translate__defaultsl",e)}});l.appendChild(a)}),cjBasics.webRequest.handleIframeHeaders([b+"/*bm_iid="+m+"*",o+"/*bm_iid="+m+"*",o+"/*bm_iid%3D"+m+"*"],{disableOgs:b,handleFirefoxInject:!0,handleSecVariables:!0,handleSwCache:!0}),B());P.then(function(e){e&&"bm_lastused"!==e?d.sl=e:delete d.sl;e=cjBasics.urlParams.attach(v,d);u=cjce.createElement("bm-iframe",{solid:!0,src:e,onLoad:function(){t.cjceSetLoading(!1),a.then(S),i.setOnPageDisplayHandler(y)},onBmMessage:function(e,a){"translateUpdateView"===e?w(a):"translateOpenUrlTranslator"===e&&(e=a,e=cjBasics.urlParams.attach(b+"/translate",{u:a,authuser:s}),i.openTab(e))}}),n.appendChild(u)})}e?(t=cjce.createElement("bm-ogb",{serviceIcon:"translate",serviceLabel:cjBasics.lang.i18n("cj_i18n_00440","Translate"),pageLabel:cjBasics.lang.i18n("cj_i18n_01167","Links"),bmApis:i,searchbox:{onSubmit:_,submitInNewTab:!0},onNewTab:function(){p(0,h.home)}}),n.appendChild(t),i.setOnPageDisplayHandler(t.cjceSearchboxEl.select),a=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),e=cjce.createElement("bm-navlist",{items:h,onClick:p,onNewTab:p}),a.appendChild(e),n.appendChild(a)):k()})}();