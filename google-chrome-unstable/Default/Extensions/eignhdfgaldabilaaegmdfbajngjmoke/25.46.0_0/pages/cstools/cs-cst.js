"use strict";!function(){var t,o,e,n,i,a,r=window,c=r.location,s=document,u=("undefined"!=typeof chrome&&chrome||{}).runtime.getURL("PATH/").replace("/PATH/",""),l=u.startsWith("safari-web-extension://"),f=!l&&u.startsWith("moz-extension://"),m="undefined"!=typeof KeyboardEvent&&"key"in KeyboardEvent.prototype&&!/MSIE |Edge\/|Trident.*rv:11\./.test(navigator.userAgent)&&void 0===String.quote,d=m?"Enter":13;function b(e){return 1===e.button||e[t||(e=/^Mac|^iP/.test(navigator.platform),t=e?"metaKey":"ctrlKey")]}function p(e,t,n){r.parent.postMessage({bm_method:e,bm_request:n,bm_value:t},u)}function h(e,t){t=new InputEvent(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}function v(e,t){t=new KeyboardEvent(t,{bubbles:!0,cancelable:!0,keyCode:13});e.dispatchEvent(t)}function g(e,t){t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function y(e){g(e,"mousedown"),g(e,"mouseup"),g(e,"click")}function E(e){var t,n=s.querySelector(e.selector);n.value=e.newValue,e.submit?(t=n,e=0,setTimeout(function(){y(t)},e+=50),setTimeout(function(){v(t,"keydown")},e+=50),setTimeout(function(){v(t,"keyup")},e+=50),setTimeout(function(){h(t,"input")},200)):h(n,"input")}function w(e){var t="A";if("closest"in Element.prototype)return e.closest(t);for(var n=e;n;){if(n.tagName===t)return n;n=n.parentNode}return null}function k(n){s.addEventListener("click",n,!0),s.addEventListener("auxclick",function(e){1===e.button&&n(e)},!0),s.addEventListener("keyup",function(e){var t;t=e,(m&&t.key||t.which||t.keyCode)===d&&n(e)},!0)}function C(e){var t;/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(e.origin)&&(e.href=(e=e.search,"undefined"==typeof URLSearchParams?(t=e.match(/[&?](?:link|afl)=(.+?)(?:&|$)/),decodeURIComponent(t)):(t=new URLSearchParams(e)).get("link")||t.get("afl")))}function S(){var s=c.search;k(function(e){var t,n,o,i,a,r;t=s,a=w((e=e).target),(r=a&&a.href)&&(i=a.origin===c.origin,n=e.shiftKey,(o=b(e))||n||"_blank"===a.target||!i?(p("bmCstOpenUrl",[r,n,o]),e.stopPropagation(),e.preventDefault()):(C(a),t&&-1===(i=a.search).indexOf("bm_cst=")&&(a.search=t+i.replace("?","&"))))})}e=function(e){return o=c.search.match(/bm_cst=([12])/),e.endsWith(".google.com")&&o},n=function(){var n;o[1]%2==0&&S(),n=function(e,t,n){"bmCstGetFrameUrl"===e?p(e,c.href,n):"bmCstUpdateState"===e?(n=t,r.history.pushState({},"",n),n=new PopStateEvent("popstate",{state:{url:n}}),r.dispatchEvent(n)):"bmCstNavigateBack"===e?r.history.back():"bmCstClickDomElement"===e?(n=t,(n=s.querySelector(n))&&y(n)):"bmCstFillText"===e&&E(t)},r.addEventListener("message",function(e){var t;if(l){if(!e.origin.toLowerCase().startsWith("safari-web-extension://"))return}else if(!(e.origin===u))return;(e.isTrusted||f)&&e.source===r.parent&&(t=(e=e.data||{}).bm_method)&&n(t,e.bm_value,e.bm_request)})},function(e){var t,n;if(r.top!==r.self&&!(s.documentElement instanceof SVGSVGElement))return"object"!=typeof(t=c.ancestorOrigins)?1:(n=l?u.toLowerCase():u,1===t.length?t[0]===n:e&&2===t.length&&t[1]===n&&!t[0].endsWith(".google.com"))}(i)&&(a=(a=(i=c.search).match(/[&?]bm_cid=([\da-z-]{2,25})(?:&|$)/))&&a[1],e(origin,a,i))&&(a&&(s.documentElement.dataset.bmCid=a),n())}();