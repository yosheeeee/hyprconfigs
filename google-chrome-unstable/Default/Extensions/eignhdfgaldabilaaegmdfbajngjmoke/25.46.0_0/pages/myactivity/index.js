"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){var c;if(e)return"string"==typeof e?_arrayLikeToArray(e,a):"Map"===(c="Object"===(c={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:c)||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(e,a):void 0}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var c=0,t=Array(a);c<a;c++)t[c]=e[c];return t}function _iterableToArrayLimit(e,a){var c=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=c){var t,i,n,r,l=[],o=!0,s=!1;try{if(n=(c=c.call(e)).next,0===a){if(Object(c)!==c)return;o=!1}else for(;!(o=(t=n.call(c)).done)&&(l.push(t.value),l.length!==a);o=!0);}catch(e){s=!0,i=e}finally{try{if(!o&&null!=c.return&&(r=c.return(),Object(r)!==r))return}finally{if(s)throw i}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}cjce.registerTemplate("bm-p-myactivity",function(e,l){var a=!cjBasics.webRequest.getWrifSupported()||!l.account.validSession,i="https://myactivity.google.com",c=i+l.wizPath+"/",t=c+"myactivity",n=cjBasics.generateUniqueId(),r={bm_cid:"myactivity",bm_cst:"2",bm_iid:n,bm_udm:l.darkMode?"1":null,bm_wiz:"1",color_scheme:l.darkMode?"dark":"light",hl:cjBasics.lang.getCurrent()};var o,s,d,m,u,b,y,_,j=cjBasics.lang.i18n("cj_i18n_07143","Activity"),g=cjce.createElement("bm-ogb",{bmApis:l,drawer:!a,loading:!a,serviceIcon:"security_shield",serviceLabel:cjBasics.lang.i18n("cj_i18n_00689","My Activity"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),onBack:function(){_.cjceSendFrameCommand({method:"bmCstNavigateBack"},i)},onNewTab:function(){a?l.openTab(t):_.cjceGetCleanUrl(i).then(function(e){l.openTab(e||t)})}}),h=(e.appendChild(g),[{id:"myactivity",iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),newTabUrl:!0},{id:"more-activity",iconName:"__mdi:dashboard",label:cjBasics.lang.i18n("cj_i18n_07133","Other Google activity"),newTabUrl:!0},{id:"activitycontrols",iconName:"__mdi:toggle_on",label:cjBasics.lang.i18n("cj_i18n_06365","Activity controls"),newTabUrl:!0},{id:"results-about-you",iconName:"__mdi:account_circle",label:cjBasics.lang.i18n("cj_i18n_07575","Results about you"),newTabUrl:!0},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_00835","Products")},{id:"product/search",iconName:"__mdi:saved_search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),newTabUrl:!0},{id:"product/gpay",iconName:"__mdi:gpay",label:cjBasics.lang.i18n("cj_i18n_01010","Google Pay"),newTabUrl:!0},{id:"product/youtube",iconName:"__mdi:video_youtube",label:cjBasics.lang.i18n("cj_i18n_00445","YouTube"),newTabUrl:!0},{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},{iconName:"__mdi:account_circle",id:"myaccount",label:cjBasics.lang.i18n("cj_i18n_01506","Account"),newTabUrl:!0,external:!l.servicesDatabase.myaccount},{iconName:"__mdi:ad",id:"myadcenter",label:cjBasics.lang.i18n("cj_i18n_07226","My Ad Centre"),newTabUrl:!0,external:!l.servicesDatabase.myadcenter}]);function p(e){var a=c+e;"myadcenter"===e&&(a="https://myadcenter.google.com"+l.wizPath+"/home"),"myaccount"===e&&(a="https://myaccount.google.com"+l.wizPath+"/"),l.openTab(a)}a?(o=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),y=cjce.createElement("bm-navlist",{items:h,onClick:function(e,a){"myaccount"===e||"myadcenter"===e?l.pageManager.navigate(e):p(e)},onNewTab:p}),o.appendChild(y),e.appendChild(o)):(s=cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:delete",label:cjBasics.lang.i18n("cj_i18n_07142","Remove activity"),onClick:function(){_.cjceSendFrameCommand({method:"bmCstClickDomElement",value:'nav > a ~ a:first-child, div[data-is-touch-wrapper="true"] > button[aria-label][data-action]'},i)}}),g.cjceAppendChild(s),d=!1,m="myactivity",u=cjce.createElement("bm-navlist",{selectedId:m,items:h,isSelector:!0,onChange:function(e,a){var c,t;"myaccount"===e?(l.pageManager.navigate(e),u.cjceSelectedId=m):(m=e,c=cjBasics.urlParams.attach("/"+e,r),"results-about-you"===e&&(c+="&gl=US"),t=d,d=e.startsWith("product/")||"results-about-you"===e,g.cjceSetPageLabel(a.label),t||d?(g.cjceSetLoading(!0),_.src=i+c):_.cjceSendFrameCommand({method:"bmCstUpdateState",value:c},i))},onNewTab:p}),g.cjceDrawerEl.appendChild(u),cjBasics.webRequest.handleIframeHeaders([i+"/*bm_iid="+n+"*"],{disableOgs:i,handleFirefoxInject:!0,handleSecVariables:!0,handleSwCache:!0}),b=["/activity","/activity/","/home","/item","/myactivity","/myactivity/"],y=cjBasics.urlParams.attach(t,r),_=cjce.createElement("bm-iframe",{sandbox:"allow-scripts allow-forms allow-same-origin",src:y,onBmMessage:function(e,a){var c,t,i,n,r;"bmCstOpenUrl"===e?(i=(t=_slicedToArray(a,3))[0],c=t[1],t=t[2],i=cjBasics.cleanBmUrl(i),l.openTab(i,c,t)):"myactivityUpdatePath"===e&&(i=-1===b.indexOf(a),n=i?a.slice(1):"myactivity",s.hidden=i,g.cjceSetBackState(i),u.cjceSelectedId=n,r=j,h.forEach(function(e){e.id===n&&(r=e.label)}),g.cjceSetPageLabel(r))},onLoad:function(){g.cjceSetLoading(!1)}}),e.appendChild(_))});