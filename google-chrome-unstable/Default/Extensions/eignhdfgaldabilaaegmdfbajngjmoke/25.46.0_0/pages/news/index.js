"use strict";!function(){var D=document,z=browserStorage.sync.getItem("bm_pref__news__edition");cjce.registerTemplate("bm-p-news",function(e,l){var i,a,c,s,t,r,o,n,d,_="auto",m="headlines",u="https://newsstand.google.com",h="https://news.google.com",g=h+l.wizPath+"/",p=h+"/rss",b="/headlines/section/topic/",j=h+b,E=["English (Australia)","English (Botswana)","English (Canada)","English (Ethiopia)","English (Ghana)","English (India)","English (Indonesia)","English (Ireland)","English (Israel)","English (Kenya)","English (Latvia)","English (Malaysia)","English (Namibia)","English (New Zealand)","English (Nigeria)","English (Pakistan)","English (Philippines)","English (Singapore)","English (South Africa)","English (Tanzania)","English (Uganda)","English (United Kingdom)","English (United States)","English (Zimbabwe)","Bahasa Indonesia (Indonesia)","Bahasa Melayu (Malaysia)","Català (Espanya)","Čeština (Česko)","Deutsch (Deutschland)","Deutsch (Österreich)","Deutsch (Schweiz)","Eesti keel (Eesti)","Español (Argentina)","Español (Chile)","Español (Colombia)","Español (Cuba)","Español (España)","Español (Estados Unidos)","Español (México)","Español (Perú)","Español (Venezuela)","Français (Belgique)","Français (Canada)","Français (France)","Français (Maroc)","Français (Sénégal)","Français (Suisse)","Italiano (Italia)","Latviešu (Latvija)","Lietuvių (Lietuva)","Magyar (Magyarország)","Nederlands (België)","Nederlands (Nederland)","Norsk (Norge)","Polski (Polska)","Português (Brasil)","Português (Portugal)","Română (România)","Slovenčina (Slovensko)","Slovenščina (Slovenija)","Suomen kieli (Suomi)","Svenska (Sverige)","Tiếng Việt (Việt Nam)","Türkçe (Türkiye)","Ελληνικά (Ελλάδα)","Български (България)","Русский (Россия)","Русский (Украина)","Српски (Србија)","Українська (Україна)","עברית (ישראל)","العربية (الإمارات العربية المتحدة)","العربية (المملكة العربية السعودية)","العربية (لبنان)","العربية (مصر)","मराठी (भारत)","हिन्दी (भारत)","বাংলা (বাংলাদেশ)","বাংলা (ভারত)","ਪੰਜਾਬੀ (ਭਾਰਤ)","ગુજરાતી (ભારત)","தமிழ் (இந்தியா)","తెలుగు (భారతదేశం)","മലയാളം (ഇന്ത്യ)","ไทย (ไทย)","中文 (中国)","中文 (台灣)","中文 (香港)","日本語 (日本)","한국어 (대한민국)"],w=["AU:en","BW:en","CA:en","ET:en","GH:en","IN:en","ID:en","IE:en","IL:en","KE:en","LV:en","MY:en","NA:en","NZ:en","NG:en","PK:en","PH:en","SG:en","ZA:en","TZ:en","UG:en","GB:en","US:en","ZW:en","ID:id","MY:ms","ES:ca","CZ:cs","DE:de","AT:de","CH:de","EE:et","AR:es-419","CL:es-419","CO:es-419","CU:es-419","ES:es","US:es-419","MX:es-419","PE:es-419","VE:es-419","BE:fr","CA:fr","FR:fr","MA:fr","SN:fr","CH:fr","IT:it","LV:lv","LT:lt","HU:hu","BE:nl","NL:nl","NO:no","PL:pl","BR:pt-419","PT:pt-150","RO:ro","SK:sk","SI:sl","FI:fi","SE:sv","VN:vi","TR:tr","GR:el","BG:bg","RU:ru","UA:ru","RS:sr","UA:uk","IL:he","AE:ar","SA:ar","LB:ar","EG:ar","IN:mr","IN:hi","BD:bn","IN:bn","IN:pa","IN:gu","IN:ta","IN:te","IN:ml","TH:th","CN:zh-Hans","TW:zh-Hant","HK:zh-Hant","JP:ja","KR:ko"],O=["au","en_bw","ca","en_et","en_gh","in",0,"en_ie","en_il","en_ke",0,"en_my","en_na","nz","en_ng","en_pk","en_ph","en_sg","en_za","en_tz","en_ug","uk","us","en_zw","id_id",0,0,"cs_cz","de","de_at","de_ch",0,"es_ar","es_cl","es_co","es_cu","es","es_us","es_mx","es_pe","es_ve","fr_be","fr_ca","fr","fr_ma","fr_sn","fr_ch","it","lv_lv","lt_lt","hu_hu","nl_be","nl_nl","no_no","pl_pl","pt-br_br","pt-pt_pt","ro_ro","sk_sk","sl_si",0,"sv_se","vi_vn","tr_tr","el_gr","bg_bg","ru_ru","ru_ua","sr_rs","uk_ua","iw_il","ar_ae","ar_sa","ar_lb","ar_eg",0,"hi_in","bn_bd",0,0,0,"ta_in","te_in","ml_in","th_th","cn","tw","hk","jp","kr"],C=[{label:cjBasics.lang.i18n("cj_i18n_01344","Auto detect"),value:"auto"}],f=(w.forEach(function(e,n){C.push({label:E[n],value:e})}),{HEADLINE:{iconName:"__mdi:news",newTabUrl:j+"HEADLINE",label:cjBasics.lang.i18n("cj_i18n_01345","Headlines")},WORLD:{iconName:"__mdi:language",newTabUrl:j+"WORLD",label:cjBasics.lang.i18n("cj_i18n_00021","World")},NATION:{iconName:"__mdi:flag",newTabUrl:j+"NATION",label:cjBasics.lang.i18n("cj_i18n_00022","Your country")},BUSINESS:{iconName:"__mdi:business",newTabUrl:j+"BUSINESS",label:cjBasics.lang.i18n("cj_i18n_00023","Business")},TECHNOLOGY:{iconName:"__mdi:memory",newTabUrl:j+"TECHNOLOGY",label:cjBasics.lang.i18n("cj_i18n_01347","Technology")},ENTERTAINMENT:{iconName:"__mdi:theaters",newTabUrl:j+"ENTERTAINMENT",label:cjBasics.lang.i18n("cj_i18n_00025","Entertainment")},SPORTS:{iconName:"__mdi:directions_bike",newTabUrl:j+"SPORTS",label:cjBasics.lang.i18n("cj_i18n_00026","Sports")},SCIENCE:{iconName:"__mdi:experiment",newTabUrl:j+"SCIENCE",label:cjBasics.lang.i18n("cj_i18n_01346","Science")},HEALTH:{iconName:"__mdi:fitness_center",newTabUrl:j+"HEALTH",label:cjBasics.lang.i18n("cj_i18n_00027","Health")}});function H(e){for(var n=[],a=e.querySelectorAll("rss > channel > item"),t=0;t<a.length;t++){var i=a[t],c=i.querySelector("title"),s=i.querySelector("link"),i=i.querySelector("source"),c=c.textContent.split(" - ")[0],s=s.textContent,l=void 0,r=i&&i.textContent;r&&(l={label:r,url:i.getAttribute("url")||{}.url}),n.push({newsProvider:l,title:c,url:s})}e=e.querySelector("link"),e=(e&&e.textContent||"").match(/[&?]ceid=([A-Z]{2}:[\w-]{2,7})(?:&|$)/);return{ceid:e&&e[1],items:n}}function R(e){return(d=d||new DOMParser).parseFromString(e,"text/xml")}function q(e){var n=e.q,a=p+b+e.topic,a=(n&&(a=p+"/search"),cjBasics.urlParams.attach(a,{ceid:e.ceid,q:n}));return e=a,(cjBasics.navigator.isSafari?cjgApis.originRequest(e,{},h).then(R):cjBasics.ajax(e,{fetchAs:"xml"})).then(H)}function N(n){var a=n.q;return a||!0===n.noCache?q(n).then(function(e){return a||browserStorage.local.setItem("bm_cache_v33__news__"+n.topic,e),e}):browserStorage.local.getItem("bm_cache_v33__news__"+n.topic).then(function(e){return n.noCache=!0,e?{items:e.items,ceid:e.ceid,freshRequest:function(){return N(n)}}:N(n)})}function v(e){var s=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});return c.cjceSetLoading(!0),N({q:e.q||null,topic:e.topic||"HEADLINE",ceid:e.ceid||"auto"}).then(function e(n){n.freshRequest?n.freshRequest().then(e):c.cjceSetLoading(!1),s.textContent="",n.items.forEach(function(e){a=e,(e=cjce.createElement("cjmd-card",{withPadding:!0,onClick:function(e){var n=cjBasics.hasMetaKey(e);l.openTab(a.url,e.shiftKey,n)}})).classList.add("bm-p-news-card"),(t=D.createElement("header")).className="bm-p-news-card__header",e.appendChild(t),(c=D.createElement("div")).className="bm-p-news-card__main",t.appendChild(c),(i=cjce.createElement("cjmd-title",{label:a.title})).classList.add("bm-p-news-card__title"),c.appendChild(i),a.newsProvider&&((i=D.createElement("div")).className="cjmd-secondarytext bm-p-news-card__provider",i.textContent=a.newsProvider.label,navigator.onLine&&((n=cjce.createElement("cjmd-icon",{favicon:a.newsProvider.url,size:16})).classList.add("bm-p-news-card__favicon"),i.insertBefore(n,i.firstChild)),c.appendChild(i)),a.img&&((n=D.createElement("div")).className="bm-p-news-card__thumbnail",n.style.backgroundImage="url('"+a.img+"')",t.appendChild(n));var a,n,t,i,c=e;s.appendChild(c)}),U(n.ceid)}),s}function S(){return n=n||z.then(function(e){e=e,_=(-1!==w.indexOf(e)?e:"string"==typeof e&&(e=e.toLowerCase(),-1!==(e=O.indexOf(e)))?w[e]:null)||"auto"})}function T(e){var n="publications/";"TOPIC"===e.kind&&(n="topics/"),l.openTab(g+n+e.id)}var I={headlines:{label:cjBasics.lang.i18n("cj_i18n_00020","Top stories"),iconName:"__mdi:play_newsstand",newTabUrl:g},weather:{label:cjBasics.lang.i18n("cj_i18n_00743","Weather"),iconName:"__mdi:cloud",newTabUrl:"https://www.google.com/search?q=weather"+("0"!==l.account.authuser?"&authuser="+l.account.authuser:"")},foryou:{label:cjBasics.lang.i18n("cj_i18n_01055","For you"),iconName:"__mdi:for_you",newTabUrl:g+"foryou",external:!0},showcase:{label:cjBasics.lang.i18n("cj_i18n_07515","News Showcase"),iconName:"__mdi:table_chart",newTabUrl:g+"showcase",external:!0,divider:!0},followingHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_07518","Following")},library:{label:cjBasics.lang.i18n("cj_i18n_01339","Topics & sources"),iconName:"__mdi:star_outline",newTabUrl:g+"my/library",external:!0},searches:{label:cjBasics.lang.i18n("cj_i18n_01372","Saved searches"),iconName:"__mdi:saved_search",external:!0,newTabUrl:g+"my/searches"},bookmarks:{label:cjBasics.lang.i18n("cj_i18n_01341","Saved stories"),iconName:"__mdi:bookmark_border",newTabUrl:g+"my/bookmarks",external:!0,divider:!0}};function y(e){e=cjBasics.urlParams.attach(u+"/"+e,{hl:cjBasics.lang.getCurrent(),authuser:l.account.authuser});return cjBasics.ajax(e).then(function(e){return JSON.parse(e.replace(")]}',","")).data.items||[]})}function B(e,n){if(0===e.length)return cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_01342","No items found"),iconName:"__mdi:news"});for(var a,t=cjce.createElement("cjmd-grid"),i=0;i<e.length;i++)n===("SAVED_SEARCH"===e[i].kind)&&(a=function(e){var n=cjce.createElement("cjmd-griditem",{onClick:function(){T(e)}}),a=D.createElement("div"),t=(a.className="cjmd-griditem__thumbnail bm-p-news-griditem__thumbnail",e.icon&&((t=e.icon.image&&e.icon.image.url)?a.style.backgroundImage='url("'+t+'")':e.icon.text&&(a.textContent=e.icon.text)),"TOPIC"===e.kind&&(a.style.backgroundColor=e.theme.background),n.appendChild(a),D.createElement("div"));return t.className="cjmd-griditem__bottom",n.appendChild(t),(a=D.createElement("div")).className="cjmd-griditem__textcontainer",t.appendChild(a),(t=D.createElement("div")).textContent=e.title,a.appendChild(t),n}(e[i]),t.appendChild(a));return t}function k(n){c.cjceSetLoading(!0),i.textContent="";var a=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"transparentOnScroll"}),t=(i.appendChild(a),"");cjgApis.cache.getItem(l.account,"bm_cache_v33__news__library").then(function(e){Array.isArray(e)&&(t=JSON.stringify(e),e=B(e,n),a.appendChild(e))}),y("api/library/subscriptions").then(function(e){c.cjceSetLoading(!1),JSON.stringify(e)!==t&&(a.textContent="",cjgApis.cache.setItem(l.account,"bm_cache_v33__news__library",e),e=B(e,n),a.appendChild(e))})}function L(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_01342","No items found"),iconName:"__mdi:news"});for(var n=cjce.createElement("cjmd-grid"),a=0;a<e.length;a++){var t=function(e){var n=cjce.createElement("cjmd-griditem",{onClick:function(){T(e)}}),a=D.createElement("div");a.className="bm-p-news-griditem__thumbnail bm-p-news-griditem__thumbnail--tall",a.style.backgroundImage='url("'+e.image.url+'")',"TOPIC"===e.kind&&(a.style.backgroundColor=e.theme.background),n.appendChild(a);(a=D.createElement("div")).className="cjmd-griditem__bottom",n.appendChild(a);var t=D.createElement("div");return t.className="cjmd-griditem__textcontainer",a.appendChild(t),(a=D.createElement("div")).textContent=e.magazineTitle.title,t.appendChild(a),(a=D.createElement("div")).className="cjmd-secondarytext",a.textContent=e.title,t.appendChild(a),n}(e[a]);n.appendChild(t)}return n}function A(){c.cjceSetLoading(!0);var n="HEADLINE",a=(i.textContent="",s||(s=cjce.createElement("cjmd-appbar",{secondary:!0}),c.appendChild(s)),cjce.createElement("cjmd-container"));function t(){var e=v({q:a.textContent="",ceid:_,topic:n,shadow:"thinOnScroll"});a.appendChild(e)}i.appendChild(a),S().then(function(){var e=cjce.createElement("ccbm-tabs",{itemLimit:4,items:f,onChange:function(e){n=e,t()},onMetaClick:function(e){e=f[e].newTabUrl;"auto"!==_&&(e+="?ceid="+_),l.openTab(e)},selectedId:"HEADLINE"});s.textContent="",s.appendChild(e),c.cjceSetLoading(!1),t()})}function x(){var n,a;s&&(s.hidden="headlines"!==m),"headlines"===m?A():"library"===m?k(!1):"searches"===m?k(!0):(c.cjceSetLoading(!0),i.textContent="",n=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"transparentOnScroll"}),i.appendChild(n),a="",cjgApis.cache.getItem(l.account,"bm_cache_v33__news__magazines").then(function(e){Array.isArray(e)&&(a=JSON.stringify(e),e=L(e),n.appendChild(e))}),y("api/library/magazines").then(function(e){c.cjceSetLoading(!1),JSON.stringify(e)!==a&&(n.textContent="",cjgApis.cache.setItem(l.account,"bm_cache_v33__news__magazines",e),e=L(e),n.appendChild(e))}))}function U(e){o.dataset.code=(e=e,(e="auto"===_?e:_)&&"auto"!==e?e.split(":")[0]:"")}function P(e){browserStorage.sync.setItem("bm_pref__news__edition",e),_=e,A(),r&&(r.cjceSelectedId=e),t&&(t.cjceSelectedId=e),U()}(c=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"news",serviceLabel:cjBasics.lang.i18n("cj_i18n_00425","News"),pageLabel:I[m].label,searchbox:{suggestHandler:function(e){return cjgFrontend.suggestquery.get({gAccount:l.account,hl:cjBasics.lang.getCurrent(),q:e,ds:"n"})},onClear:function(){x()},onSubmit:function(e){var n,a;n=e,i.textContent="",a=cjce.createElement("cjmd-container"),i.appendChild(a),S().then(function(){var e=v({q:n,ceid:_,shadow:"transparentOnScroll"});a.appendChild(e)})},onMetaSubmit:function(e){e=cjBasics.urlParams.attach("https://www.google.com/search",{tbm:"nws",q:e,authuser:l.account.authuser});l.openTab(e)}},bmApis:l,onNewTab:function(){var e=I[m].newTabUrl;"headlines"===m&&"auto"!==_&&(e+="?ceid="+_),l.openTab(e)}})).classList.add("bm-p-news-ogb"),e.appendChild(c),a=c.cjceDrawerEl,j=c.cjceSearchboxEl,l.setOnPageDisplayHandler(j.select),(o=cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:language"})).classList.add("bm-p-news-ibtnselect__button"),c.cjceAppendChild(o),S().then(function(){var n;(r=cjce.createElement("basic-select",{selectedId:_,items:C,onChange:P,onLabelChange:function(e){r.title=e}})).classList.add("bm-p-news-ibtnselect__select"),o.appendChild(r),n=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:"headlines",items:I,onChange:function(e){"weather"===e?(n.cjceSelectedId=m,l.pageManager.navigate("weather")):(e=I[m=e].label,c.cjceSetPageLabel(e),x())},onNewTab:function(e,n){l.openTab(n.newTabUrl)}}),a.appendChild(n),t=cjce.createElement("bm-drawerdropdown",{iconName:"__mdi:language",label:cjBasics.lang.i18n("cj_i18n_01343","Change edition"),selectedId:_,items:C,onChange:P}),a.appendChild(t)}),i=cjce.createElement("cjmd-container"),e.appendChild(i),x()})}();