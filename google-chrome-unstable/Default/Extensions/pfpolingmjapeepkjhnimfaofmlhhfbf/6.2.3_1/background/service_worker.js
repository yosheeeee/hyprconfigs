/*! For license information please see service_worker.js.LICENSE.txt */
(()=>{var e,t,r,n,o={9027:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});var n=r(2296);async function o({apiBaseUrl:e,deviceId:t,deviceIp:r,onFail:o}){return await n.o.post(`https://${e}/api/v1/get-proxy`,{json:{device_id:t,device_ip:r??"unknown",on_fail:o}}).json()}},2296:(e,t,r)=>{"use strict";r.d(t,{o:()=>u});var n=r(4542),o=r.n(n),s=r(2787),a=r.n(s),i=r(3036),c=r(7036);(0,n.extend)(a());const u=i.Ay.extend({retry:{limit:5,methods:["get","post"]},hooks:{afterResponse:[async(e,t,r)=>{if(r.ok){const t=r.clone(),n=o().utc().format();let s=null;try{s=await t.json()}catch(e){s=null}const a={timestampUtc:n,responseData:s,status:r.status,statusText:r.statusText,url:e.url};let{apiHttpSuccess:i}=await(0,c.S7)(c.lP.ApiHttpSuccess);i||(i={}),await(0,c._5)({apiHttpSuccess:{...i,[e.url]:a}})}return r}],beforeError:[async e=>{const{request:t,response:r,message:n}=e,s=r.clone(),a=t.clone();let i=null,u=null;try{i=await a.json(),u=await s.json()}catch{i=null,u=null}const d={timestampUtc:o().utc().format(),message:n,errorData:u,status:s.status,statusText:s.statusText,requestData:i};let{apiHttpErrors:l}=await(0,c.S7)(c.lP.ApiHttpErrors);return l||(l={}),await(0,c._5)({apiHttpErrors:{...l,[s.url]:d}}),e}]}})},4126:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(2296);async function o(){const e=await n.o.get("https://raw.githubusercontent.com/vpn-naruzhu/public/main/uboost-extension").json();return{apiBaseUrl:e.apiBaseUrl,currentVersion:e.currentVersion,showOnUpdateVersion:e.showOnUpdateVersion,proxyUpdatePeriod:e.proxyUpdatePeriod??360,requiredVersion:e.requiredVersion,supportedBrowsers:e.supportedBrowsers}.proxyUpdatePeriodPremium=e.proxyUpdatePeriodPremium??60,e}},5772:(e,t,r)=>{"use strict";r.d(t,{Qm:()=>i,YP:()=>a});var n=r(4292),o=r(2296),s=r(4987);async function a(e,{userId:t,deviceId:r,deviceIp:n,tariff:a}){const i=(0,s.AY)(e);return await o.o.post(i,{json:{userId:t,deviceId:r,deviceIp:n,tariff:a}}).json()}async function i(e,{userId:t,deviceId:r,deviceIp:a}){try{const n=(0,s.lt)(e);return await o.o.post(n,{json:{userId:t,deviceId:r,deviceIp:a}}).json()}catch(e){if(console.error(e),e instanceof n.H){if(400===e.response.status){const t=await e.response.json();if(t.errors.find((e=>"change_device"===e.code)))return{error:"changeDevice"};if(t.errors.find((e=>"user_required"===e.code)))return{error:"userRequired"};if(t.errors.find((e=>"device_id_required"===e.code)))return{error:"deviceIdRequired"};if(t.errors.find((e=>"user_not_found"===e.code)))return{error:"userNotFound"}}if(500===e.response.status)return{error:"internal"}}return e instanceof Error&&"Failed to fetch"===e.message?{error:"requestBlockedError"}:{error:"unknown"}}}},6553:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});let n=function(e){return e.DefaultOneMonth="default_1m",e.DefaultThreeMonth="default_3m",e.DefaultSixMonth="default_6m",e.DefaultOneYear="default_1y",e.Discount="discount",e.FreeTrial="free_trial",e}({})},4987:(e,t,r)=>{"use strict";r.d(t,{AY:()=>l,TV:()=>s,lt:()=>i,wD:()=>u});const n="premium/api/v1/uboost-premium",o=`${n}/create-new-user`;function s(e){return h(e,o)}const a=`${n}/get-subscription`;function i(e){return h(e,a)}const c=`${n}/get-proxy`;function u(e){return h(e,c)}const d=`${n}/check-tariff`;function l(e){return h(e,d)}function h(e,t){return`https://${e}/${t}`}},7701:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});let n=function(e){return e.CloseAdPremiumBanner="CloseAdPremiumBanner",e.OverloadPageReady="OverloadPageReady",e.OverloadTimerReady="OverloadTimerReady",e}({})},8467:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});let n=function(e){return e.FailedVideoOpen="FAILED_VIDEO_OPEN",e.DirectVideoOpen="DIRECT_VIDEO_OPEN",e.ShowPageLoader="SHOW_PAGE_LOADER",e.VideoOpenerReady="VIDEO_OPENER_READY",e.NetworkConnectionRetry="NETWORK_CONNECTION_RETRY",e.NetworkConnectionRetrySuccess="NETWORK_CONNECTION_RETRY_SUCCESS",e.NetworkConnectionRetryFail="NETWORK_CONNECTION_RETRY_FAIL",e.UpdateProxyData="UPDATE_PROXY_DATA",e.OpenPopup="OPEN_POPUP",e.OpenPopupPayment="OPEN_POPUP_PAYMENT",e.NavigateToFreeTrial="NAVIGATE_TO_FREE_TRIAL",e.NavigateToPayment="NAVIGATE_TO_PAYMENT",e.PopupReady="POPUP_READY",e}({})},1362:(e,t,r)=>{"use strict";r.d(t,{O:()=>n,n:()=>o});let n=function(e){return e.UpdateProxyPremiumData="updateProxyPremiumData",e.UpdateSubscriptionInfo="updateSubscriptionInfo",e.ShowAdPremiumBanner="showAdPremiumBanner",e}({});async function o(e){return await chrome.alarms.get(e)}},2982:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});let n=function(e){return e.UpdateProxyData="updateProxyData",e.EnableProxy="enableProxy",e.DisableProxy="disableProxy",e.EnableProxyOnFail="EnableProxyOnFail",e.UpdateMetaApiData="updateMetaApiData",e}({})},1735:(e,t,r)=>{"use strict";r.d(t,{G:()=>d,LocalStoragePremiumKey:()=>i,c:()=>u,getLocalStoragePremiumData:()=>c});var n=r(5772),o=r(2718),s=r(7036),a=r(9813);let i=function(e){return e.UserId="userId",e.DaysLeft="daysLeft",e.HasPremium="hasPremium",e.PaidUntil="paidUntil",e.SecondsLeft="secondsLeft",e.Status="status",e.IsSubscriptionInfoError="isSubscriptionInfoError",e.IsChangeDeviceError="isChangeDeviceError",e.HasUsedTrial="hasUsedTrial",e.IsAdBannerShown="isAdBannerShown",e}({});async function c(e){return Array.isArray(e),chrome.storage.local.get(e)}async function u(e){await chrome.storage.local.set(e)}async function d(){try{await u({isSubscriptionInfoError:!1});const{apiBaseUrl:e}=await(0,o.u)(),{deviceId:t,deviceIp:r}=await(0,a.vc)([a.UZ.DeviceId,a.UZ.DeviceIp]),{userId:d}=await c(i.UserId),l=await(0,n.Qm)(e,{userId:d,deviceId:t,deviceIp:r});if("error"in l){if("changeDevice"===l.error)return void await u({isChangeDeviceError:!0});throw"requestBlockedError"===l.error&&await(0,s._5)({requestBlockedError:"request fetchSubscriptionInfo is probably blocked"}),new Error(l.error)}const{daysLeft:h,paidUntil:p,status:f,secondsLeft:m}=l;await u({daysLeft:h,paidUntil:p,status:f,secondsLeft:m});const{hasPremium:y}=await c(i.HasPremium),{currentState:w}=await(0,a.vc)(a.UZ.CurrentState);"Paid"!==f||y?"Expired"===f&&y&&"connected"===w&&await(0,a.lR)({targetState:"disconnected"}):await u({hasPremium:!0})}catch(e){console.error(e),await u({isSubscriptionInfoError:!0})}}},9813:(e,t,r)=>{"use strict";r.d(t,{UZ:()=>n,lR:()=>s,vc:()=>o});let n=function(e){return e.FeedbackProvided="feedbackProvided",e.TargetState="targetState",e.CurrentState="currentState",e.Theme="theme",e.ConnectionCount="connectionCount",e.DeviceId="deviceId",e.DeviceIp="deviceIp",e.IsBrowserError="isBrowserError",e}({});async function o(e){return Array.isArray(e),chrome.storage.local.get(e)}async function s(e){await chrome.storage.local.set(e)}},2718:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(4126),o=r(7036);async function s(){const{metaApiData:e}=await(0,o.S7)(o.lP.MetaApiData);if(void 0!==e)return e;const t=await(0,n.I)();return await(0,o._5)({metaApiData:t}),t}},7036:(e,t,r)=>{"use strict";r.d(t,{S7:()=>o,_5:()=>s,f6:()=>a,lP:()=>n});let n=function(e){return e.IsProxyControlledByOtherExtensions="isProxyControlledByOtherExtensions",e.PopupWasOpened="popupWasOpened",e.MetaApiData="metaApiData",e.IsNetworkError="isNetworkError",e.ConnectRetryFailed="connectRetryFailed",e.LastProxyHost="lastProxyHost",e.LastProxyPort="lastProxyPort",e.IsInitialized="isInitialized",e.ApiHttpErrors="apiHttpErrors",e.ApiHttpSuccess="apiHttpSuccess",e.BrowserProxySettings="browserProxySettings",e.RequestBlockedError="requestBlockedError",e}({});async function o(e){return Array.isArray(e),chrome.storage.session.get(e)}async function s(e){await chrome.storage.session.set(e)}async function a(e,t){await s({lastProxyHost:e,lastProxyPort:t})}},1450:(e,t,r)=>{"use strict";r.d(t,{d:()=>u});var n=r(4987),o=r(1735),s=r(2296),a=r(2718),i=r(7036),c=r(9367);async function u(){try{const[e,t,{apiBaseUrl:r}]=await Promise.all([(0,c.I)(),(0,c.W)(),(0,a.u)()]),{userId:i}=await async function({url:e,deviceId:t,deviceIp:r}){return await s.o.post(e,{json:{deviceId:t,deviceIp:r,withPaymentLink:!1}}).json()}({url:(0,n.TV)(r),deviceId:e,deviceIp:t});await(0,o.c)({userId:i,hasPremium:!1})}catch(e){throw e instanceof Error&&"Failed to fetch"===e.message&&await(0,i._5)({requestBlockedError:"request createNewUser is probably blocked"}),e}}},9367:(e,t,r)=>{"use strict";r.d(t,{I:()=>o,W:()=>s});var n=r(9813);async function o(){const{deviceId:e}=await(0,n.vc)(n.UZ.DeviceId);return e||await async function(){const e=crypto.randomUUID();return await(0,n.lR)({deviceId:e}),e}()}async function s(){try{const{deviceIp:e}=await(0,n.vc)(n.UZ.DeviceIp);if(e)return e;const t=await fetch("https://api.ipify.org?format=json"),r=await t.json();return await(0,n.lR)({deviceIp:r.ip}),r.ip}catch(e){console.warn("Error fetching public IP:",e)}}},4765:(e,t,r)=>{"use strict";r.d(t,{q:()=>p});var n=r(9027),o=r(4292),s=r(2296),a=r(4987),i=r(1362),c=r(2982),u=r(1735),d=r(9813),l=r(2718);const h=[{mode:"PROXY",domain:".play.google.com"},{mode:"PROXY",domain:".youtubekids.com"}];async function p({apiBaseUrl:e,deviceId:t,deviceIp:r,onFail:i}){const{userId:c,hasPremium:d}=await(0,u.getLocalStoragePremiumData)([u.LocalStoragePremiumKey.UserId,u.LocalStoragePremiumKey.HasPremium]);if(c&&d){const n=await async function({apiBaseUrl:e,deviceId:t,deviceIp:r,userId:n,onFail:i}){try{const o=(0,a.wD)(e);return await s.o.post(o,{json:{userId:n,deviceId:t,deviceIp:r,onFail:i}}).json()}catch(e){if(console.error(e),e instanceof o.H){if((await e.response.json()).errors.find((e=>"change_device"===e.code)))return{error:"changeDevice"};if(500===e.response.status)return{error:"internal"}}return{error:"unknown"}}}({apiBaseUrl:e,userId:c,deviceId:t,deviceIp:r,onFail:i});if("error"in n)throw"changeDevice"===n.error&&await(0,u.c)({isChangeDeviceError:!0}),new Error(n.error);return{...n,additionalDomains:h}}return await(0,n.n)({apiBaseUrl:e,deviceId:t,deviceIp:r,onFail:i})}async function f(){const{status:e,hasPremium:t}=await(0,u.getLocalStoragePremiumData)([u.LocalStoragePremiumKey.Status,u.LocalStoragePremiumKey.HasPremium]);t&&"Paid"!==e?await(0,d.lR)({targetState:"disconnected"}):await chrome.alarms.create(c.F.EnableProxy,{delayInMinutes:0})}async function m(){if(!await(0,i.n)(i.O.UpdateProxyPremiumData)){const{proxyUpdatePeriodPremium:e,proxyUpdatePeriod:t}=await(0,l.u)(),{hasPremium:r}=await(0,u.getLocalStoragePremiumData)(u.LocalStoragePremiumKey.HasPremium),n=r?e:t;await chrome.alarms.create(i.O.UpdateProxyPremiumData,{periodInMinutes:n,delayInMinutes:n})}}chrome.alarms.onAlarm.addListener((async e=>{if(e.name===i.O.UpdateProxyPremiumData){const{currentState:e}=await(0,d.vc)(d.UZ.CurrentState);"connected"===e&&await f()}})),chrome.alarms.onAlarm.addListener((async e=>{e.name===i.O.UpdateSubscriptionInfo&&await(0,u.G)()})),chrome.storage.session.onChanged.addListener((async e=>{e.isInitialized?.newValue&&(await m(),await(0,i.n)(i.O.UpdateSubscriptionInfo)||await chrome.alarms.create(i.O.UpdateSubscriptionInfo,{periodInMinutes:25,delayInMinutes:25}))})),chrome.storage.local.onChanged.addListener((async e=>{if(e.hasPremium){await m();const{currentState:e}=await(0,d.vc)(d.UZ.CurrentState);"connected"===e&&await f()}}))},968:(e,t,r)=>{"use strict";r.d(t,{b:()=>l,B:()=>d});var n=r(9813),o=r(9367),s=r(9027),a=r(2982),i=r(2718),c=r(7036);const u=({host:e,port:t,additionalDomains:r})=>{if(!r)return`\n  function FindProxyForURL(url, host) {\n    if (dnsDomainIs(host, ".music.youtube.com")) {\n      return "DIRECT";\n    }\n\n    if (dnsDomainIs(host, ".googlevideo.com") ||\n        dnsDomainIs(host, ".youtube.com") ||\n        dnsDomainIs(host, ".ytimg.com") ||\n        dnsDomainIs(host, ".ggpht.com")) {\n        return "PROXY ${e}:${t}";\n    }\n    return "DIRECT";\n  }\n  `;const n=r.filter((({mode:e})=>"DIRECT"===e)),o=r.filter((({mode:e})=>"PROXY"===e)),s=n.map((({domain:e})=>`dnsDomainIs(host, "${e}")`)).join(" || "),a=o.map((({domain:e})=>`dnsDomainIs(host, "${e}")`)).join(" || ");return`\n  function FindProxyForURL(url, host) {\n    if (dnsDomainIs(host, ".music.youtube.com") ${s?` || ${s}`:""}) {\n      return "DIRECT";\n    }\n\n    if (dnsDomainIs(host, ".googlevideo.com") ||\n        dnsDomainIs(host, ".youtube.com") ||\n        dnsDomainIs(host, ".ytimg.com") ||\n        dnsDomainIs(host, ".ggpht.com") ${a?` || ${a}`:""}) {\n        return "PROXY ${e}:${t}";\n    }\n    return "DIRECT";\n  }\n  `},d=new class{_fetchProxyData=s.n;set fetchProxyData(e){this._fetchProxyData=e}get fetchProxyData(){return this._fetchProxyData}};async function l(){const{targetState:e}=await(0,n.vc)([n.UZ.TargetState]);void 0===e?await(0,n.lR)({targetState:"connected"}):await h()}async function h(){const{targetState:e,currentState:t}=await(0,n.vc)([n.UZ.TargetState,n.UZ.CurrentState]);"connected"===e?await p():"disconnected"===e&&"disconnected"!==t&&f()}async function p({onFail:e}={}){try{await(0,n.lR)({currentState:"connecting"});const[{apiBaseUrl:t},r,s]=await Promise.all([(0,i.u)(),(0,o.I)(),(0,o.W)()]);!function({host:e,port:t,additionalDomains:r}){chrome.proxy.settings.set({value:{mode:"pac_script",pacScript:{data:u({host:e,port:t,additionalDomains:r})}},scope:"regular"},(async()=>{if(chrome.runtime.lastError)await(0,n.lR)({currentState:"error"}),console.error("Error setting proxy:",chrome.runtime.lastError.message);else{const{connectionCount:r,targetState:o}=await(0,n.vc)([n.UZ.ConnectionCount,n.UZ.TargetState]),s=r??0;"disconnected"===o?chrome.alarms.create(a.F.DisableProxy,{delayInMinutes:0}):(await(0,c.f6)(e,t),await(0,n.lR)({currentState:"connected",connectionCount:s+1}))}}))}(await d.fetchProxyData({apiBaseUrl:t,deviceId:r,deviceIp:s,onFail:e}))}catch(e){console.error("Error loading configuration:",e),await(0,n.lR)({currentState:"error"})}}function f(){chrome.proxy.settings.clear({scope:"regular"},(async()=>{const{targetState:e}=await(0,n.vc)(n.UZ.TargetState);chrome.runtime.lastError?(await(0,n.lR)({currentState:"error"}),console.error("Error clearing proxy settings:",chrome.runtime.lastError.message)):"connected"===e?await chrome.alarms.create(a.F.EnableProxy,{delayInMinutes:0}):await(0,n.lR)({currentState:"disconnected"})}))}chrome.storage.onChanged.addListener((async e=>{e.targetState&&await h()})),chrome.alarms.onAlarm.addListener((e=>{e.name===a.F.DisableProxy&&f()})),chrome.alarms.onAlarm.addListener((async e=>{e.name===a.F.EnableProxy&&await p()})),chrome.alarms.onAlarm.addListener((async e=>{e.name===a.F.EnableProxyOnFail&&await p({onFail:!0})}))},6713:(e,t,r)=>{"use strict";r.a(e,(async(e,t)=>{try{var n=r(9813),o=r(4765),s=r(968),a=r(1450),i=r(1735),c=r(7036),u=r(2718),d=(r(3701),r(8467)),l=r(5772),h=r(6553),p=r(1362),f=r(7701),m=r(5015),y=r(5487).A;async function w(){try{const{userId:e}=await(0,i.getLocalStoragePremiumData)(i.LocalStoragePremiumKey.UserId);e||await(0,a.d)(),await(0,i.G)()}catch(e){console.error(e)}}async function g(){try{if("openPopup"in chrome.action){const e=await chrome.windows.getCurrent();e.id&&await chrome.windows.update(e.id,{focused:!0}),await chrome.action.openPopup({windowId:e.id})}}catch(e){console.warn(e)}}async function b(e){try{const t=Number.parseInt(chrome.runtime.getManifest().version.replace(/\./g,"")),r=Number.parseInt(e.replace(/\./g,"")),o=await(0,u.u)(),s=Number.parseInt(o.showOnUpdateVersion?.replace(/\./g,"")??t.toString()),[{apiBaseUrl:a},{deviceId:c,deviceIp:d},{userId:p,hasPremium:f}]=await Promise.all([(0,u.u)(),(0,n.vc)([n.UZ.DeviceId,n.UZ.DeviceIp]),(0,i.getLocalStoragePremiumData)([i.LocalStoragePremiumKey.UserId,i.LocalStoragePremiumKey.HasPremium])]);if(s>r&&p&&c&&!f){const{status:e}=await(0,l.YP)(a,{userId:p,deviceId:c,deviceIp:d,tariff:h.d.FreeTrial});"allowed"===e&&await chrome.tabs.create(y.solve({url:"https://storage.googleapis.com/uboost/update/index.html"}))}}catch(e){console.error(e)}}async function v(){try{const{isBrowserError:e}=await(0,n.vc)(n.UZ.IsBrowserError);e?(0,n.lR)({currentState:"disconnected",targetState:"disconnected"}):(await(0,u.u)(),await(0,s.b)(),await(0,c._5)({isInitialized:!0}))}catch(e){console.error(e),await(0,n.lR)({currentState:"error"})}}chrome.runtime.onMessage.addListener((async e=>{e.action===d.E.OpenPopup&&(await g(),chrome.runtime.onMessage.addListener((async function e(t){t.action===d.E.PopupReady&&(await chrome.runtime.sendMessage({action:d.E.NavigateToFreeTrial}),chrome.runtime.onMessage.removeListener(e))})))})),chrome.runtime.onMessage.addListener((async e=>{e.action===d.E.OpenPopupPayment&&(await g(),chrome.runtime.onMessage.addListener((async function e(t){t.action===d.E.PopupReady&&(await chrome.runtime.sendMessage({action:d.E.NavigateToPayment}),chrome.runtime.onMessage.removeListener(e))})))})),chrome.runtime.onInstalled.addListener((async e=>{await w(),e.reason===chrome.runtime.OnInstalledReason.INSTALL&&await g(),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&await b(e.previousVersion??"6.1.0")})),chrome.alarms.onAlarm.addListener((async e=>{const t=e.name;if(t===p.O.ShowAdPremiumBanner){const{hasPremium:e,status:r}=await(0,i.getLocalStoragePremiumData)([i.LocalStoragePremiumKey.HasPremium,i.LocalStoragePremiumKey.Status]);e&&"Paid"===r?await(0,i.c)({isAdBannerShown:!1}):await(0,i.c)({isAdBannerShown:!0}),await chrome.alarms.clear(t)}})),chrome.runtime.onMessage.addListener((async e=>{e.action===f.b.CloseAdPremiumBanner&&await chrome.alarms.create(p.O.ShowAdPremiumBanner,{periodInMinutes:1440})})),chrome.storage.local.onChanged.addListener((async e=>{e.hasPremium&&await(0,i.c)({isAdBannerShown:!e.hasPremium.newValue})})),chrome.webRequest.onBeforeRedirect.addListener((async e=>{if(e.redirectUrl.includes("google.com/sorry")&&e.url.includes("youtube.com/watch")){const{currentState:t}=await(0,n.vc)(n.UZ.CurrentState);"connected"===t&&await(0,m.tP)(e.url,e.tabId)}}),{urls:["*://*.youtube.com/*"],types:["main_frame"]},[]),s.B.fetchProxyData=o.q;const{isInitialized:P}=await(0,c.S7)(c.lP.IsInitialized);P||await v(),t()}catch(S){t(S)}}),1)},5015:(e,t,r)=>{"use strict";r.d(t,{tP:()=>s});var n=r(8467);function o(e){return new URL(e).searchParams.get("t")}async function s(e,t){const r=function(e){return new URL(e).searchParams.get("v")}(e);if(r){const s=function(e){const t=new URL(e).searchParams.get("v");return t?`/watch?v=${t}`:e}(e),a=await chrome.tabs.query({active:!0,currentWindow:!0}),i=a.length>0?a[0]:void 0;i?.id===t&&(chrome.runtime.onMessage.addListener((async function a(i,{tab:c}){i.action===n.E.VideoOpenerReady&&c?.id===t&&(await chrome.tabs.sendMessage(t,{action:n.E.DirectVideoOpen,payload:{watchUrl:s,videoId:r,time:o(e)}}),chrome.runtime.onMessage.removeListener(a))})),await chrome.tabs.update(t,{url:"https://www.youtube.com"}))}}},3701:(e,t,r)=>{"use strict";var n=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},s=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},a=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},i=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},c=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=3,l=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],h=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(e){var t=function(e){return""!==e&&l.reduce((function(t,r){var n=r[0],o=r[1];if(t)return t;var s=o.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],s=t[1];if("searchbot"===r)return new i;var c=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);c?c.length<d&&(c=n(n([],c,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(d-c.length),!0)):c=[];var p=c.join("."),f=function(e){for(var t=0,r=h.length;t<r;t++){var n=h[t],o=n[0];if(n[1].exec(e))return o}return null}(e),m=u.exec(e);return m&&m[1]?new a(r,p,f,m[1]):new o(r,p,f)}var f=r(9813),m=r(8467),y=r(7036),w=r(2718),g=r(2982);const b=".youtube.com/generate_204",v=".youtube.com/youtubei",P=".youtube.com/api/stats",S=".googlevideo.com/videoplayback";var _=r(5487).A;async function I(){const{currentState:e,theme:t}=await(0,f.vc)([f.UZ.CurrentState,f.UZ.Theme]);let r;r="connected"===e?"/public/icons/icon128.png":"light"===t?"/public/icons/icon128-disabled-light.png":"/public/icons/icon128-disabled-dark.png",await chrome.action.setIcon(_.solve({path:r}))}var E=r(5487).A;async function D(e){try{await async function(e){const t=e.value;await(0,y._5)({browserProxySettings:{levelOfControl:e.levelOfControl,pacScript:t?.pacScript?.data}})}(e);const{currentState:t}=await(0,f.vc)(f.UZ.CurrentState);if("connected"!==t)return;if("controlled_by_other_extensions"===e.levelOfControl){const e=await chrome.windows.getCurrent(),t=await chrome.tabs.query({active:!0,currentWindow:!0}),r=t.length>0?t[0]:void 0;await(0,y._5)({isProxyControlledByOtherExtensions:!0}),e.id&&r?.url?.includes("youtube.com")?(await chrome.windows.update(e.id,{focused:!0}),await chrome.action.openPopup({windowId:e.id})):(chrome.tabs.onActivated.addListener(O),chrome.tabs.onUpdated.addListener($))}else"controlled_by_this_extension"===e.levelOfControl&&await(0,y._5)({isProxyControlledByOtherExtensions:!1,popupWasOpened:!1})}catch(e){console.warn(e)}}async function O(e){const t=await chrome.tabs.get(e.tabId),r=await chrome.windows.getCurrent();if(r.id===t.windowId&&t.url?.includes("youtube.com")){const{isProxyControlledByOtherExtensions:e,popupWasOpened:t}=await(0,y.S7)([y.lP.IsProxyControlledByOtherExtensions,y.lP.PopupWasOpened]);e&&!t?await chrome.action.openPopup({windowId:r.id}):chrome.tabs.onActivated.removeListener(O)}}async function $(e,t,r){const n=await chrome.windows.getCurrent();if("complete"===t.status&&n.id===r.windowId&&r.url?.includes("youtube.com")){const{isProxyControlledByOtherExtensions:e,popupWasOpened:t}=await(0,y.S7)([y.lP.IsProxyControlledByOtherExtensions,y.lP.PopupWasOpened]);e&&!t?await chrome.action.openPopup({windowId:n.id}):chrome.tabs.onUpdated.removeListener($)}}chrome.runtime.onInstalled.addListener((async e=>{if(e.reason===chrome.runtime.OnInstalledReason.INSTALL)try{await chrome.tabs.create(E.solve({url:"https://storage.googleapis.com/uboost/welcome/index.html"}));const{supportedBrowsers:e}=await(0,w.u)(),r=t?p(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new c:"undefined"!=typeof navigator?p(navigator.userAgent):"undefined"!=typeof process&&process.version?new s(process.version.slice(1)):null;if(!(r instanceof o&&e.includes(r.name))&&(await(0,f.lR)({isBrowserError:!0}),"openPopup"in chrome.action)){const e=await chrome.windows.getCurrent();e.id&&await chrome.windows.update(e.id,{focused:!0}),await chrome.action.openPopup({windowId:e.id})}}catch(e){console.error(e),await(0,f.lR)({currentState:"error"})}var t})),chrome.tabs.onActivated.addListener((async e=>{const{currentState:t}=await(0,f.vc)(f.UZ.CurrentState),r=await chrome.tabs.get(e.tabId);"connected"===t&&r.id&&r.url?.includes("google.com/sorry")&&r.title?.includes("youtube.com/watch")&&(await chrome.tabs.sendMessage(r.id,{action:m.E.ShowPageLoader}),await chrome.tabs.update(r.id,{url:r.title}))})),chrome.tabs.onUpdated.addListener((async e=>{const t=await chrome.tabs.query({active:!0,currentWindow:!0}),r=t.length>0?t[0]:void 0,{currentState:n}=await(0,f.vc)(f.UZ.CurrentState);r?.id===e&&"connected"===n&&r.url?.includes("google.com/sorry")&&r.title?.includes("youtube.com/watch")&&(await chrome.tabs.sendMessage(r.id,{action:m.E.ShowPageLoader}),await chrome.tabs.update(r.id,{url:r.title}))})),chrome.runtime.onMessage.addListener((async(e,{tab:t})=>{e.action===m.E.FailedVideoOpen&&t?.id&&(chrome.tabs.onUpdated.addListener((async function r(n,o){n===t.id&&"complete"===o.status&&(await chrome.tabs.sendMessage(n,e),chrome.tabs.onUpdated.removeListener(r))})),await chrome.tabs.update({url:"https://www.youtube.com/"}))})),chrome.proxy.settings.get({},D),chrome.proxy.settings.onChange.addListener(D),chrome.storage.session.setAccessLevel&&chrome.storage.session.setAccessLevel({accessLevel:"TRUSTED_AND_UNTRUSTED_CONTEXTS"}),chrome.webRequest.onErrorOccurred.addListener(function(){let e=!1;return async t=>{const{isNetworkError:r,connectRetryFailed:n}=await(0,y.S7)([y.lP.IsNetworkError,y.lP.ConnectRetryFailed]),{currentState:o}=await(0,f.vc)(f.UZ.CurrentState),s="connected"===o;if(a=t.error,i=t.url,(function(e,t){return"net::ERR_PROXY_CONNECTION_FAILED"===e&&[b,v,P].some((e=>t.includes(e)))}(a,i)||function(e,t){return"net::ERR_CONNECTION_RESET"===e&&[v,S].some((e=>t.includes(e)))}(a,i)||function(e,t){return"net::ERR_TIMED_OUT"===e&&[v,S].some((e=>t.includes(e)))}(a,i)||function(e,t){return"net::ERR_CONNECTION_CLOSED"===e&&[v].some((e=>t.includes(e)))}(a,i))&&s&&!e&&!n){if(e=!0,r)await async function(){const e=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([e.map((e=>e.id?chrome.tabs.sendMessage(e.id,{action:m.E.NetworkConnectionRetryFail}):null))])}(),await(0,y._5)({connectRetryFailed:!0});else{await(0,y._5)({isNetworkError:!0}),await async function(){const e=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([e.map((e=>e.id?chrome.tabs.sendMessage(e.id,{action:m.E.NetworkConnectionRetry}):null))])}(),await chrome.alarms.create(g.F.EnableProxyOnFail,{delayInMinutes:0});const e=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all(e.map((e=>e.id?chrome.tabs.reload(e.id):null)))}e=!1}var a,i}}(),{urls:["*://*.youtube.com/*"]}),chrome.webRequest.onCompleted.addListener((async function(e){const{isNetworkError:t}=await(0,y.S7)(y.lP.IsNetworkError);var r;r=e.url,[b,v,P,S].some((e=>r.includes(e)))&&t&&(await(0,y._5)({isNetworkError:!1,connectRetryFailed:!1}),await async function(){const e=await chrome.tabs.query({url:"*://*.youtube.com/*"});await Promise.all([e.map((e=>e.id?chrome.tabs.sendMessage(e.id,{action:m.E.NetworkConnectionRetrySuccess}):null))])}())}),{urls:["*://*.youtube.com/*"]}),chrome.storage.onChanged.addListener((async e=>{e.currentState&&await I()})),I()},4542:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,r="millisecond",n="second",o="minute",s="hour",a="day",i="week",c="month",u="quarter",d="year",l="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},w={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),o=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(o,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),o=t.clone().add(n,c),s=r-o<0,a=t.clone().add(n+(s?-1:1),c);return+(-(n+(r-o)/(s?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:i,d:a,D:l,h:s,m:o,s:n,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=m;var v="$isDayjsObject",P=function(e){return e instanceof E||!(!e||!e[v])},S=function e(t,r,n){var o;if(!t)return g;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(o=s),r&&(b[s]=r,o=s);var a=t.split("-");if(!o&&a.length>1)return e(a[0])}else{var i=t.name;b[i]=t,o=i}return!n&&o&&(g=o),o||!n&&g},_=function(e,t){if(P(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new E(r)},I=w;I.l=S,I.i=P,I.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var y=m.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var o=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return I},y.isValid=function(){return!(this.$d.toString()===h)},y.isSame=function(e,t){var r=_(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return _(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<_(e)},y.$g=function(e,t,r){return I.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,u=!!I.u(t)||t,h=I.p(e),p=function(e,t){var n=I.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return u?n:n.endOf(a)},f=function(e,t){return I.w(r.toDate()[e].apply(r.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,y=this.$M,w=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case d:return u?p(1,0):p(31,11);case c:return u?p(1,y):p(0,y+1);case i:var b=this.$locale().weekStart||0,v=(m<b?m+7:m)-b;return p(u?w-v:w+(6-v),y);case a:case l:return f(g+"Hours",0);case s:return f(g+"Minutes",1);case o:return f(g+"Seconds",2);case n:return f(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var i,u=I.p(e),h="set"+(this.$u?"UTC":""),p=(i={},i[a]=h+"Date",i[l]=h+"Date",i[c]=h+"Month",i[d]=h+"FullYear",i[s]=h+"Hours",i[o]=h+"Minutes",i[n]=h+"Seconds",i[r]=h+"Milliseconds",i)[u],f=u===a?this.$D+(t-this.$W):t;if(u===c||u===d){var m=this.clone().set(l,1);m.$d[p](f),m.init(),this.$d=m.set(l,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[I.p(e)]()},y.add=function(r,u){var l,h=this;r=Number(r);var p=I.p(u),f=function(e){var t=_(h);return I.w(t.date(t.date()+Math.round(e*r)),h)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===a)return f(1);if(p===i)return f(7);var m=(l={},l[o]=e,l[s]=t,l[n]=1e3,l)[p]||1,y=this.$d.getTime()+r*m;return I.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",o=I.z(this),s=this.$H,a=this.$m,i=this.$M,c=r.weekdays,u=r.months,d=r.meridiem,l=function(e,r,o,s){return e&&(e[r]||e(t,n))||o[r].slice(0,s)},p=function(e){return I.s(s%12||12,e,"0")},m=d||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(f,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return I.s(t.$y,4,"0");case"M":return i+1;case"MM":return I.s(i+1,2,"0");case"MMM":return l(r.monthsShort,i,u,3);case"MMMM":return l(u,i);case"D":return t.$D;case"DD":return I.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return l(r.weekdaysMin,t.$W,c,2);case"ddd":return l(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(s);case"HH":return I.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return m(s,a,!0);case"A":return m(s,a,!1);case"m":return String(a);case"mm":return I.s(a,2,"0");case"s":return String(t.$s);case"ss":return I.s(t.$s,2,"0");case"SSS":return I.s(t.$ms,3,"0");case"Z":return o}return null}(e)||o.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,l,h){var p,f=this,m=I.p(l),y=_(r),w=(y.utcOffset()-this.utcOffset())*e,g=this-y,b=function(){return I.m(f,y)};switch(m){case d:p=b()/12;break;case c:p=b();break;case u:p=b()/3;break;case i:p=(g-w)/6048e5;break;case a:p=(g-w)/864e5;break;case s:p=g/t;break;case o:p=g/e;break;case n:p=g/1e3;break;default:p=g}return h?p:I.a(p)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=S(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return I.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},m}(),D=E.prototype;return _.prototype=D,[["$ms",r],["$s",n],["$m",o],["$H",s],["$W",a],["$M",c],["$y",d],["$D",l]].forEach((function(e){D[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,E,_),e.$i=!0),_},_.locale=S,_.isDayjs=P,_.unix=function(e){return _(1e3*e)},_.en=b[g],_.Ls=b,_.p={},_}()},2787:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,s){var a=o.prototype;s.utc=function(e){return new o({date:e,utc:!0,args:arguments})},a.utc=function(t){var r=s(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var i=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),i.call(this,e)};var c=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else c.call(this)};var u=a.utcOffset;a.utcOffset=function(n,o){var s=this.$utils().u;if(s(n))return this.$u?0:s(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var o=(""+n[0]).match(r)||["-",0,0],s=o[0],a=60*+o[1]+ +o[2];return 0===a?0:"+"===s?a:-a}(n),null===n))return this;var a=Math.abs(n)<=16?60*n:n,i=this;if(o)return i.$offset=a,i.$u=0===n,i;if(0!==n){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(i=this.local().add(a+c,e)).$offset=a,i.$x.$localOffset=c}else i=this.utc();return i};var d=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var l=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var h=a.diff;a.diff=function(e,t,r){if(e&&this.$u===e.$u)return h.call(this,e,t,r);var n=this.local(),o=s(e).local();return h.call(n,o,t,r)}}}()},1748:(e,t,r)=>{"use strict";r.d(t,{Ky:()=>l});var n=r(4292),o=r(7547),s=r(390),a=r(8261),i=r(3797),c=r(5409),u=r(1008),d=r(4719);class l{static create(e,t){const r=new l(e,t),o=async()=>{if("number"==typeof r._options.timeout&&r._options.timeout>d.TK)throw new RangeError(`The \`timeout\` option cannot be greater than ${d.TK}`);await Promise.resolve();let e=await r._fetch();for(const t of r._options.hooks.afterResponse){const n=await t(r.request,r._options,r._decorateResponse(e.clone()));n instanceof globalThis.Response&&(e=n)}if(r._decorateResponse(e),!e.ok&&r._options.throwHttpErrors){let t=new n.H(e,r.request,r._options);for(const e of r._options.hooks.beforeError)t=await e(t);throw t}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!d.b0)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(e.clone(),r._options.onDownloadProgress)}return e},s=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[e,n]of Object.entries(d.hT))s[e]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||n);const o=(await s).clone();if("json"===e){if(204===o.status)return"";if(0===(await o.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await o.text())}return o[e]()};return s}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:(0,s.lF)(this._input.headers,t.headers),hooks:(0,s.XN)({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:(0,a.q)(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:(0,a.U)(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(d.xM){this.abortController=new globalThis.AbortController;const e=this._options.signal??this._input.signal;e?.addEventListener("abort",(()=>{this.abortController.abort(e.reason)})),this._options.signal=this.abortController.signal}if(d.xr&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const e="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,e);!(d.zq&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof o.M)throw e;if(e instanceof n.H){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const t=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=1e3*Number(t);Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse("2024-01-01")&&(e-=Date.now());const r=this._options.retry.maxRetryAfter??e;return e<r?e:r}if(413===e.response.status)throw e}const t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const r=Math.min(this._calculateRetryDelay(t),d.TK);if(this._retryCount<1)throw t;await(0,c.A)(r,{signal:this._options.signal});for(const e of this._options.hooks.beforeRetry)if(await e({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===d.ds)return;return this._retry(e)}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}const e=(0,u.I)(this.request,this._options),t=this.request;return this.request=t.clone(),!1===this._options.timeout?this._options.fetch(t,e):(0,i.A)(t,e,this.abortController,this._options)}_stream(e,t){const r=Number(e.headers.get("content-length"))||0;let n=0;return 204===e.status?(t&&t({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const s=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await async function e(){const{done:a,value:i}=await s.read();a?o.close():(t&&(n+=i.byteLength,t({percent:0===r?0:n/r,transferredBytes:n,totalBytes:r},i)),o.enqueue(i),await e())}()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}},4719:(e,t,r)=>{"use strict";r.d(t,{E1:()=>i,Pu:()=>h,TK:()=>u,b0:()=>s,ds:()=>d,hT:()=>c,iA:()=>l,xM:()=>o,xr:()=>n,zq:()=>a});const n=(()=>{let e=!1,t=!1;const r="function"==typeof globalThis.ReadableStream,n="function"==typeof globalThis.Request;if(r&&n)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(e){if(e instanceof Error&&"unsupported BodyInit type"===e.message)return!1;throw e}return e&&!t})(),o="function"==typeof globalThis.AbortController,s="function"==typeof globalThis.ReadableStream,a="function"==typeof globalThis.FormData,i=["get","post","put","patch","head","delete"],c={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},u=2147483647,d=Symbol("stop"),l={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},h={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0}},4292:(e,t,r)=>{"use strict";r.d(t,{H:()=>n});class n extends Error{response;request;options;constructor(e,t,r){const n=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}},7547:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});class n extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}},3036:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i});var n=r(1748),o=r(4719),s=r(390);const a=e=>{const t=(t,r)=>n.Ky.create(t,(0,s.sT)(e,r));for(const r of o.E1)t[r]=(t,o)=>n.Ky.create(t,(0,s.sT)(e,o,{method:r}));return t.create=e=>a((0,s.sT)(e)),t.extend=t=>("function"==typeof t&&(t=t(e??{})),a((0,s.sT)(e,t))),t.stop=o.ds,t},i=a()},5409:(e,t,r)=>{"use strict";async function n(e,{signal:t}){return new Promise(((r,n)=>{function o(){clearTimeout(s),n(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",o,{once:!0}));const s=setTimeout((()=>{t?.removeEventListener("abort",o),r()}),e)}))}r.d(t,{A:()=>n})},4912:(e,t,r)=>{"use strict";r.d(t,{G:()=>n});const n=e=>null!==e&&"object"==typeof e},390:(e,t,r)=>{"use strict";r.d(t,{XN:()=>i,lF:()=>s,sT:()=>o});var n=r(4912);const o=(...e)=>{for(const t of e)if((!(0,n.G)(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return c({},...e)},s=(e={},t={})=>{const r=new globalThis.Headers(e),n=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[e,t]of o.entries())n&&"undefined"===t||void 0===t?r.delete(e):r.set(e,t);return r};function a(e,t,r){return Object.hasOwn(t,r)&&void 0===t[r]?[]:c(e[r]??[],t[r]??[])}const i=(e={},t={})=>({beforeRequest:a(e,t,"beforeRequest"),beforeRetry:a(e,t,"beforeRetry"),afterResponse:a(e,t,"afterResponse"),beforeError:a(e,t,"beforeError")}),c=(...e)=>{let t={},r={},o={};for(const a of e)if(Array.isArray(a))Array.isArray(t)||(t=[]),t=[...t,...a];else if((0,n.G)(a)){for(let[e,r]of Object.entries(a))(0,n.G)(r)&&e in t&&(r=c(t[e],r)),t={...t,[e]:r};(0,n.G)(a.hooks)&&(o=i(o,a.hooks),t.hooks=o),(0,n.G)(a.headers)&&(r=s(r,a.headers),t.headers=r)}return t}},8261:(e,t,r)=>{"use strict";r.d(t,{U:()=>a,q:()=>o});var n=r(4719);const o=e=>n.E1.includes(e)?e.toUpperCase():e,s={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},a=(e={})=>{if("number"==typeof e)return{...s,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...s,...e}}},1008:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(4719);const o=(e,t)=>{const r={};for(const o in t)o in n.Pu||o in n.iA||o in e||(r[o]=t[o]);return r}},3797:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(7547);async function o(e,t,r,o){return new Promise(((s,a)=>{const i=setTimeout((()=>{r&&r.abort(),a(new n.M(e))}),o.timeout);o.fetch(e,t).then(s).catch(a).then((()=>{clearTimeout(i)}))}))}},5487:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n='Could not resolve file path. Ensure the file exists in the "public" or "pages" directory.',o=function(e){return console.error(`Could not resolve path ${e}. Either add it to the "public" directory or create a page in the "pages" directory.`),e},s=function(e){return`Could not resolve path ${e}. Either add it to the "public" directory or create a script in the "scripts" directory.`},a=function(e){return`Could not resolve path ${e}. If you want to preserve this file path, add the file to the "public" directory.`};function i(e){let t=e.split("/"),r=[];for(let e of t)".."===e||"."===e||""!==e&&r.push(e);return r.join("/")}var c={"public/.DS_Store":"public/.DS_Store","public/content-variables.css":"public/content-variables.css","public/icons/icon128-disabled-dark.png":"public/icons/icon128-disabled-dark.png","public/icons/icon128-disabled-light.png":"public/icons/icon128-disabled-light.png","public/icons/icon128.png":"public/icons/icon128.png","public/icons/icon16.png":"public/icons/icon16.png","public/icons/icon48.png":"public/icons/icon48.png","background/service_worker.js":"src/background/project/youboost.ts","content_scripts/content-0":["./src/content/loader/loader.ts"],"content_scripts/content-1":["./src/content/content.ts","./src/content/styles/content.css","/public/content-variables.css"],"content_scripts/content-2":["./src/content/scripts/networkMonitor.ts"],"content_scripts/content-3":["./src/content/scripts/youboostPremium.ts","./src/content/styles/youboostPremium.css"],"content_scripts/content-4":["./src/content/scripts/adPremiumBanner.tsx","./src/content/styles/adPremiumBanner.css"],"action/default_popup.html":"./src/popup/popup.html"};function u(e){if(!e)return console.error(n),"";if(e?.startsWith("http")||e?.startsWith("chrome://")||e?.startsWith("about:"))return e;if(e?.startsWith("chrome-extension://")){let t=chrome.runtime.getURL("");if(e.startsWith(t)){let r=e.replace(t,"");return chrome.runtime.getURL(u(r))}return e}if(e?.startsWith("/_favicon"))return e;let t=Object.entries(c).find((([t,r])=>{let n=i(e);return(r===n||r===`pages/${n}`||r===`scripts/${n}`)&&t})),r=i(e);return r.includes("public/")?"/"+r:t&&t.length?t[0]:("/"!==e&&function(e){e?.endsWith(".html")?console.error(o(e)):e?.endsWith(".js")?console.error(s(e)):console.error(a(e))}(e),e)}var d={solve:function(e){if("string"==typeof e)return u(e);let t=e=>({...e,...e?.path&&{path:"string"==typeof e.path?u(e.path):Object.entries(e.path).reduce(((e,[t,r])=>(e[t]=u(r),e)),{})},...e?.popup&&{popup:u(e.popup)},...e?.url&&{url:u(e.url)},...e?.iconUrl&&{iconUrl:u(e.iconUrl)},...e?.files&&{files:e.files.map((e=>u(e)))},...e?.js&&{js:Array.isArray(e.js)?e.js.map((e=>u(e))):e.js},...e?.css&&{css:Array.isArray(e.css)?e.css.map((e=>u(e))):e.css}});return Array.isArray(e)?e.map((e=>t(e))):{...t(e||{})}}}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return o[e].call(r.exports,r,r.exports,a),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(o,s,a)=>{var i;a&&((i=[]).d=-1);var c,u,d,l=new Set,h=o.exports,p=new Promise(((e,t)=>{d=t,u=e}));p[t]=h,p[e]=e=>(i&&e(i),l.forEach(e),p.catch((e=>{}))),o.exports=p,s((o=>{var s;c=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var s=[];s.d=0,o.then((e=>{a[t]=e,n(s)}),(e=>{a[r]=e,n(s)}));var a={};return a[e]=e=>e(s),a}}var i={};return i[e]=e=>{},i[t]=o,i})))(o);var a=()=>c.map((e=>{if(e[r])throw e[r];return e[t]})),u=new Promise((t=>{(s=()=>t(a)).r=0;var r=e=>e!==i&&!l.has(e)&&(l.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((t=>t[e](r)))}));return s.r?u:a()}),(e=>(e?d(p[r]=e):u(h),n(i)))),i&&i.d<0&&(i.d=0)},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(6713)})();